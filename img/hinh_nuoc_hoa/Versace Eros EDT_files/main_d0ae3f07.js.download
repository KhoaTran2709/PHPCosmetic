!function(e){function t(t){for(var o,r,s=t[0],l=t[1],d=t[2],u=0,p=[];u<s.length;u++)r=s[u],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&p.push(a[r][0]),a[r]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);for(c&&c(t);p.length;)p.shift()();return i.push.apply(i,d||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],o=!0,s=1;s<n.length;s++){var l=n[s];0!==a[l]&&(o=!1)}o&&(i.splice(t--,1),e=r(r.s=n[0]))}return e}var o={},a={0:0},i=[];function r(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=o,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var d=0;d<s.length;d++)t(s[d]);var c=l;i.push([426,2,3,5,1,4]),n()}({107:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapHandler=t.useCustomLogoHandler=t.useCustomLogo=t.useDefaultLogoHandler=t.useDefaultLogo=t.updateSystemNameHandler=t.updateSystemName=t.sendMessageHandler=t.sendMessage=t.reconnectSocketHandler=t.reconnectSocket=t.disconnectSocketHandler=t.disconnectSocket=t.connectSocketHandler=t.connectSocket=t.socketReceiveHandler=t.socketReceive=t.socketReplyHandler=t.socketReply=t.socketSendHandler=t.socketSend=t.socketDisconnectedHandler=t.socketDisconnected=t.socketConnectedHandler=t.socketConnected=t.setSocketHandler=t.setSocket=t.setupSocketHandler=t.setupSocket=t.pongSocketHandler=t.pongSocket=t.pingSocketHandler=t.pingSocket=t.stopGuideConversationHandler=t.stopGuideConversation=t.nextGuideConversationHandler=t.nextGuideConversation=t.startGuideConversationHandler=t.startGuideConversation=t.disableAutoScrollToBottomHandler=t.disableAutoScrollToBottom=t.enableAutoScrollToBottomHandler=t.enableAutoScrollToBottom=t.scrollToBottomHandler=t.scrollToBottom=t.scrollToTopHandler=t.scrollToTop=t.scrollToMessageHandler=t.scrollToMessage=t.stopFetchingHandler=t.stopFetching=t.startFetchingHandler=t.startFetching=void 0;const o=n(77),a=n(14),i=n(161),r=n(94),s=n(381),l=n(55),d=n(382),c=n(383),u=n(224),p=n(108),m=n(31),f=n(67),_=n(86);t.startFetching=()=>({type:d.ActionType.START_FETCHING}),t.startFetchingHandler=({conversation:e})=>(e.isFetching=!0,e),t.stopFetching=()=>({type:d.ActionType.STOP_FETCHING}),t.stopFetchingHandler=({conversation:e})=>(e.isFetching=!1,e),t.scrollToMessage=(e,t=!0)=>({type:d.ActionType.SCROLL_TO_MESSAGE,index:e,smooth:t}),t.scrollToMessageHandler=function*({anchor:e},{index:t,smooth:n}){const{conversation:o}=e;o&&(o.getMessage(t)||(yield f.call(()=>new Promise(e=>{const n=()=>o.getMessage(t)?e():setTimeout(n,300);return n()}))),o.scrollTo(t,n))},t.scrollToTop=()=>({type:d.ActionType.SCROLL_TO_TOP}),t.scrollToTopHandler=function*({chat:e}){const{conversation:n}=e,{top:o}=n;o&&(yield f.put(t.scrollToMessage(o.createdTime.getTime())))},t.scrollToBottom=()=>({type:d.ActionType.SCROLL_TO_BOTTOM}),t.scrollToBottomHandler=function*({chat:e}){const{conversation:n}=e,{bottom:o}=n;o&&(yield f.put(t.scrollToMessage(o.createdTime.getTime())))},t.enableAutoScrollToBottom=()=>({type:d.ActionType.ENABLE_AUTO_SCROLL_TO_BOTTOM}),t.enableAutoScrollToBottomHandler=({conversation:e})=>(e.autoScrollToBottom=!0,e),t.disableAutoScrollToBottom=()=>({type:d.ActionType.DISABLE_AUTO_SCROLL_TO_BOTTOM}),t.disableAutoScrollToBottomHandler=({conversation:e})=>(e.autoScrollToBottom=!1,e),t.startGuideConversation=(e=!0)=>({type:d.ActionType.START_GUIDE_CONVERSATION,wait:e}),t.startGuideConversationHandler=function*({conversation:e,chat:n},{wait:o}){var a;o&&(yield f.take(u.ActionType.FETCH_MESSAGE_DONE),yield f.delay(1e3));const{conversation:i}=n,{messages:r}=i;let s=0,d=0,p=0,_=!1;for(const e of m.values(r))e.sender.type===l.SenderType.Me?s++:e.sender.type===l.SenderType.Seller?d++:e.sender.type===l.SenderType.System&&p++,(null===(a=e.message.attachment)||void 0===a?void 0:a.type)===l.MessageAttachmentType.RequestInfo&&(_=!0);d||(s?_||(e.guideConversation=c.GuideConversationStep.INFO):e.guideConversation=p?c.GuideConversationStep.WAIT_QUEST:c.GuideConversationStep.WELCOME),e.guideConversation!==c.GuideConversationStep.STOP&&(yield f.put(t.nextGuideConversation()))},t.nextGuideConversation=()=>({type:d.ActionType.NEXT_GUIDE_CONVERSATION}),t.nextGuideConversationHandler=function*({global:e,conversation:n}){const{guideConversation:o}=n,{company:a}=e;switch(o){case c.GuideConversationStep.STOP:return;case c.GuideConversationStep.WELCOME:yield f.delay(3e3),yield f.put(r.systemSendText("✌️Hi")),n.guideConversation=c.GuideConversationStep.THANKS;break;case c.GuideConversationStep.THANKS:yield f.delay(2e3),yield f.put(r.systemSendText(`👍 Cám ơn bạn đã quan tâm đến ${a.name} !`)),n.guideConversation=c.GuideConversationStep.QUEST;break;case c.GuideConversationStep.QUEST:yield f.delay(2500),yield f.put(r.systemSendText("😀 Chúng tôi có thể giúp gì bạn ?")),n.guideConversation=c.GuideConversationStep.WAIT_QUEST;break;case c.GuideConversationStep.WAIT_QUEST:yield f.take(s.ActionType.ME_SEND),n.guideConversation=c.GuideConversationStep.INFO;break;case c.GuideConversationStep.INFO:yield f.delay(3e3),yield f.put(r.systemSendRequestInfo()),n.guideConversation=c.GuideConversationStep.WAIT_INFO;break;case c.GuideConversationStep.WAIT_INFO:yield f.take(s.ActionType.ME_SEND_RESPONSE_INFO),n.guideConversation=c.GuideConversationStep.BYE;break;case c.GuideConversationStep.BYE:yield f.delay(3e3),yield f.put(r.systemSendText(` 🤝 Cám ơn bạn đã gửi thông tin tới ${a.name}. ${a.name} sẽ sử dụng thông tin vào việc hỗ trợ bạn tốt hơn.`)),n.guideConversation=c.GuideConversationStep.STOP}yield f.put(t.nextGuideConversation())},t.stopGuideConversation=()=>({type:d.ActionType.STOP_GUIDE_CONVERSATION}),t.stopGuideConversationHandler=({conversation:e})=>(e.guideConversation=c.GuideConversationStep.STOP,e),t.pingSocket=()=>({type:d.ActionType.PING_SOCKET}),t.pingSocketHandler=function*({conversation:e,seller:n}){const{socket:o}=e;o&&o.readyState===WebSocket.OPEN&&(yield f.put(t.socketSend("ping",null,{pong:[function*(e){e.staff?(n.receiver&&n.receiver===e.staff.id||(yield f.put(p.sellerReception(e.staff.id))),yield f.put(p.updateLastActive(e.staff.id,e.staff.is_online,e.staff.last_active))):yield f.put(p.sellerReception(null)),e.last_message_time&&(yield f.put(r.checkLastMessageTime(e.last_message_time)))}]})))},t.pongSocket=e=>({type:d.ActionType.PONG_SOCKET,reply:e}),t.pongSocketHandler=function*({conversation:e},{reply:n}){const{socket:o}=e;o&&o.readyState===WebSocket.OPEN&&(yield f.put(t.socketReply(n,"pong",null)))},t.setupSocket=()=>({type:d.ActionType.SETUP_SOCKET}),t.setupSocketHandler=function*({backend:e,seller:n},o,{dispatch:a}){const{bus:i,api:s}=e;if(i)return yield*i.on("new_message",[function*(e){const{sellers:o}=n;e.sender.type===l.SenderType.Seller&&m.has(o,e.sender.id)&&(e.sender=m.get(o,e.sender.id));const a={id:e.id,sender:e.sender,message:e.message,createdTime:new Date(e.created_time)};yield f.put(r.pushMessageAndNotify(a)),s&&s.pushMessageToDB(a),yield f.put(t.scrollToBottom())}]),yield*i.on("seller_reception",[function*(e){e&&(yield f.put(p.updateLastActive(e,!0,new Date))),yield f.put(p.sellerReception(e))}]),void setInterval(()=>a(t.pingSocket()),3e4);throw new Error},t.setSocket=e=>({type:d.ActionType.SET_SOCKET,socket:e}),t.setSocketHandler=function*({conversation:e},{socket:n}){e.socket||(yield f.put(t.setupSocket())),e.socket=n},t.socketConnected=e=>({type:d.ActionType.SOCKET_CONNECTED,socket:e}),t.socketConnectedHandler=function*(e,{socket:n},{dispatch:o}){n.addEventListener("message",e=>{if(e.isTrusted){const n=JSON.parse(e.data);if(n.reply)return void o(t.socketReply(n.reply,n.action.toString(),n.data));n.action&&o(t.socketReceive(String(n.action),n.data,new Date(n.time)))}}),n.addEventListener("close",()=>{o(t.reconnectSocket())}),yield f.put(t.setSocket(n)),yield f.put(t.pingSocket())},t.socketDisconnected=()=>({type:d.ActionType.SOCKET_DISCONNECTED}),t.socketDisconnectedHandler=({conversation:e})=>(e.socket=null,e),t.socketSend=(e,t,n={})=>({type:d.ActionType.SOCKET_SEND,action:e,data:t,listeners:n}),t.socketSendHandler=function*({backend:e,conversation:n},{action:o,data:a,listeners:i}){const r=String(Date.now())+Math.ceil(performance.now()),{bus:s}=e,{socket:l}=n;if(l)return l.readyState!==WebSocket.OPEN?(yield f.call(()=>new Promise(e=>{const t=()=>n.socket&&n.socket.readyState===WebSocket.OPEN?e():setTimeout(t,300);setTimeout(t)})),void(yield f.put(t.socketSend(o,a,i)))):(s&&(yield*s.add(r,i)),l.send(JSON.stringify({id:r,action:o,data:a,time:Date.now()})));throw new Error},t.socketReply=(e,t,n)=>({type:d.ActionType.SOCKET_REPLY,reply:e,action:t,data:n}),t.socketReplyHandler=function*({backend:e},{reply:t,action:n,data:o}){const{bus:a}=e;a&&(yield*a.emit(t,n,o))},t.socketReceive=(e,t,n)=>({type:d.ActionType.SOCKET_RECEIVE,action:e,data:t,time:n}),t.socketReceiveHandler=function*({backend:e},{action:t,data:n}){const{bus:o}=e;o&&(yield*o.emit(null,t,n))},t.connectSocket=()=>({type:d.ActionType.CONNECT_SOCKET}),t.connectSocketHandler=function*({backend:e}){const{api:n}=e;if(n){yield f.call([n,n.waitInboxId]);let e=0;const o=yield f.call(()=>new Promise((t,o)=>{let i;const r=async()=>{i=await n.startSocket();const s=()=>{d(),t(i)},l=t=>{if(d(),e++,e>10)return o(t);a.waitTime(1e3*e).then(()=>r())},d=()=>{i.removeEventListener("open",s),i.removeEventListener("close",l)};i.addEventListener("open",s),i.addEventListener("close",l),i.addEventListener("message",e=>{const t=JSON.stringify(e.data);if("error"===m.get(t,"status"))throw i.close(),new Error})};return r()}));if(o.readyState===o.OPEN)return void(yield f.put(t.socketConnected(o)))}throw new Error},t.disconnectSocket=(e=1e3,t="")=>({type:d.ActionType.DISCONNECT_SOCKET,code:e,reason:t}),t.disconnectSocketHandler=function*({conversation:e},t){const{socket:n}=e,{code:o,reason:a}=t;n&&n&&n.readyState!==WebSocket.CLOSED&&(yield f.call(()=>new Promise(e=>{const t=t=>{i(),e(t)},i=()=>{n.removeEventListener("close",t)};return n.addEventListener("close",t),n.close(o,a)})))},t.reconnectSocket=()=>({type:d.ActionType.RECONNECT_SOCKET}),t.reconnectSocketHandler=function*(){yield f.put(t.disconnectSocket()),yield f.call(a.waitForNetwork),yield f.put(t.connectSocket())},t.sendMessage=e=>({type:d.ActionType.SEND_MESSAGE,message:e}),t.sendMessageHandler=function*({backend:e},{message:t}){const{api:n}=e;if(n||(yield f.take(i.ActionType.ATTACH_API)),e.api){const{api:n}=e;yield f.put(r.markMessagePushed(t));const o=yield f.call([n,n.postMessage],{sender:{type:t.sender.type},message:t.message,created_time:t.createdTime.toISOString(),client_created_time:(new Date).toISOString()});return o.error?void(yield f.put(_.processError(o))):void(yield f.put(r.markMessageSent(t,o.id,o.created_time)))}throw new Error},t.updateSystemName=e=>({type:d.ActionType.UPDATE_SYSTEM_NAME,name:e}),t.updateSystemNameHandler=({conversation:e},{name:t})=>{const{system:n}=e;return n.name=t,e},t.useDefaultLogo=()=>({type:d.ActionType.USE_DEFAULT_LOGO}),t.useDefaultLogoHandler=({conversation:e})=>{const{system:t}=e;return t.avatar=o.Image.Doopage,e},t.useCustomLogo=e=>({type:d.ActionType.USE_CUSTOM_LOGO,logo:e}),t.useCustomLogoHandler=({conversation:e},{logo:t})=>{const{system:n}=e;return n.avatar=t,e},t.mapHandler={[d.ActionType.START_FETCHING]:t.startFetchingHandler,[d.ActionType.STOP_FETCHING]:t.stopFetchingHandler,[d.ActionType.SCROLL_TO_MESSAGE]:t.scrollToMessageHandler,[d.ActionType.SCROLL_TO_TOP]:t.scrollToTopHandler,[d.ActionType.SCROLL_TO_BOTTOM]:t.scrollToBottomHandler,[d.ActionType.ENABLE_AUTO_SCROLL_TO_BOTTOM]:t.enableAutoScrollToBottomHandler,[d.ActionType.DISABLE_AUTO_SCROLL_TO_BOTTOM]:t.disableAutoScrollToBottomHandler,[d.ActionType.START_GUIDE_CONVERSATION]:t.startGuideConversationHandler,[d.ActionType.NEXT_GUIDE_CONVERSATION]:t.nextGuideConversationHandler,[d.ActionType.STOP_GUIDE_CONVERSATION]:t.stopGuideConversationHandler,[d.ActionType.PING_SOCKET]:t.pingSocketHandler,[d.ActionType.PONG_SOCKET]:t.pongSocketHandler,[d.ActionType.SETUP_SOCKET]:t.setupSocketHandler,[d.ActionType.SET_SOCKET]:t.setSocketHandler,[d.ActionType.SOCKET_CONNECTED]:t.socketConnectedHandler,[d.ActionType.SOCKET_DISCONNECTED]:t.socketDisconnectedHandler,[d.ActionType.SOCKET_SEND]:t.socketSendHandler,[d.ActionType.SOCKET_REPLY]:t.socketReplyHandler,[d.ActionType.SOCKET_RECEIVE]:t.socketReceiveHandler,[d.ActionType.CONNECT_SOCKET]:t.connectSocketHandler,[d.ActionType.DISCONNECT_SOCKET]:t.disconnectSocketHandler,[d.ActionType.RECONNECT_SOCKET]:t.reconnectSocketHandler,[d.ActionType.SEND_MESSAGE]:t.sendMessageHandler,[d.ActionType.UPDATE_SYSTEM_NAME]:t.updateSystemNameHandler,[d.ActionType.USE_DEFAULT_LOGO]:t.useDefaultLogoHandler,[d.ActionType.USE_CUSTOM_LOGO]:t.useCustomLogoHandler},t.default=t.mapHandler},108:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapHandler=t.removeAvatarSellerHandler=t.removeAvatarSeller=t.updateLastActiveHandler=t.updateLastActive=t.sellerReceptionHandler=t.sellerReception=t.fetchSellerHandler=t.fetchSeller=t.fetchSellerDoneHandler=t.fetchSellerDone=t.addSellerHandler=t.addSeller=void 0;const o=n(55),a=n(384),i=n(31),r=n(67);t.addSeller=e=>({type:a.ActionType.ADD_SELLER,seller:e}),t.addSellerHandler=({seller:e},{seller:t})=>{const{sellers:n}=e;return e.sellers=i.clone(n),e.sellers[t.id]={type:o.SenderType.Seller,id:t.id,name:t.name,avatar:t.avatar,isOnline:t.isOnline||!1,lastActive:new Date(t.lastActive||0)},e},t.fetchSellerDone=e=>({type:a.ActionType.FETCH_SELLERS_DONE,data:e}),t.fetchSellerDoneHandler=function*(e,{data:n}){for(const e of n)yield r.put(t.addSeller(e))},t.fetchSeller=()=>({type:a.ActionType.FETCH_SELLERS}),t.fetchSellerHandler=function*({backend:e}){const{api:n}=e;if(!n)throw new Error;{const e=yield r.call([n,n.getStaffs]);yield r.put(t.fetchSellerDone(e))}},t.sellerReception=e=>({type:a.ActionType.SELLER_RECEPTION,sid:e}),t.sellerReceptionHandler=({seller:e},{sid:t})=>(e.receiver=t,e),t.updateLastActive=(e,t,n)=>({type:a.ActionType.UPDATE_LAST_ACTIVE,sid:e,isOnline:t,lastActive:n}),t.updateLastActiveHandler=({backend:e,seller:t},{sid:n,isOnline:o,lastActive:a})=>{const{api:r}=e,{sellers:s}=t;return s[n]&&(t.sellers[n]=i.clone(s[n]),t.sellers[n].isOnline=o,t.sellers[n].lastActive=new Date(a),r&&r.updateStaffLastActive(t.sellers[n])),t},t.removeAvatarSeller=e=>({type:a.ActionType.REMOVE_AVATAR_SELLER,sid:e}),t.removeAvatarSellerHandler=({seller:e},{sid:t})=>{const{sellers:n}=e;return n[t]&&(e.sellers[t]=i.clone(n[t]),e.sellers[t].avatar=null),e},t.mapHandler={[a.ActionType.ADD_SELLER]:t.addSellerHandler,[a.ActionType.FETCH_SELLERS_DONE]:t.fetchSellerDoneHandler,[a.ActionType.FETCH_SELLERS]:t.fetchSellerHandler,[a.ActionType.SELLER_RECEPTION]:t.sellerReceptionHandler,[a.ActionType.UPDATE_LAST_ACTIVE]:t.updateLastActiveHandler,[a.ActionType.REMOVE_AVATAR_SELLER]:t.removeAvatarSellerHandler},t.default=t.mapHandler},109:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapHandler=t.hiddenComposerFileHandler=t.hiddenComposerFile=t.showComposerFileHandler=t.showComposerFile=t.updateLicenseTextHandler=t.updateLicenseText=t.updateHeaderColorHandler=t.updateHeaderColor=t.clickLicenseHandler=t.clickLicense=void 0;const o=n(669);t.clickLicense=()=>({type:o.ActionType.CLICK_LICENSE}),t.clickLicenseHandler=({dialog:e})=>e,t.updateHeaderColor=e=>({type:o.ActionType.UPDATE_HEADER_COLOR,color:e}),t.updateHeaderColorHandler=({dialog:e},{color:t})=>{const{header:n}=e,{backgroundColor:o}=n,[a]=o,[i,r,s]=t,l=[i-10,r-10,s-10],d=[i+10,r+10,s+10];return n.backgroundColor=[a,[l,t,d]],e},t.updateLicenseText=(e,t)=>({type:o.ActionType.UPDATE_LICENSE_TEXT,text:e,url:t}),t.updateLicenseTextHandler=({dialog:e},{text:t,url:n})=>(t&&(e.license.text=t),n&&(e.license.url=n),e),t.showComposerFile=()=>({type:o.ActionType.SHOW_COMPOSER_FILE}),t.showComposerFileHandler=({dialog:e})=>(e.composer.file.show=!0,e),t.hiddenComposerFile=()=>({type:o.ActionType.HIDDEN_COMPOSER_FILE}),t.hiddenComposerFileHandler=({dialog:e})=>(e.composer.file.show=!1,e),t.mapHandler={[o.ActionType.CLICK_LICENSE]:t.clickLicenseHandler,[o.ActionType.UPDATE_HEADER_COLOR]:t.updateHeaderColorHandler,[o.ActionType.UPDATE_LICENSE_TEXT]:t.updateLicenseTextHandler,[o.ActionType.SHOW_COMPOSER_FILE]:t.showComposerFileHandler,[o.ActionType.HIDDEN_COMPOSER_FILE]:t.hiddenComposerFileHandler},t.default=t.mapHandler},110:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapHandler=t.useCustomLogoHandler=t.useCustomLogo=t.useDefaultLogoHandler=t.useDefaultLogo=t.updateIconColorHandler=t.updateIconColor=t.updateBackgroundColorHandler=t.updateBackgroundColor=t.toggleHandler=t.toggle=t.closeHandler=t.close=t.openHandler=t.open=void 0;const o=n(6),a=n(77),i=o.__importDefault(n(671)),r=n(163),s=n(672),l=n(67);t.open=()=>({type:s.ActionType.OPEN}),t.openHandler=({backend:e,launcher:t})=>{const{api:n}=e;return t.opened=!0,r.Pixel.event("open_livechat"),n&&n.setDialogOpened(!0),t},t.close=()=>({type:s.ActionType.CLOSE}),t.closeHandler=({backend:e,launcher:t})=>{const{api:n}=e;return t.opened=!1,r.Pixel.event("close_livechat"),n&&n.setDialogOpened(!1),t},t.toggle=()=>({type:s.ActionType.TOGGLE}),t.toggleHandler=function*({launcher:e}){const{opened:n}=e;yield l.put(n?t.close():t.open())},t.updateBackgroundColor=e=>({type:s.ActionType.UPDATE_BACKGROUND_COLOR,color:e}),t.updateBackgroundColorHandler=({launcher:e},{color:t})=>{const{closedIcon:n}=e;return n.backgroundColor=t,e},t.updateIconColor=e=>({type:s.ActionType.UPDATE_ICON_COLOR,color:e}),t.updateIconColorHandler=({launcher:e},{color:t})=>{const{closedIcon:n}=e,{icon:o}=n;return o.color=t,e},t.useDefaultLogo=()=>({type:s.ActionType.USE_DEFAULT_LOGO}),t.useDefaultLogoHandler=({launcher:e})=>{const{closedIcon:t}=e,{icon:n}=t;return n.icon=a.Icon.Doopage,e},t.useCustomLogo=e=>({type:s.ActionType.USE_CUSTOM_LOGO,logo:e}),t.useCustomLogoHandler=({launcher:e},{logo:t})=>{const{closedIcon:n}=e,{icon:o}=n;return o.icon=i.default({src:t}),e},t.mapHandler={[s.ActionType.OPEN]:t.openHandler,[s.ActionType.CLOSE]:t.closeHandler,[s.ActionType.TOGGLE]:t.toggleHandler,[s.ActionType.UPDATE_BACKGROUND_COLOR]:t.updateBackgroundColorHandler,[s.ActionType.UPDATE_ICON_COLOR]:t.updateIconColorHandler,[s.ActionType.USE_DEFAULT_LOGO]:t.useDefaultLogoHandler,[s.ActionType.USE_CUSTOM_LOGO]:t.useCustomLogoHandler},t.default=t.mapHandler},132:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapHandler=t.sendNotifyHandler=t.showErrorNotify=t.sendNotify=t.requestPermissionHandler=t.requestPermission=t.attachWorkerHandler=t.attachWorker=void 0;const o=n(162),a=n(665),i=n(225),r=n(31),s=n(67);t.attachWorker=e=>({type:a.ActionType.ATTACH_WORKER,worker:e}),t.attachWorkerHandler=({notification:e},{worker:t})=>(e.worker=t,e),t.requestPermission=()=>({type:a.ActionType.REQUEST_PERMISSION}),t.requestPermissionHandler=function*({notification:e}){var t;const{worker:n}=e;n||(yield s.take(a.ActionType.ATTACH_WORKER)),null===(t=e.worker)||void 0===t||t.requestPermission()},t.sendNotify=(e,t,n)=>({channel:null,audio:null,hiddenIfOpened:!1,hiddenIfTabActive:!1,...n,type:a.ActionType.SEND_NOTIFY,level:e,message:t}),t.showErrorNotify=e=>t.sendNotify(i.NotifyLevel.ERROR,e,{channel:i.ChannelNotify.TOAST}),t.sendNotifyHandler=function*({notification:e,snackbar:t,launcher:n},{channel:a,message:l,level:d,audio:c,hiddenIfTabActive:u,hiddenIfOpened:p}){var m;const{opened:f}=n;if(c&&(yield s.put(o.play(c))),!l)return;if(!document.hidden){if(u)return;if(f&&p)return}let _=a;if(null===_&&(_=e.channel),_===i.ChannelNotify.AUTO&&(_=document.hidden?i.ChannelNotify.NOTIFICATION:t.pipe?i.ChannelNotify.TOAST:i.ChannelNotify.NOTIFICATION),_==i.ChannelNotify.NOTIFICATION&&e.worker&&!e.worker.isReady){if(!t.pipe)return void console.info("Send Notify Failed:",...arguments);_=i.ChannelNotify.TOAST}switch(_){case i.ChannelNotify.NOTIFICATION:if(e.worker&&e.worker.isReady){const t={renotify:!0,tag:String(d).split(".").pop()};let n=l;if(d!==i.NotifyLevel.INFO){n=`[${r.upperFirst(null===(m=String(d).split(".").pop())||void 0===m?void 0:m.toLowerCase())}] ${n}`}e.worker.notify(n,t)}break;case i.ChannelNotify.TOAST:if(t.pipe){const e={anchorOrigin:{vertical:"top",horizontal:"right"}};switch(d){case i.NotifyLevel.SUCCESS:e.variant="success";break;case i.NotifyLevel.ERROR:e.variant="error";break;case i.NotifyLevel.WARNING:e.variant="warning";break;case i.NotifyLevel.INFO:e.variant="info"}t.pipe.enqueueSnackbar(l,e)}}},t.mapHandler={[a.ActionType.ATTACH_WORKER]:t.attachWorkerHandler,[a.ActionType.REQUEST_PERMISSION]:t.requestPermissionHandler,[a.ActionType.SEND_NOTIFY]:t.sendNotifyHandler},t.default=t.mapHandler},133:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapHandler=t.fetchMessageInBottomHandler=t.fetchMessageInBottom=t.fetchMessageInTopHandler=t.fetchMessageInTop=t.fetchMessageHandler=t.fetchMessage=t.loadMessageFromDbDoneHandler=t.loadMessageFromDbDone=t.loadMessageFromDbHandler=t.loadMessageFromDb=t.fetchMessageDoneHandler=t.fetchMessageDone=t.fetchInboxHandler=t.fetchInbox=t.fetchInboxDoneHandler=t.fetchInboxDone=t.updatePhoneHandler=t.updatePhone=t.updateEmailHandler=t.updateEmail=t.updateAvatarHandler=t.updateAvatar=t.updateNameHandler=t.updateName=t.updateInboxIdHandler=t.updateInboxId=t.updateIdHandler=t.updateId=t.resetHandler=t.reset=void 0;const o=n(161),a=n(94),i=n(107),r=n(86),s=n(224),l=n(108),d=n(384),c=n(228),u=n(31),p=n(67);t.reset=()=>({type:s.ActionType.RESET}),t.resetHandler=()=>{const{me:e}=c.rootInit;return e},t.updateId=e=>({type:s.ActionType.UPDATE_ID,id:e}),t.updateIdHandler=({me:e},{id:t})=>(e.id!==t&&(e.id=t,e.name=null,e.avatar=null,e.email=null,e.phone=null),e),t.updateInboxId=e=>({type:s.ActionType.UPDATE_INBOX_ID,id:e}),t.updateInboxIdHandler=function*({backend:e},{id:n}){const{api:a}=e;yield p.put(t.updateId(n)),a||(yield p.take(o.ActionType.ATTACH_API)),a&&(yield p.call([a,a.setInboxId],null!=n?n:-1))},t.updateName=e=>({type:s.ActionType.UPDATE_NAME,name:e}),t.updateNameHandler=({me:e},{name:t})=>(e.name=t,e),t.updateAvatar=e=>({type:s.ActionType.UPDATE_AVATAR,avatar:e}),t.updateAvatarHandler=({me:e},{avatar:t})=>(e.avatar=t,e),t.updateEmail=e=>({type:s.ActionType.UPDATE_EMAIL,email:e}),t.updateEmailHandler=({me:e},{email:t})=>(e.email=t,e),t.updatePhone=e=>({type:s.ActionType.UPDATE_PHONE,phone:e}),t.updatePhoneHandler=({me:e},{phone:t})=>(e.phone=t,e),t.fetchInboxDone=e=>({type:s.ActionType.FETCH_INBOX_DONE,data:e}),t.fetchInboxDoneHandler=function*(e,{data:n}){const{id:o,name:a,avatar:i,email:r,phone:s,staff:d}=n;yield p.put(t.updateInboxId(o)),yield p.put(t.updateName(a)),i&&(yield p.put(t.updateAvatar(i))),r&&(yield p.put(t.updateEmail(r))),s&&(yield p.put(t.updatePhone(s))),d&&(yield p.put(l.sellerReception(d)))},t.fetchInbox=()=>({type:s.ActionType.FETCH_INBOX}),t.fetchInboxHandler=function*({backend:e}){const{api:n}=e;if(n){const e=yield p.call([n,n.getInbox]);return e.error?void(yield p.put(r.processError(e))):void(yield p.put(t.fetchInboxDone(e)))}throw new Error},t.fetchMessageDone=(e,t)=>({type:s.ActionType.FETCH_MESSAGE_DONE,data:e,scrollTo:t}),t.fetchMessageDoneHandler=function*({backend:e,anchor:t,conversation:n},{data:o,scrollTo:r}){const{api:s}=e;let l;if(-1===r){const{conversation:e}=t;e&&(l=e.getMessageTopInView())}for(const e of o){const t={id:e.id,sender:e.sender,message:e.message,createdTime:new Date(e.created_time)};yield p.put(a.pushMessage(t)),s&&(yield p.call([s,s.pushMessageToDB],t))}0===r?yield p.put(i.scrollToTop()):void 0===r||r===1/0?yield p.put(i.scrollToBottom()):-1===r?l&&(yield p.put(i.scrollToMessage(parseInt(l.props.mid),!1))):yield p.put(i.scrollToMessage(r)),yield p.delay(300),yield p.put(i.stopFetching());const{socket:d}=n;d||(yield p.put(i.connectSocket())),yield p.put(i.pingSocket())},t.loadMessageFromDb=()=>({type:s.ActionType.LOAD_MESSAGE_FROM_DB}),t.loadMessageFromDbHandler=function*({backend:e}){const{api:n}=e;if(n){const e=yield p.call([n,n.getMessagesFromDB]);yield p.put(t.loadMessageFromDbDone(e))}},t.loadMessageFromDbDone=e=>({type:s.ActionType.LOAD_MESSAGE_FROM_DB_DONE,messages:e}),t.loadMessageFromDbDoneHandler=function*(e,{messages:t}){for(const e of t)yield p.put(a.pushMessage(e));yield p.put(i.scrollToBottom())},t.fetchMessage=(e,t=new Date,n)=>({type:s.ActionType.FETCH_MESSAGE,cursor:e,time:t,scrollTo:n}),t.fetchMessageHandler=function*({backend:e,me:n,seller:o},{cursor:a,time:l,scrollTo:c}){const{api:m}=e,{id:f}=n;yield p.put(i.startFetching()),f<0&&(yield p.put(t.fetchInbox()),yield p.take(s.ActionType.FETCH_INBOX_DONE));const{sellers:_}=o;if(u.keys(_).length||(yield p.take(d.ActionType.FETCH_SELLERS_DONE)),m){let e=l.getTime();switch(a){case"before":e--;break;case"after":e++}const n=yield p.call([m,m.getMessage],a,e);return n.error?void(yield p.put(r.processError(n))):void(yield p.put(t.fetchMessageDone(n,c)))}throw new Error},t.fetchMessageInTop=e=>({type:s.ActionType.FETCH_MESSAGE_IN_TOP,scrollTo:e}),t.fetchMessageInTopHandler=function*({chat:e,conversation:n},{scrollTo:o}){const{isFetching:a}=n;if(!a){const{conversation:n}=e,{top:a}=n;yield p.put(t.fetchMessage("before",a?a.createdTime:new Date,o))}},t.fetchMessageInBottom=e=>({type:s.ActionType.FETCH_MESSAGE_IN_BOTTOM,scrollTo:e}),t.fetchMessageInBottomHandler=function*({chat:e,conversation:n},{scrollTo:o}){const{isFetching:a}=n;if(!a){const{conversation:n}=e,{bottom:a}=n;yield p.put(t.fetchMessage("after",a?a.createdTime:new Date,o))}},t.mapHandler={[s.ActionType.RESET]:t.resetHandler,[s.ActionType.UPDATE_ID]:t.updateIdHandler,[s.ActionType.UPDATE_INBOX_ID]:t.updateInboxIdHandler,[s.ActionType.UPDATE_NAME]:t.updateNameHandler,[s.ActionType.UPDATE_AVATAR]:t.updateAvatarHandler,[s.ActionType.UPDATE_EMAIL]:t.updateEmailHandler,[s.ActionType.UPDATE_PHONE]:t.updatePhoneHandler,[s.ActionType.FETCH_INBOX_DONE]:t.fetchInboxDoneHandler,[s.ActionType.FETCH_INBOX]:t.fetchInboxHandler,[s.ActionType.FETCH_MESSAGE_DONE]:t.fetchMessageDoneHandler,[s.ActionType.FETCH_MESSAGE]:t.fetchMessageHandler,[s.ActionType.FETCH_MESSAGE_IN_TOP]:t.fetchMessageInTopHandler,[s.ActionType.FETCH_MESSAGE_IN_BOTTOM]:t.fetchMessageInBottomHandler,[s.ActionType.LOAD_MESSAGE_FROM_DB_DONE]:t.loadMessageFromDbDoneHandler,[s.ActionType.LOAD_MESSAGE_FROM_DB]:t.loadMessageFromDbHandler},t.default=t.mapHandler},14:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isFileImage=t.isApiSuccess=t.inRange=t.parseColor=t.InjectEnum=t.firstCamelCase=t.redirect=t.border=t.transition=t.linearGradient=t.color=t.empty=t.ease=t.orAuto=t.percentOrAuto=t.emOrAuto=t.pxOrAuto=t.calc=t.scale=t.url=t.important=t.rotate=t.percent=t.millisecond=t.second=t.deg=t.em=t.px=t.nonNull=t.waitForNetwork=t.waitTime=void 0;const o=n(6).__importDefault(n(430)),a=n(31);t.waitTime=async e=>new Promise(t=>setTimeout(t,~~(1e3*Math.random())-500+e)),t.waitForNetwork=async()=>new Promise(e=>{const t=()=>window.navigator.onLine?e():setTimeout(t,1e3);setTimeout(t)}),t.nonNull=(e,t)=>n=>null!=n?e(n):t,t.px=t.nonNull(e=>e+"px","0"),t.em=t.nonNull(e=>e+"em","0"),t.deg=t.nonNull(e=>e+"deg","0"),t.second=t.nonNull(e=>e+"s","0"),t.millisecond=t.nonNull(e=>e+"ms","0"),t.percent=t.nonNull(e=>e+"%","0"),t.rotate=t.nonNull(e=>`rotate(${e}deg)`,"rotate(0)"),t.important=t.nonNull(e=>e+" !important",""),t.url=t.nonNull(e=>`url(${e})`,"rotate(0)"),t.scale=t.nonNull(e=>`scale(${e})`,"auto"),t.calc=(...e)=>`calc(${e.join(" ")})`,t.pxOrAuto=t.nonNull(e=>t.px(e),"auto"),t.emOrAuto=t.nonNull(e=>t.em(e),"auto"),t.percentOrAuto=t.nonNull(e=>t.percent(e),"auto"),t.orAuto=t.nonNull(e=>e,"auto"),t.ease=t.nonNull(a.kebabCase,""),t.empty=()=>'""',t.color=([e,t,n,o])=>`rgb(${e}, ${t}, ${n}${a.isNumber(o)?", "+o:""})`,t.linearGradient=e=>`linear-gradient(${e[0]}deg, ${a.toPairs(e[1]).map(([e,n])=>`${t.color(n)} ${e}%`).join(", ")})`,t.transition=e=>[t.second(e.duration),t.ease(e.ease),t.second(e.delay)].join(" "),t.border=e=>[t.px(e.size),e.style,t.color(e.color)].join(" "),t.redirect=(e,t)=>(...n)=>e(t(...n)),t.firstCamelCase=e=>a.upperFirst(a.camelCase(e)),t.InjectEnum=(e,...n)=>{for(const[o,i]of a.toPairs(e))if(isNaN(a.toNumber(o))){if(!(n.length>0)||isNaN(a.toNumber(i)))throw new Error;a.set(e,o,[...n,o].map(t.firstCamelCase).join("."))}else a.unset(e,o)},t.parseColor=e=>new o.default(e).array(),t.inRange=(e,t,n)=>t<=e&&e<=n,t.isApiSuccess=e=>!a.has(e,"error")&&!a.has(e,"code"),t.isFileImage=e=>{var t;return/\.(jpg|png|gif)$/gim.test(null!==(t=e.name)&&void 0!==t?t:e.url)}},161:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionType=void 0;const o=n(6),a=n(14),i=o.__importDefault(n(47));var r;!function(e){e[e.ATTACH_API=0]="ATTACH_API",e[e.ATTACH_BUS=1]="ATTACH_BUS",e[e.UPDATE_HEADER=2]="UPDATE_HEADER",e[e.UPDATE_WEBSITE_ID=3]="UPDATE_WEBSITE_ID"}(r=t.ActionType||(t.ActionType={})),a.InjectEnum(r,i.default.BACKEND)},162:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapHandler=t.removeHandler=t.remove=t.stopHandler=t.stop=t.playHandler=t.play=t.addAllHandler=t.addAll=t.addHandler=t.add=t.attachWorkerHandler=t.attachWorker=void 0;const o=n(77),a=n(664),i=n(31),r=n(67);t.attachWorker=e=>({type:a.ActionType.ATTACH_WORKER,worker:e}),t.attachWorkerHandler=({audio:e},{worker:t})=>(e.worker=t,e),t.add=(e,t)=>({type:a.ActionType.ADD,id:e,url:t}),t.addHandler=({audio:e},{id:t,url:n})=>{const{library:o}=e;return i.set(o,t,{url:n,stream:new Audio(n)}),e},t.addAll=()=>({type:a.ActionType.ADD_ALL}),t.addAllHandler=function*(){for(const[e,n]of i.toPairs(o.Audio))yield r.put(t.add(e,n))},t.play=e=>({type:a.ActionType.PLAY,id:e}),t.playHandler=({audio:e},{id:t})=>{const{library:n}=e,{stream:o}=i.get(n,t);return o&&o.play().then(),e},t.stop=e=>({type:a.ActionType.STOP,id:e}),t.stopHandler=({audio:e},{id:t})=>{const{library:n}=e,o=i.get(n,t),{stream:a}=o;return a&&a.pause(),e},t.remove=e=>({type:a.ActionType.REMOVE,id:e}),t.removeHandler=({audio:e},{id:t})=>{const{library:n}=e;return i.unset(n,t),e},t.mapHandler={[a.ActionType.ATTACH_WORKER]:t.attachWorkerHandler,[a.ActionType.ADD]:t.addHandler,[a.ActionType.ADD_ALL]:t.addAllHandler,[a.ActionType.PLAY]:t.playHandler,[a.ActionType.STOP]:t.stopHandler,[a.ActionType.REMOVE]:t.removeHandler},t.default=t.mapHandler},163:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(6);n(667),o.__exportStar(n(388),t)},20:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Component=void 0;const o=n(6).__importDefault(n(0));class a extends o.default.Component{constructor(e){super(e),this.anchor=o.default.createRef(),this.state={}}componentDidMount(){const{init:e}=this.props;e&&e(this)}componentWillUnmount(){const{init:e}=this.props;e&&e(null)}}t.Component=a,a.defaultProps={}},202:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Api=void 0;const o=n(6),a=n(14),i=o.__importDefault(n(318)),r=o.__importDefault(n(454)),s=n(31),l=n(53),d=n(636);class c{constructor(e){this.storage=new r.default(c.StorageKey),this.config=e,this.http=i.default.create({baseURL:`${e.ssl?"https":"http"}://${e.host}/${e.baseURL}/${e.api}`,validateStatus:this.validateStatus})}static async clearAllData(){await r.default.delete(c.StorageKey)}static async clearConfigData(){const e=new r.default(this.StorageKey);this.setupStorage(e);for(const t of["configs","staffs"])await e.table(t).clear();for(const{key:t,isImportant:n}of await e.table("settings").toArray())n||await e.table("settings").where("key").equals(t).delete()}static async clearMessageData(){const e=new r.default(this.StorageKey);this.setupStorage(e);for(const t of["messages"])await e.table(t).clear()}static setupStorage(e){e.version(c.Version).stores({settings:"&key",configs:"++id",staffs:"++id",inboxes:"++id",messages:"++id"})}async init(){c.setupStorage(this.storage),this.storage.isOpen()||await this.storage.open();const e=await this.storage.table("settings");if(await this.isConfigExists()){const t=await e.where("key").equals("version").last();if(!t||+t.value<c.Version)return await c.clearAllData(),location.reload()}else e.add({key:"version",value:c.Version.toString(),isImportant:!0})}setHeader(e,t){if(t)return s.set(this.http.defaults.headers,e,t);s.unset(this.http.defaults.headers,e)}async startSocket(e={}){await this.init();const{ssl:t,host:n,hostSocket:o,socket:a}=this.config,i=t?"wss":"ws";e.inbox_id=await this.waitInboxId();const r=d.stringify({...e,...c.getMetaVersionData()});return new WebSocket(`${i}://${null!=o?o:n}/${a}/?${r}`)}validateStatus(e){return!!~[200,201,403].indexOf(e)}static getMetaVersionData(){var e,t;return{"X-DooPage-Env":"production","X-DooPage-Version":null===(t=null===(e="1.0.11.50939")?void 0:e.split("-").shift())||void 0===t?void 0:t.split(".").slice(0,3).join("."),"X-DooPage-Build":"1.0.11.50939"}}async beforeRequest(e){return e.headers={...e.headers,...c.getMetaVersionData()},e}async afterRequest(e){return e}async request(e={}){try{return await this.afterRequest(await this.http.request(await this.beforeRequest(e)))}catch(t){if(t.isAxiosError){if("Network Error"===t.message){const t=s.get(e,"_retry",c.maxRetry);if(t>0)return s.set(e,"_retry",t-1),await a.waitTime(1e3*(c.maxRetry-t)),this.request(e)}if(t.message.startsWith("Request failed with status code")&&t.response)return t.response.data||(t.response.data={}),t.response.data.code||(t.response.data.code="ERROR_STATUS_"+t.response.status),t.response.data.error||(t.response.data.error=t.message),t.response.data.is_show||(t.response.data.is_show=!0),t.response}throw t}}async isConfigExists(){const e=await this.storage.table("configs");return await e.where("id").equals(this.config.websiteId).count()>0}async getConfig(e=!1,t=6048e5){await this.init();const n=await this.storage.table("configs"),o=await n.where("id").equals(this.config.websiteId).last();try{if(o&&Date.now()-o.createdAt<t&&!e)return o}catch(e){}const i=await this.request({method:"GET",url:"/"});return a.isApiSuccess(i.data)&&(o?await n.update(o.id,{...i.data,updatedAt:Date.now()}):await n.add({...i.data,createdAt:Date.now(),updatedAt:Date.now()})),i.data}async getStaffs(e=!1){await this.init();const t=await this.storage.table("staffs"),n=await t.toArray();if(n.length&&!e)return n;const o=await this.request({method:"GET",url:"/staffs/"});if(a.isApiSuccess(o.data))for(const e of s.castArray(o.data)){n.find(t=>t.id===e.id)?await t.update(e.id,{...e,updatedAt:Date.now()}):await t.add({...e,createdAt:Date.now(),updatedAt:Date.now()})}return o.data}async setInboxId(e){const t=await this.storage.table("settings"),n=await t.where("key").equals("inboxId").last();n?await t.update(n.key,{key:"inboxId",value:e.toString()}):await t.add({key:"inboxId",value:e.toString(),isImportant:!0})}async waitInboxId(e=100){let t;do{await new Promise(t=>setTimeout(t,e)),t=await this.getInboxId()}while(!t||t<0);return t}async getInbox(e=!1,t=6048e5){await this.init();const n=await this.storage.table("inboxes"),o=await this.getInboxId(),i=await n.where("id").equals(o||0).last();if(i&&Date.now()-i.createdAt<t&&!e)return i;const r=await this.request({method:o?"GET":"POST",url:"/inbox/"+(null!=o?o:"")});return a.isApiSuccess(r.data)&&(i?await n.update(r.data.id,{...r.data,updatedAt:Date.now()}):await n.add({...r.data,createdAt:Date.now(),updatedAt:Date.now()})),r.data}async updateUserInfo(e){await this.init();const t=await this.storage.table("inboxes"),n=await this.request({method:"PATCH",url:"/inbox/"+await this.waitInboxId(),data:e});return a.isApiSuccess(n.data)&&await t.update(n.data.id,{...n.data,updatedAt:Date.now()}),n.data}async getMessage(e,t,n=20){return(await this.request({method:"GET",url:`/inbox/${await this.waitInboxId()}/messages/`,params:{[e]:t,count:n}})).data}async uploadFile(e){return(await this.request({method:"POST",url:`/inbox/${await this.waitInboxId()}/upload/`,data:e})).data}async postMessage(e){if(await this.init(),e.message.attachment){const t=e.message.attachment.payload;if(s.get(t,"url","").startsWith("blob:")){const e=s.get(t,"url"),n=await fetch(e),o=new FormData;o.append("file",await n.blob());const a=await this.uploadFile(o);if(a.error)return a;s.set(t,"url",a.url)}}return(await this.request({method:"POST",url:`/inbox/${await this.waitInboxId()}/messages/`,data:e})).data}async fetchToLocal(e){try{const t=await this.http.request({method:"GET",url:e});console.log(t)}catch(e){return null}return null}async getMessagesFromDB(){const e=[],t=await this.storage.table("messages");for(const n of await t.toArray()){const t={id:n.id,sender:n.sender,message:n.message,createdTime:new Date(n.created_time)};e.push(t)}return e}async pushMessageToDB(e){const t=await this.storage.table("messages"),n={id:e.id,sender:e.sender,message:e.message,created_time:e.createdTime.toISOString()};await t.where("id").equals(e.id).last()?await t.update(e.id,n):await t.add(n)}async updateStaffLastActive(e){await this.init();const t=await this.storage.table("staffs");await t.where("id").equals(e.id).last()?await t.update(e.id,{...e,updatedAt:Date.now()}):await t.add({...e,createdAt:Date.now(),updatedAt:Date.now()})}async isDialogOpened(){const e=await this.storage.table("settings"),t=await e.where("key").equals("dialogOpened").last();return!!t&&JSON.parse(t.value)}async setDialogOpened(e){const t=await this.storage.table("settings"),n=await t.where("key").equals("dialogOpened").last();n?await t.update(n.key,{...n,value:JSON.stringify(e)}):await t.add({key:"dialogOpened",value:JSON.stringify(e),isImportant:!1})}async getInboxId(){const e=await this.storage.table("settings"),t=await e.where("key").equals("inboxId").last();return t?parseInt(t.value):null}}c.StorageKey="doopage_livechat",c.Version=2,c.maxRetry=10,o.__decorate([l.Once(),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[]),o.__metadata("design:returntype",Promise)],c.prototype,"init",null),o.__decorate([l.Bind(),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[Number]),o.__metadata("design:returntype",Boolean)],c.prototype,"validateStatus",null),t.Api=c,t.default=c},224:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionType=void 0;const o=n(6),a=n(14),i=o.__importDefault(n(47));var r;!function(e){e[e.RESET=0]="RESET",e[e.UPDATE_ID=1]="UPDATE_ID",e[e.UPDATE_INBOX_ID=2]="UPDATE_INBOX_ID",e[e.UPDATE_NAME=3]="UPDATE_NAME",e[e.UPDATE_AVATAR=4]="UPDATE_AVATAR",e[e.UPDATE_EMAIL=5]="UPDATE_EMAIL",e[e.UPDATE_PHONE=6]="UPDATE_PHONE",e[e.FETCH_INBOX_DONE=7]="FETCH_INBOX_DONE",e[e.FETCH_INBOX=8]="FETCH_INBOX",e[e.FETCH_MESSAGE_DONE=9]="FETCH_MESSAGE_DONE",e[e.FETCH_MESSAGE=10]="FETCH_MESSAGE",e[e.FETCH_MESSAGE_IN_TOP=11]="FETCH_MESSAGE_IN_TOP",e[e.FETCH_MESSAGE_IN_BOTTOM=12]="FETCH_MESSAGE_IN_BOTTOM",e[e.LOAD_MESSAGE_FROM_DB_DONE=13]="LOAD_MESSAGE_FROM_DB_DONE",e[e.LOAD_MESSAGE_FROM_DB=14]="LOAD_MESSAGE_FROM_DB"}(r=t.ActionType||(t.ActionType={})),a.InjectEnum(r,i.default.ME)},225:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NotifyLevel=t.ChannelNotify=void 0;const o=n(14);var a,i;!function(e){e[e.AUTO=0]="AUTO",e[e.NOTIFICATION=1]="NOTIFICATION",e[e.TOAST=2]="TOAST"}(a=t.ChannelNotify||(t.ChannelNotify={})),o.InjectEnum(a,"ChannelNotify"),function(e){e[e.INFO=0]="INFO",e[e.SUCCESS=1]="SUCCESS",e[e.WARNING=2]="WARNING",e[e.ERROR=3]="ERROR"}(i=t.NotifyLevel||(t.NotifyLevel={})),o.InjectEnum(i,"NotifyLevel")},226:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Config=void 0,t.Config={id:"",params:{},version:"1"}},227:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Helper=void 0;const o=n(226);class a{static isPresent(e){return null!=e&&""!==String(e)}static now(){return Date.now()}static guid(){return o.Config.version+"-xxxxxxxx-".replace(/[x]/g,(function(e){const t=36*Math.random()|0;return("x"==e?t:3&t|8).toString(36)}))+this.now().toString(36)}static optionalData(e){return!1===a.isPresent(e)?"":"object"==typeof e?a.optionalData(JSON.stringify(e)):"function"==typeof e?a.optionalData(e()):String(e)}}t.Helper=a},228:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rootInit=void 0;const o=n(6),a=n(77),i=n(14),r=n(55),s=n(383),l=o.__importDefault(n(47)),d=n(225);t.rootInit={[l.default.BACKEND]:{api:null,bus:null,token:null},[l.default.AUDIO]:{worker:null,current:null,library:{}},[l.default.NOTIFICATION]:{worker:null,channel:d.ChannelNotify.AUTO,forceRequestNotification:!1},[l.default.SNACKBAR]:{pipe:null},[l.default.ANCHOR]:{global:null,root:null,launcher:null,dialog:null,chat:null,conversation:null,preview:null},[l.default.GLOBAL]:{show:!1,wid:-1,company:{id:-1,name:"Doopage"},font:[300,i.px(13),'"Open Sans"'].join(" "),color:[238,152,34],index:1e3,radius:10,defaultPosition:{top:null,left:null,right:20,bottom:20,height:700,width:380},position:null,transition:{ease:"easeInOut",duration:.3},guideConversation:!1,isTabActive:document.hidden,autoSendRequestInfoAfter:3e4,backgroundJobId:-1},[l.default.LAUNCHER]:{opened:!1,openedIcon:{icon:{icon:a.Icon.Close,size:12,color:[251,251,251]},size:20,backgroundColor:[218,218,218],scale:{hover:1.1,tap:.9}},closedIcon:{icon:{icon:a.Icon.Doopage,size:48,color:[250,250,250]},size:60,backgroundColor:[255,152,0],scale:{hover:1.1,tap:.9}}},[l.default.PREVIEW]:{height:137,width:340,padding:10,radius:20,backgroundColor:[255,255,255],message:null,closeIcon:a.Icon.Close,title:{color:[1,1,1],size:10},content:{color:[1,1,1],size:10,maxLength:65},button:{text:{size:17,color:[255,255,255],text:"Gửi tin nhắn"},size:17,backgroundColor:[255,0,0]}},[l.default.DIALOG]:{header:{height:60,backgroundColor:[156,{0:[238,162,54],55:[255,141,0],100:[255,102,0]}],padding:15,avatar:{size:40,border:{size:0,style:"solid",color:[255,255,255]},scale:{hover:1.1,tap:.9}},info:{name:{size:16,color:[255,255,255]},lastActive:{size:11,color:[255,255,255]}}},license:{size:12,color:[82,78,78],opacity:.7,text:`© ${(new Date).getFullYear()} Doopage, Inc. All rights reserved.`,url:"https://doopage.com/"},composer:{backgroundColor:[250,250,250],placeholder:"Nhập tin nhắn tại đây...",color:[78,78,78],emoji:{width:300},file:{height:60,show:!1}},chat:{padding:0,backgroundColor:[255,255,255],bottom:60,avatar:{size:40},sender:{[r.SenderType.System]:{align:"left",color:[0,0,0],backgroundColor:[246,246,246],showAvatar:!0,showStatus:!1},[r.SenderType.Seller]:{align:"left",color:[85,85,85],backgroundColor:[245,245,245],showAvatar:!0,showStatus:!1},[r.SenderType.Me]:{align:"right",color:[247,247,247],backgroundColor:[0,119,255],showAvatar:!1,showStatus:!0}},message:{[r.MessageAttachmentType.Text]:{margin:1,maxWidth:70,minHeight:40,padding:12,borderRadius:4,size:14,lineHeight:18},[r.MessageAttachmentType.RequestInfo]:{text:"Bạn có thể cung cấp thêm thông tin để chúng tôi hỗ trợ tốt hơn ?",textUpdate:"Hãy cung cấp thông tin chính xác nhất để chúng tôi có thể hỗ trợ bạn !",color:[255,255,255],backgroundColor:[72,112,223],margin:1,maxWidth:70,minHeight:40,padding:9,borderRadius:4,fontSize:12,lineHeight:16,border:2,borderColor:[255,152,0],fields:{name:"Họ và tên",phone:"Số điện thoại",email:"Email"}},[r.MessageAttachmentType.ResponseInfo]:{},[r.MessageAttachmentType.Image]:{margin:5,borderRadius:10,border:1,borderColor:[230,230,230],length:3,scale:1.5,height:70,width:70},[r.MessageAttachmentType.File]:{margin:5,borderRadius:10,border:1,borderColor:[230,230,230],length:3,scale:1.5,height:70,width:70}}}},[l.default.CONVERSATION]:{system:{name:"Doopage",avatar:a.Image.Doopage},isFetching:!1,autoScrollToBottom:!0,guideConversation:s.GuideConversationStep.STOP,socket:null},[l.default.SELLER]:{receiver:null,sellers:{}},[l.default.CHAT]:{conversation:{top:null,messages:{},bottom:null,lastResponseInfo:null}},[l.default.ME]:{id:-1,name:null,avatar:null,email:null,phone:null}}},229:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapHandler=t.updateWebsiteIdHandler=t.updateWebsiteId=t.updateHeaderHandler=t.updateHeader=t.attachBusHandler=t.attachBus=t.attachApiHandler=t.attachApi=void 0;const o=n(161),a=n(67);t.attachApi=e=>({type:o.ActionType.ATTACH_API,api:e}),t.attachApiHandler=({backend:e},{api:t})=>(e.api=t,t&&t.init(),e),t.attachBus=e=>({type:o.ActionType.ATTACH_BUS,bus:e}),t.attachBusHandler=({backend:e},{bus:t})=>(e.bus=t,e),t.updateHeader=(e,t)=>({type:o.ActionType.UPDATE_HEADER,key:e,value:t}),t.updateHeaderHandler=({backend:e},{key:t,value:n})=>{var o;return null===(o=e.api)||void 0===o||o.setHeader(t,n),e},t.updateWebsiteId=e=>({type:o.ActionType.UPDATE_WEBSITE_ID,id:e}),t.updateWebsiteIdHandler=function*({backend:e},{id:t}){const{api:n}=e;n||(yield a.take(o.ActionType.ATTACH_API))},t.mapHandler={[o.ActionType.ATTACH_API]:t.attachApiHandler,[o.ActionType.ATTACH_BUS]:t.attachBusHandler,[o.ActionType.UPDATE_HEADER]:t.updateHeaderHandler,[o.ActionType.UPDATE_WEBSITE_ID]:t.updateWebsiteIdHandler},t.default=t.mapHandler},230:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapHandler=t.showNotifyHandler=t.showNotify=t.attachPipeHandler=t.attachPipe=void 0;const o=n(702),a=n(67);t.attachPipe=e=>({type:o.ActionType.ATTACH_PIPE,pipe:e}),t.attachPipeHandler=({snackbar:e},{pipe:t})=>(e.pipe=t,e),t.showNotify=(e,t={})=>(t.anchorOrigin||(t.anchorOrigin={vertical:"bottom",horizontal:"right"}),{type:o.ActionType.SHOW_NOTIFY,text:e,options:t}),t.showNotifyHandler=function*({snackbar:e},{text:t,options:n}){const{pipe:o}=e;o&&(yield a.call(o.enqueueSnackbar,t,n))},t.mapHandler={[o.ActionType.ATTACH_PIPE]:t.attachPipeHandler,[o.ActionType.SHOW_NOTIFY]:t.showNotifyHandler},t.default=t.mapHandler},316:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Connected=t.DoopageComponent=void 0;const o=n(6),a=o.__importDefault(n(202)),i=o.__importDefault(n(639)),r=n(20),s=n(14),l=o.__importDefault(n(641)),d=n(72),c=n(229),u=n(86),p=o.__importDefault(n(699)),m=o.__importDefault(n(700)),f=o.__importDefault(n(701)),_=n(231),h=n(393),g=o.__importDefault(n(0)),y=n(17);class T extends r.Component{componentDidMount(){const{attachBus:e,attachApi:t,startJobSchedule:n,updateWebsiteId:o,fetchConfig:r,ssl:s,host:l,hostSocket:d,baseURL:c,api:u,socket:p,websiteId:m}=this.props;super.componentDidMount(),n(),e(new i.default),t(new a.default({ssl:s,host:l,hostSocket:d,baseURL:c,api:u||String(m),socket:p,websiteId:m})),o(m),r()}render(){const{show:e}=this.props;return g.default.createElement(h.SnackbarProvider,{maxSnack:10},g.default.createElement(_.ErrorBoundary,null,g.default.createElement(g.default.Fragment,null,g.default.createElement(p.default,null),g.default.createElement(m.default,null),g.default.createElement(f.default,null)),e&&g.default.createElement(l.default,null)))}}t.DoopageComponent=T,T.defaultProps={ssl:!0,host:"backend.doopage.dev",hostSocket:null,baseURL:"api/v2.0/live-chat",api:"",socket:"livechat"},t.Connected=y.connect(({audio:e,global:t})=>{const{library:n}=e,{show:o}=t;return{library:n,show:o}},e=>({init:s.redirect(e,d.attachGlobal),startJobSchedule:s.redirect(e,u.startJobSchedule),attachApi:s.redirect(e,c.attachApi),attachBus:s.redirect(e,c.attachBus),updateWebsiteId:s.redirect(e,c.updateWebsiteId),fetchConfig:s.redirect(e,u.fetchConfig)}),null,{forwardRef:!0})(T);{const e=new URL("https://dashboard.doopage.com");T.defaultProps.ssl=e.protocol.endsWith("s:"),T.defaultProps.host=e.host}{const e=new URL("wss://socket.doopage.com");T.defaultProps.hostSocket=e.host}t.default=t.Connected},381:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionType=void 0;const o=n(6),a=n(14),i=o.__importDefault(n(47));var r;!function(e){e[e.RESET=0]="RESET",e[e.PUSH_MESSAGE=1]="PUSH_MESSAGE",e[e.PUSH_MESSAGE_AND_NOTIFY=2]="PUSH_MESSAGE_AND_NOTIFY",e[e.NEW_MESSAGE=3]="NEW_MESSAGE",e[e.SYSTEM_SEND=4]="SYSTEM_SEND",e[e.SELLER_SEND=5]="SELLER_SEND",e[e.ME_SEND=6]="ME_SEND",e[e.SYSTEM_SEND_TEXT=7]="SYSTEM_SEND_TEXT",e[e.SYSTEM_SEND_IMAGE=8]="SYSTEM_SEND_IMAGE",e[e.SYSTEM_SEND_FILE=9]="SYSTEM_SEND_FILE",e[e.SYSTEM_SEND_REQUEST_INFO=10]="SYSTEM_SEND_REQUEST_INFO",e[e.SELLER_SEND_TEXT=11]="SELLER_SEND_TEXT",e[e.SELLER_SEND_IMAGE=12]="SELLER_SEND_IMAGE",e[e.SELLER_SEND_FILE=13]="SELLER_SEND_FILE",e[e.ME_SEND_TEXT=14]="ME_SEND_TEXT",e[e.ME_SEND_IMAGE=15]="ME_SEND_IMAGE",e[e.ME_SEND_FILE=16]="ME_SEND_FILE",e[e.ME_SEND_RESPONSE_INFO=17]="ME_SEND_RESPONSE_INFO",e[e.MARK_MESSAGE_PUSHED=18]="MARK_MESSAGE_PUSHED",e[e.MARK_MESSAGE_SENT=19]="MARK_MESSAGE_SENT",e[e.CHECK_LAST_MESSAGE_TIME=20]="CHECK_LAST_MESSAGE_TIME"}(r=t.ActionType||(t.ActionType={})),a.InjectEnum(r,i.default.CHAT)},382:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionType=void 0;const o=n(6),a=n(14),i=o.__importDefault(n(47));var r;!function(e){e[e.SCROLL_TO_MESSAGE=0]="SCROLL_TO_MESSAGE",e[e.START_FETCHING=1]="START_FETCHING",e[e.STOP_FETCHING=2]="STOP_FETCHING",e[e.SCROLL_TO_TOP=3]="SCROLL_TO_TOP",e[e.SCROLL_TO_BOTTOM=4]="SCROLL_TO_BOTTOM",e[e.ENABLE_AUTO_SCROLL_TO_BOTTOM=5]="ENABLE_AUTO_SCROLL_TO_BOTTOM",e[e.DISABLE_AUTO_SCROLL_TO_BOTTOM=6]="DISABLE_AUTO_SCROLL_TO_BOTTOM",e[e.START_GUIDE_CONVERSATION=7]="START_GUIDE_CONVERSATION",e[e.NEXT_GUIDE_CONVERSATION=8]="NEXT_GUIDE_CONVERSATION",e[e.STOP_GUIDE_CONVERSATION=9]="STOP_GUIDE_CONVERSATION",e[e.PING_SOCKET=10]="PING_SOCKET",e[e.PONG_SOCKET=11]="PONG_SOCKET",e[e.SETUP_SOCKET=12]="SETUP_SOCKET",e[e.SET_SOCKET=13]="SET_SOCKET",e[e.SOCKET_CONNECTED=14]="SOCKET_CONNECTED",e[e.SOCKET_DISCONNECTED=15]="SOCKET_DISCONNECTED",e[e.SOCKET_SEND=16]="SOCKET_SEND",e[e.SOCKET_REPLY=17]="SOCKET_REPLY",e[e.SOCKET_RECEIVE=18]="SOCKET_RECEIVE",e[e.CONNECT_SOCKET=19]="CONNECT_SOCKET",e[e.DISCONNECT_SOCKET=20]="DISCONNECT_SOCKET",e[e.RECONNECT_SOCKET=21]="RECONNECT_SOCKET",e[e.SEND_MESSAGE=22]="SEND_MESSAGE",e[e.UPDATE_SYSTEM_NAME=23]="UPDATE_SYSTEM_NAME",e[e.USE_DEFAULT_LOGO=24]="USE_DEFAULT_LOGO",e[e.USE_CUSTOM_LOGO=25]="USE_CUSTOM_LOGO"}(r=t.ActionType||(t.ActionType={})),a.InjectEnum(r,i.default.CONVERSATION)},383:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GuideConversationStep=void 0;const o=n(14);var a;!function(e){e[e.STOP=0]="STOP",e[e.WELCOME=1]="WELCOME",e[e.THANKS=2]="THANKS",e[e.QUEST=3]="QUEST",e[e.WAIT_QUEST=4]="WAIT_QUEST",e[e.INFO=5]="INFO",e[e.WAIT_INFO=6]="WAIT_INFO",e[e.BYE=7]="BYE"}(a=t.GuideConversationStep||(t.GuideConversationStep={})),o.InjectEnum(a,"GuideConversationStep")},384:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionType=void 0;const o=n(6),a=n(14),i=o.__importDefault(n(47));var r;!function(e){e[e.ADD_SELLER=0]="ADD_SELLER",e[e.FETCH_SELLERS_DONE=1]="FETCH_SELLERS_DONE",e[e.FETCH_SELLERS=2]="FETCH_SELLERS",e[e.SELLER_RECEPTION=3]="SELLER_RECEPTION",e[e.UPDATE_LAST_ACTIVE=4]="UPDATE_LAST_ACTIVE",e[e.REMOVE_AVATAR_SELLER=5]="REMOVE_AVATAR_SELLER"}(r=t.ActionType||(t.ActionType={})),a.InjectEnum(r,i.default.SELLER)},386:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Cookie=void 0;const o=n(227),a=n(387);t.Cookie=class{static prefix(){return"__opix_"}static set(e,t,n,a="/"){let i="";if(o.Helper.isPresent(n)){const e=new Date;e.setTime(e.getTime()+60*n*1e3),i=`expires=${e.toISOString()}; `}document.cookie=`${this.prefix()}${e}=${t}; ${i}path=${a}; SameSite=Lax`}static get(e){const t=`${this.prefix()}${e}=`,n=document.cookie.split(";");for(let e=0;e<n.length;e++){let o=n[e];for(;" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return null}static delete(e){this.set(e,"",-100)}static exists(e){return o.Helper.isPresent(this.get(e))}static setUtms(){const e=["utm_source","utm_medium","utm_term","utm_content","utm_campaign"];let t=!1;for(let n=0,i=e.length;n<i;n++)if(o.Helper.isPresent(a.Url.getParameterByName(e[n]))){t=!0;break}if(t){const t={};let n;for(let i=0,r=e.length;i<r;i++)n=a.Url.getParameterByName(e[i]),o.Helper.isPresent(n)&&(t[e[i]]=n);this.set("utm",JSON.stringify(t))}}static getUtm(e){if(this.exists("utm")){const t=JSON.parse(this.get("utm"));return e in t?t[e]:""}return null}}},387:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Url=void 0;t.Url=class{static getParameterByName(e,t){if(!t)return this.getParameterByName(e,window.location.href);const n=e.replace(/[[\]]/g,"\\$&"),o=new RegExp("[?&]"+n+"(=([^&#]*)|&|#|$)","i").exec(t);return o?o[2]?decodeURIComponent(o[2].replace(/\+/g," ")):"":null}static externalHost(e){return e.hostname!=location.hostname&&0===e.protocol.indexOf("http")}}},388:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.Pixel=t.QueueMethod=void 0;const o=n(668),a=n(226),i=n(386),r=n(227),s=n(724);!function(e){e.Init="init",e.Param="param",e.Event="event"}(t.QueueMethod||(t.QueueMethod={}));class l{constructor(e,t,n){this.params=[],this.event=e,this.timestamp=t,this.optional=r.Helper.optionalData(n),this.buildParams(),this.send()}static setup(e,t=!0){this.server=e,this.ssl=t}static init(e,t){if(!e){const e=i.Cookie.get("id");return e?this.init(e):(i.Cookie.set("id",s.v1()),this.init())}a.Config.id=e}static param(e,t){a.Config.params[e]=()=>t}static event(e,t){"pageload"!==e||a.Config.pageLoadOnce?"pageload"!==e&&"pageclose"!==e&&new l(e,r.Helper.now(),t):(a.Config.pageLoadOnce=!0,new l(e,l.t,t))}static getUid(){return i.Cookie.get("uid")}buildParams(){const e=this.getAttribute();for(const t in e)Object.hasOwnProperty.call(e,t)&&this.setParam(t,e[t](t))}getAttribute(){return{id:()=>a.Config.id,uid:()=>l.getUid(),ev:()=>this.event,ed:()=>this.optional,v:()=>a.Config.version,dl:()=>window.location.href,rl:()=>document.referrer,ts:()=>this.timestamp,de:()=>document.characterSet,sr:()=>window.screen.width+"x"+window.screen.height,vp:()=>window.innerWidth+"x"+window.innerHeight,cd:()=>window.screen.colorDepth,dt:()=>document.title,bn:()=>o.Browser.nameAndVersion(),md:()=>o.Browser.isMobile(),ua:()=>o.Browser.userAgent(),tz:()=>(new Date).getTimezoneOffset(),utm_source:e=>i.Cookie.getUtm(e),utm_medium:e=>i.Cookie.getUtm(e),utm_term:e=>i.Cookie.getUtm(e),utm_content:e=>i.Cookie.getUtm(e),utm_campaign:e=>i.Cookie.getUtm(e),...a.Config.params}}setParam(e,t){r.Helper.isPresent(t)?this.params.push(`${e}=${encodeURIComponent(t)}`):this.params.push(e+"=")}send(){"true"!==e.env.NODE_DISABLE_PIXEL&&("sendBeacon"in window.navigator?this.sendBeacon():this.sendImage())}sendBeacon(){window.navigator.sendBeacon(this.getSourceUrl())}sendImage(){this.img=document.createElement("img"),this.img.src=this.getSourceUrl(),this.img.style.display="none",this.img.width=1,this.img.height=1,document.getElementsByTagName("body")[0].appendChild(this.img)}getSourceUrl(){return`${l.ssl?"https":"http"}://${l.server}/_.gif?${this.params.join("&")}`}}t.Pixel=l,l.queue=[]}).call(this,n(148))},391:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Connected=t.IconComponent=void 0;const o=n(6),a=n(20),i=n(14),r=n(110),s=n(25),l=n(53),d=o.__importDefault(n(0)),c=n(17),u=o.__importDefault(n(24)),p=u.default(s.motion.div)(({_:e})=>({WebkitFontSmoothing:"antialiased",boxShadow:[0,i.px(-1),i.px(2),i.color([0,0,0,.3])].join(" "),borderRadius:"100%",transition:"background-color "+i.transition(e.transition),left:i.pxOrAuto(e.left),right:i.pxOrAuto(e.right),top:i.pxOrAuto(e.top),bottom:i.pxOrAuto(e.bottom),zIndex:e.index,backgroundColor:i.color(e.backgroundColor)})),m=u.default("div")(()=>({position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",height:"100%",width:"100%",cursor:"pointer",userSelect:"none"})),f=u.default("div")(({_:e})=>({lineHeight:.5,fontSize:i.px(e.sizeIcon),color:i.color(e.color),userSelect:"none"}));class _ extends a.Component{componentDidMount(){const{current:e}=this.anchor;e&&e.querySelectorAll("img").forEach(e=>{e.style.userSelect="none",e.draggable=!1})}executeOnClick(e){const{filterClick:t,onClick:n}=this.props;t(e)&&n()}render(){const{opened:e,backgroundColor:t,sizeOpened:n,sizeClosed:o,left:a,right:i,top:r,bottom:s,transition:l,index:c,sizeIcon:u,icon:_,color:h,scale:g}=this.props;return d.default.createElement(p,{transition:l,whileHover:{scale:g.hover+(e?.5:0)},whileTap:{scale:g.tap+(e?.5:0)},animate:e?"opened":"closed",onClick:this.executeOnClick,variants:{opened:{height:n,width:n},closed:{height:o,width:o}},_:{backgroundColor:t,left:a,right:i,top:r,bottom:s,transition:l,index:c},ref:this.anchor},d.default.createElement(m,null,d.default.createElement(f,{_:{sizeIcon:u,color:h},ref:this.anchor},_)))}}_.defaultProps={filterClick:()=>!0},o.__decorate([l.Bind(),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[Object]),o.__metadata("design:returntype",void 0)],_.prototype,"executeOnClick",null),t.IconComponent=_,t.Connected=c.connect(({global:e,launcher:t})=>{const{opened:n,openedIcon:o,closedIcon:a}=t,i=n?o:a,{size:r}=o,{size:s}=a,{icon:l,backgroundColor:d,scale:c}=i,{icon:u,size:p,color:m}=l,{transition:f,index:_,position:h,defaultPosition:g}=e,{top:y,left:T,right:E,bottom:S}=null!==h?h:g;return{opened:n,color:m,backgroundColor:d,sizeOpened:r,sizeClosed:s,left:T,right:E,top:y,bottom:S,transition:f,index:_+2,sizeIcon:p,icon:u,scale:c}},e=>({onClick:i.redirect(e,r.toggle)}),null,{forwardRef:!0})(_),t.default=t.Connected},392:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Connected=t.AvatarComponent=void 0;const o=n(6),a=n(77),i=n(20),r=n(14),s=n(108),l=n(87),d=n(25),c=n(31),u=n(53),p=o.__importDefault(n(0)),m=n(17),f=o.__importDefault(n(24)),_=f.default(d.motion.div)(({_:e})=>({borderRadius:"100%",borderStyle:"solid",position:"relative",cursor:"pointer",width:r.px(e.size),height:r.px(e.size),border:r.border(e.border),marginLeft:e.inList?r.px(-20):0,marginRight:r.px(e.margin),"&:after":e.dot?{position:"absolute",content:r.empty(),borderRadius:"100%",bottom:r.px(1),right:r.px(1),height:(e.border.size>0?4*e.border.size:8)+"px",width:(e.border.size>0?4*e.border.size:8)+"px",backgroundColor:r.color([76,175,80])}:{}})),h=f.default(d.motion.img)(()=>({borderRadius:"inherit"}));class g extends i.Component{reportAvatarError(){const{sid:e,removeAvatarSeller:t}=this.props;e&&t(e)}render(){const{name:e,transition:t,scale:n,border:o,avatar:a,margin:i,dot:r,size:s,inList:d}=this.props;return p.default.createElement(l.Tooltip,{title:e,interactive:!0,arrow:!0},p.default.createElement(_,{transition:t,_:{size:s,border:o,margin:i,dot:r,inList:d},ref:this.anchor},p.default.createElement(h,{whileHover:{scale:n.hover},whileTap:{scale:n.tap},transition:t,src:a,width:s,height:s,alt:"Avatar",onError:this.reportAvatarError})))}}g.defaultProps={sid:-1,dot:!1,inList:!1,margin:10},o.__decorate([u.Bind(),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[]),o.__metadata("design:returntype",void 0)],g.prototype,"reportAvatarError",null),t.AvatarComponent=g,t.Connected=m.connect(({global:e,seller:t,dialog:n,launcher:o},{sid:i})=>{var r,s,l;const{transition:d}=e,{sellers:u,receiver:p}=t,{header:m}=n,{avatar:f}=m,{scale:_,border:h,size:g}=f;let y;if(null!=i&&(y=u[i]),!y&&p&&(y=u[p]),!y){let e=null===(r=document.querySelector("link[rel=icon]"))||void 0===r?void 0:r.getAttribute("href");const{closedIcon:t}=o,{icon:n}=t,{icon:a}=n;a&&c.has(a,"props")&&a.props.alt&&(e=a.props.src),e&&(y={avatar:e})}return{border:h,size:g,transition:d,name:y&&null!==(s=y.name)&&void 0!==s?s:"",avatar:y&&null!==(l=y.avatar)&&void 0!==l?l:a.Image.AvatarDefault,scale:_}},e=>({removeAvatarSeller:r.redirect(e,s.removeAvatarSeller)}),null,{forwardRef:!0})(g),t.default=t.Connected},394:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Loader=void 0;const o=n(6),a=n(316),i=n(163),r=o.__importStar(n(231)),s=n(31);class l{constructor(e={}){const t={...a.DoopageComponent.defaultProps,...e};l.checkConfig(t),t.host&&(i.Pixel.setup(t.host,t.ssl),i.Pixel.init(),i.Pixel.event("pageload",t.userData)),l.instance||Object.defineProperty(l,"instance",{value:this,writable:!1}),this.config=t,this.plugins={}}static checkConfig(e){if(!e.websiteId)throw Error("The `websiteId` parameter is required !")}static init(e={}){return this.instance?this.instance:(r.init({dsn:"https://e6cd8a64957f47648e3f0d50550500d9@o431828.ingest.sentry.io/5465911",release:"@doopage/widget@1.0.11.50939",environment:"production"}),new this(e).init())}static register(e){this.pluginClass[e.namespace]=e,s.set(l,e.namespace,e)}init(){return this}register(e){this.plugins[e.constructor.namespace]=e}}t.Loader=l,l.pluginClass={}},395:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rootAction=void 0;const o=n(6),a=o.__importDefault(n(72)),i=o.__importDefault(n(162)),r=o.__importDefault(n(229)),s=o.__importDefault(n(94)),l=o.__importDefault(n(107)),d=o.__importDefault(n(109)),c=o.__importDefault(n(86)),u=o.__importDefault(n(47)),p=o.__importDefault(n(110)),m=o.__importDefault(n(133)),f=o.__importDefault(n(132)),_=o.__importDefault(n(396)),h=o.__importDefault(n(108)),g=o.__importDefault(n(230));t.rootAction={[u.default.BACKEND]:r.default,[u.default.AUDIO]:i.default,[u.default.NOTIFICATION]:f.default,[u.default.SNACKBAR]:g.default,[u.default.GLOBAL]:c.default,[u.default.CHAT]:s.default,[u.default.ME]:m.default,[u.default.LAUNCHER]:p.default,[u.default.CONVERSATION]:l.default,[u.default.PREVIEW]:_.default,[u.default.DIALOG]:d.default,[u.default.SELLER]:h.default,[u.default.ANCHOR]:a.default},t.default=t.rootAction},396:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapHandler=t.closeHandler=t.close=t.openHandler=t.open=void 0;const o=n(704);t.open=e=>({type:o.ActionType.OPEN,message:e}),t.openHandler=({preview:e},{message:t})=>(e.message=t,e),t.close=()=>({type:o.ActionType.CLOSE}),t.closeHandler=({preview:e})=>(e.message=null,e),t.mapHandler={[o.ActionType.OPEN]:t.openHandler,[o.ActionType.CLOSE]:t.closeHandler},t.default=t.mapHandler},426:function(e,t,n){n(427),e.exports=n(428)},428:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(429),a=n(394);n(163);const i=n(31);a.Loader.register(o.LiveChat),i.tap(window,e=>{e.doopageAsyncInit&&e.doopageAsyncInit(a.Loader)})},429:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LiveChat=void 0;const o=n(6),a=o.__importDefault(n(316)),i=n(394),r=o.__importDefault(n(703)),s=o.__importDefault(n(0)),l=o.__importDefault(n(16)),d=n(17);class c{constructor(e={}){if(!i.Loader.instance)throw Error("You must initialize Doopage first !");this.root=i.Loader.instance,this.config=e,this.root.register(this)}static async init(e={}){return i.Loader.instance||i.Loader.init(),await new c(e).init()}async init(){return await this.makeContent(),await this.render(),await this.inject(),this}makeContent(e=null){e||(e=document.createElement("main")).classList.add("doopage-livechat"),this.context=e,this.store=r.default.createStore(this.config.config,!1)}render(){this.context&&this.store&&(this.root.config.fanpageId||l.default.render(s.default.createElement(d.Provider,{store:this.store},s.default.createElement(a.default,Object.assign({},this.root.config))),this.context))}inject(){this.context&&document.body.appendChild(this.context)}}t.LiveChat=c,c.namespace="LiveChat"},47:function(e,t,n){"use strict";var o;Object.defineProperty(t,"__esModule",{value:!0}),t.GroupStore=void 0,function(e){e.BACKEND="backend",e.CHAT="chat",e.ME="me",e.AUDIO="audio",e.NOTIFICATION="notification",e.SNACKBAR="snackbar",e.ANCHOR="anchor",e.GLOBAL="global",e.LAUNCHER="launcher",e.CONVERSATION="conversation",e.PREVIEW="preview",e.DIALOG="dialog",e.SELLER="seller"}(o=t.GroupStore||(t.GroupStore={})),t.default=o},55:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MessageAttachmentType=t.SenderType=void 0,function(e){e.System="system",e.Me="user",e.Seller="seller"}(t.SenderType||(t.SenderType={})),function(e){e.Text="text",e.Image="image",e.Audio="audio",e.Video="video",e.File="file",e.Template="template",e.RequestInfo="request_info",e.ResponseInfo="response_info"}(t.MessageAttachmentType||(t.MessageAttachmentType={}))},56:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncGeneratorFunction=t.GeneratorFunction=t.AsyncFunction=t.NormalFunction=void 0,t.NormalFunction=(()=>{}).constructor,t.AsyncFunction=(async()=>{}).constructor,t.GeneratorFunction=function*(){yield}.constructor,t.AsyncGeneratorFunction=async function*(){yield}.constructor},639:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Bus=void 0;const o=n(31);class a{constructor(){this.stack={},this.events={}}*add(e,t){for(const[n,a]of o.toPairs(t))for(const t of a)yield*this.addListener(e,n,t)}*on(e,t){for(const n of t)yield*this.addWaiter(e,n)}*addListener(e,t,n){this.stack[e]||(this.stack[e]={}),this.stack[e][t]||(this.stack[e][t]=[]),this.stack[e][t].push(n)}*addWaiter(e,t){this.events[e]||(this.events[e]=[]),this.events[e].push(t)}*emit(e,t,...n){if(e){if(this.stack[e]&&this.stack[e][t])for(const o of this.stack[e][t])yield*o(...n)}else if(this.events[t])for(const e of this.events[t])yield*e(...n)}*remove(e){delete this.stack[e]}}t.Bus=a,t.default=a},641:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Connected=t.RootComponent=void 0;const o=n(6),a=n(20),i=o.__importDefault(n(642)),r=n(14),s=o.__importDefault(n(694)),l=n(72),d=n(86),c=n(25),u=o.__importDefault(n(0)),p=n(17),m=o.__importDefault(n(24)).default(c.motion.div)(({_:e})=>({position:"fixed",overflow:"hidden",font:e.font,zIndex:e.index}));class f extends a.Component{componentDidMount(){const{computePosition:e}=this.props;super.componentDidMount(),e(),this.registerResizeHandler(),this.registerVisibilityChangeHandler()}registerResizeHandler(){const{computePosition:e}=this.props;window.addEventListener("resize",e)}registerVisibilityChangeHandler(){const{updateIsTabActive:e}=this.props;window.addEventListener("visibilitychange",e)}render(){const{font:e,index:t,transition:n}=this.props;return u.default.createElement(m,{transition:n,_:{font:e,index:t},ref:this.anchor},u.default.createElement(i.default,null),u.default.createElement(s.default,null))}}t.RootComponent=f,t.Connected=p.connect(({global:e})=>{const{transition:t,font:n,index:o}=e;return{font:n,index:o,transition:t}},e=>({init:r.redirect(e,l.attachRoot),computePosition:r.redirect(e,d.computePosition),updateIsTabActive:r.redirect(e,d.updateIsTabActive)}),null,{forwardRef:!0})(f),t.default=t.Connected},642:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Connected=t.DialogComponent=void 0;const o=n(6),a=n(20),i=o.__importDefault(n(643)),r=o.__importDefault(n(678)),s=o.__importDefault(n(688)),l=n(14),d=n(72),c=n(107),u=n(133),p=n(108),m=n(25),f=n(31),_=o.__importDefault(n(0)),h=n(17),g=o.__importDefault(n(24)).default(m.motion.div)(({_:e})=>({position:"fixed",userSelect:"none",display:"flex",flexDirection:"column",boxShadow:[0,0,l.px(50),l.color([0,0,0,.3])].join(" "),opacity:0,width:l.px(e.width),height:l.px(e.height),left:l.pxOrAuto(e.left),right:l.pxOrAuto(e.right),top:l.pxOrAuto(e.top),bottom:l.pxOrAuto(e.bottom),borderTopLeftRadius:l.px(e.radius),borderTopRightRadius:l.px(e.radius),borderBottomLeftRadius:l.px(e.radius),borderBottomRightRadius:l.px(e.radius),backgroundColor:l.color([255,255,255]),zIndex:e.index}));class y extends a.Component{componentDidMount(){super.componentDidMount()}componentDidUpdate(e){const{opened:t}=e,{haveSeller:n,opened:o,fetchSeller:a,connectSocket:i,loadMessageFromDb:r,startGuideConversation:s,guideConversation:l}=this.props;o!==t&&o&&!n&&(a(),r(),i(),l&&s())}render(){const{transition:e,left:t,right:n,top:o,bottom:a,radius:l,opened:d,width:c,height:u,index:p,size:m}=this.props;return _.default.createElement(g,{transition:e,animate:d?"opened":"closed",variants:{opened:{x:0,y:0,opacity:1,transition:{y:{stiffness:1e3,velocity:-100}}},closed:{x:c+(null!=n?n:0)+20,y:0,opacity:0,transition:{y:{stiffness:1e3}}}},_:{left:t,right:n,top:o,bottom:2*(null!=a?a:0)+m,radius:l,width:c,height:u,index:p},ref:this.anchor},_.default.createElement(s.default,null),_.default.createElement(i.default,null),_.default.createElement(r.default,null))}}t.DialogComponent=y,t.Connected=h.connect(({global:e,launcher:t,seller:n})=>{const{opened:o}=t,{transition:a,index:i,radius:r,position:s,defaultPosition:l,guideConversation:d}=e,{openedIcon:c}=t,{size:u}=c,{top:p,left:m,right:_,bottom:h,height:g,width:y}=null!==s?s:l,{sellers:T}=n;return{left:m,right:_,top:p,bottom:h,radius:r,opened:o,width:y,height:g,index:i,size:u,transition:a,haveSeller:f.keys(T).length>0,guideConversation:d}},e=>({init:l.redirect(e,d.attachDialog),fetchSeller:l.redirect(e,p.fetchSeller),fetchMessageInTop:l.redirect(e,u.fetchMessageInTop),loadMessageFromDb:l.redirect(e,u.loadMessageFromDb),connectSocket:l.redirect(e,c.connectSocket),startGuideConversation:l.redirect(e,c.startGuideConversation)}),null,{forwardRef:!0})(y),t.default=t.Connected},643:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Connected=t.ChatComponent=void 0;const o=n(6),a=n(20),i=o.__importDefault(n(644)),r=n(14),s=n(72),l=n(133),d=n(25),c=o.__importDefault(n(0)),u=n(17),p=o.__importDefault(n(24)).default(d.motion.div)(({_:e})=>({height:"100%",overflow:"overlay",paddingLeft:r.px(e.padding),paddingRight:r.px(e.padding),backgroundColor:r.color(e.backgroundColor),"-webkit-mask-image":`-webkit-gradient(linear, left ${e.overlayMark}%, left top, from(rgba(0,0,0,1)), to(rgba(0,0,0,0)))`,"&::-webkit-scrollbar-thumb":{backgroundImage:`linear-gradient(${r.deg(55)}, ${r.color([7,98,140])}, ${r.color([157,153,171])})`},"&::-webkit-scrollbar":{width:r.px(1)}}));class m extends a.Component{get isHaveScrollBar(){return!!this.anchor.current&&this.anchor.current.scrollHeight-this.anchor.current.offsetHeight>0}get isInTop(){return!!this.anchor.current&&this.anchor.current.scrollTop<20}render(){const{transition:e,padding:t,backgroundColor:n}=this.props,o=this.isHaveScrollBar&&!this.isInTop?10:1;return c.default.createElement(p,{transition:e,_:{backgroundColor:n,padding:t,overlayMark:o},ref:this.anchor},c.default.createElement(i.default,null))}}t.ChatComponent=m,t.Connected=u.connect(({global:e,dialog:t,conversation:n})=>{const{transition:o}=e,{chat:a}=t,{backgroundColor:i,padding:r}=a,{isFetching:s}=n;return{backgroundColor:i,padding:r,transition:o,isFetching:s}},e=>({init:r.redirect(e,s.attachChat),fetchMessageInTop:r.redirect(e,l.fetchMessageInTop),fetchMessageInBottom:r.redirect(e,l.fetchMessageInBottom)}),null,{forwardRef:!0})(m),t.default=t.Connected},644:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Connected=t.ConversationComponent=void 0;const o=n(6),a=n(20),i=o.__importDefault(n(645)),r=n(14),s=n(72),l=n(25),d=n(31),c=o.__importDefault(n(0)),u=n(17),p=o.__importDefault(n(24)),m=p.default(l.motion.div)(()=>({width:"100%",height:"100%",borderRadius:"inherit"})),f=p.default(l.motion.div)(({_:e})=>({paddingBottom:r.px(e.height)}));class _ extends a.Component{constructor(e){super(e),this.messages={}}getMessageTopInView(){var e;const t=d.keys(this.messages);t.sort();for(const n of t)if(null===(e=this.messages[n])||void 0===e?void 0:e.isInView)return this.messages[n];return null}getMessageBottomInView(){var e;const t=d.keys(this.messages);t.sort();for(const n of t)if(null===(e=this.messages[n])||void 0===e?void 0:e.isInView)return this.messages[n];return null}getMessage(e){return d.get(this.messages,e)}attachMessage(e){e&&(d.has(this.messages,e.props.mid)||d.set(this.messages,e.props.mid,e))}scrollTo(e,t=!0){if(d.has(this.messages,e)){const n=this.messages[e];n&&n.force(t)}}render(){const{transition:e,messages:t,spaceHeight:n}=this.props;return c.default.createElement(m,{transition:e,ref:this.anchor},t.map(e=>c.default.createElement(i.default,{mid:e,key:e})),n>0&&c.default.createElement(f,{_:{height:n}}))}}t.ConversationComponent=_,t.Connected=u.connect(({global:e,chat:t,dialog:n})=>{const{transition:o}=e,{composer:a}=n,{file:i}=a,{show:r,height:s}=i,{conversation:l}=t,{messages:c}=l,u=(r?s:0)+15;return{transition:o,messages:d.tap(d.keys(c),e=>e.sort()),spaceHeight:u}},e=>({init:r.redirect(e,s.attachConversation)}),null,{forwardRef:!0})(_),t.default=t.Connected},645:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Connected=t.ItemComponent=void 0;const o=n(6),a=n(20),i=o.__importDefault(n(646)),r=n(14),s=n(72),l=n(25),d=o.__importDefault(n(0)),c=n(17),u=o.__importDefault(n(24)).default(l.motion.div)(({_:e})=>({":last-child":{marginBottom:r.px(e.bottom)}}));class p extends a.Component{get isInView(){let e=this.anchor.current;for(let t=0;e&&t<3&&(t>0&&(e=e.parentElement),!(null==e?void 0:e.scrollTop));t++);return!(!this.anchor.current||!e)&&(this.anchor.current.offsetTop>e.scrollTop&&this.anchor.current.offsetTop<e.scrollTop+e.offsetHeight)}force(e=!1){var t;null===(t=this.anchor.current)||void 0===t||t.scrollIntoView({behavior:e?"smooth":"auto",block:"start",inline:"start"})}render(){const{transition:e,bottom:t,mid:n}=this.props;return d.default.createElement(u,{transition:e,_:{bottom:t},ref:this.anchor},d.default.createElement(i.default,{mid:n}))}}t.ItemComponent=p,t.Connected=c.connect(({global:e,dialog:t,chat:n},{mid:o})=>{const{transition:a}=e,{chat:i}=t,{bottom:r}=i,{conversation:s}=n,{bottom:l}=s;return{transition:a,bottom:parseInt(o)===(null==l?void 0:l.createdTime.getTime())?r:0}},e=>({init:r.redirect(e,s.attachMessage)}),null,{forwardRef:!0})(p),t.default=t.Connected},646:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Connected=t.MessageComponent=void 0;const o=n(6),a=n(20),i=o.__importDefault(n(647)),r=o.__importDefault(n(654)),s=o.__importDefault(n(655)),l=o.__importDefault(n(673)),d=o.__importDefault(n(674)),c=o.__importDefault(n(675)),u=o.__importDefault(n(676)),p=n(14),m=n(55),f=n(25),_=n(31),h=o.__importDefault(n(0)),g=n(17),y=o.__importStar(n(24)),T=y.keyframes({"0%":{opacity:0,transform:`translateY(${p.px(16)})`},"100%":{opacity:1,transform:`translateY(${p.px(16)})`}}),E=y.default(f.motion.div)(({_:e})=>({position:"relative",paddingTop:p.px(16),paddingLeft:"left"===e.align?p.px(e.showStatus?21:11):0,paddingRight:"right"===e.align?p.px(e.showStatus?21:11):0,opacity:0,transition:["all",p.second(.15),"ease-in-out"].join(" "),"&:after":{content:"''",display:"block",clear:"both"}}),y.css`animation: ${T} .5s forwards`),S=y.default(f.motion.div)(()=>({display:"flex",flexDirection:"column",alignItems:"flex-end","&>div + div":{marginTop:p.px(3)}}));class A extends a.Component{renderMessage(){const{type:e,mid:t,haveText:n}=this.props;switch(e){case m.MessageAttachmentType.Text:return h.default.createElement(d.default,{mid:t});case m.MessageAttachmentType.RequestInfo:return h.default.createElement(s.default,{mid:t});case m.MessageAttachmentType.ResponseInfo:return h.default.createElement(l.default,{mid:t});case m.MessageAttachmentType.Image:return n?h.default.createElement(S,null,h.default.createElement(r.default,{mid:t}),h.default.createElement(d.default,{mid:t})):h.default.createElement(r.default,{mid:t});case m.MessageAttachmentType.File:return n?h.default.createElement(S,null,h.default.createElement(i.default,{mid:t}),h.default.createElement(d.default,{mid:t})):h.default.createElement(i.default,{mid:t})}return null}render(){const{transition:e,sid:t,isSystem:n,isMe:o,showAvatar:a,align:i,showStatus:r,mid:s}=this.props;return h.default.createElement(E,{transition:e,_:{align:i,showStatus:r},ref:this.anchor},a&&h.default.createElement(c.default,{sid:void 0,isSystem:n,isMe:o}),this.renderMessage(),r&&h.default.createElement(u.default,{mid:s}))}}t.MessageComponent=A,t.Connected=g.connect(({global:e,chat:t,dialog:n},{mid:o})=>{const{transition:a}=e,{chat:i}=n,{sender:r}=i,{conversation:s}=t,{messages:l}=s,d=l[o],{sender:c,message:u}=d,{type:p}=c,{attachment:f}=u,{type:h}=f||{type:m.MessageAttachmentType.Text},g=p===m.SenderType.System,y=p===m.SenderType.Me,T=g?m.SenderType.System:y?m.SenderType.Me:m.SenderType.Seller,E=T===m.SenderType.Seller?c.id:-1,{align:S,showAvatar:A,showStatus:C}=r[T];return{sid:E,isSystem:g,isMe:y,transition:a,type:h,showAvatar:A,showStatus:C,align:S,haveText:_.has(u,"text")&&!!_.get(u,"text")}},null,null,{forwardRef:!0})(A),t.default=t.Connected},647:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Connected=t.FileComponent=void 0;const o=n(6),a=n(20),i=n(14),r=n(55),s=o.__importDefault(n(130)),l=n(25),d=n(31),c=n(53),u=o.__importDefault(n(0)),p=n(379),m=n(17),f=o.__importDefault(n(24)),_=f.default(l.motion.div)(({_:e})=>({position:"relative",boxShadow:[0,i.px(10),i.px(10),i.px(-8),i.color([0,0,0,.08])].join(" "),boxSizing:"border-box",overflow:"hidden",FileOverflow:"ellipsis",userSelect:"text",border:i.px(e.border),borderRadius:i.px(e.borderRadius),borderColor:i.color(e.borderColor),margin:`0 ${"right"===e.align?i.px(e.margin):0} 0 ${"left"===e.align?i.px(e.margin):0}`,float:e.align})),h=f.default(l.motion.div)(()=>({display:"flex",flexDirection:"row","&:first-child":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},"&:last-child":{borderBottomLeftRadius:"inherit",borderBottomRightRadius:"inherit"},["+ "+h]:{marginTop:i.px(2)}})),g=f.default(l.motion.div)(({_:e})=>({backgroundPosition:[i.percent(50),[i.percent(50)]].join(" "),backgroundRepeat:"no-repeat",transform:i.rotate(0),backgroundSize:"cover",cursor:e.ext?"pointer":"auto",height:i.px(e.height*e.scale),width:i.px(e.width*e.scale),transition:["transform",i.millisecond(300)].join(" "),border:[i.px(e.ext?1:0),i.color([230,230,230]),"solid"].join(" "),display:"flex",alignItems:"center",justifyContent:"center",".MuiSvgIcon-root":{fontSize:"inherit"},"&:hover":{transform:i.scale(e.scale>1?1.2:1)},"&:first-child":{borderTopLeftRadius:"inherit",borderBottomLeftRadius:"inherit"},"&:last-child":{borderTopRightRadius:"inherit",borderBottomRightRadius:"inherit"},["+ "+g]:{marginLeft:i.px(2)}}));class y extends a.Component{openFile(e,t){t.preventDefault(),window.open(e.url,"_blank")}renderLineFiles(e){const{height:t,width:n,scale:o,files:a,length:i}=this.props,r=[];for(const[i,l]of d.toPairs(e)){const e=l.name.split(".").pop()||"",c=d.get(p.defaultStyles,e);r.push(u.default.createElement(s.default,{key:i,title:l.name,interactive:!0,arrow:!0},u.default.createElement(g,{onClick:this.openFile.bind(null,l),_:{scale:1===a.length?o:1,height:t,width:n,ext:e}},u.default.createElement(p.FileIcon,Object.assign({},c,{extension:e,size:(t+n)/2*(a.length>1?.8:1)})))))}if(i>1&&a.length>1&&e.length<i)for(const o of d.range(0,i-e.length))r.push(u.default.createElement(g,{key:e.length+o,_:{scale:1,height:t,width:n,ext:""}}));return r}renderFiles(){const{files:e,length:t}=this.props,n=[];for(const o of d.range(0,Math.ceil(e.length/t)))n.push(u.default.createElement(h,{key:o},this.renderLineFiles(e.slice(t*o,t*(o+1)))));return n}render(){const{transition:e,align:t,border:n,margin:o,borderRadius:a,borderColor:i}=this.props;return u.default.createElement(_,{transition:e,_:{align:t,margin:o,border:n,borderRadius:a,borderColor:i},ref:this.anchor},this.renderFiles())}}o.__decorate([c.Bind(),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[Object,Object]),o.__metadata("design:returntype",void 0)],y.prototype,"openFile",null),t.FileComponent=y,t.Connected=m.connect(({global:e,dialog:t,chat:n},{mid:o})=>{const{transition:a}=e,{chat:i}=t,{sender:s,message:l}=i,{conversation:d}=n,{messages:c}=d,u=c[o],{sender:p,message:m}=u,{type:f}=p,_=s[f],h=l[r.MessageAttachmentType.File],{align:g}=_,{height:y,width:T,margin:E,scale:S,length:A,border:C,borderRadius:v,borderColor:b}=h,{attachment:O}=m,{payload:D}=O,{url:I,name:H}=D;return{files:[{url:I,name:H}],align:g,margin:E,length:A,border:C,borderRadius:v,borderColor:b,scale:S,height:y,width:T,transition:a}},null,null,{forwardRef:!0})(y),t.default=t.Connected},654:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Connected=t.ImageComponent=void 0;const o=n(6),a=n(20),i=n(14),r=n(55),s=n(25),l=n(31),d=n(53),c=o.__importDefault(n(0)),u=n(17),p=o.__importDefault(n(24)),m=p.default(s.motion.div)(({_:e})=>({position:"relative",boxShadow:[0,i.px(10),i.px(10),i.px(-8),i.color([0,0,0,.08])].join(" "),boxSizing:"border-box",overflow:"hidden",ImageOverflow:"ellipsis",userSelect:"text",border:i.px(e.border),borderRadius:i.px(e.borderRadius),borderColor:i.color(e.borderColor),margin:`0 ${"right"===e.align?i.px(e.margin):0} 0 ${"left"===e.align?i.px(e.margin):0}`,float:e.align})),f=p.default(s.motion.div)(()=>({display:"flex",flexDirection:"row","&:first-child":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},"&:last-child":{borderBottomLeftRadius:"inherit",borderBottomRightRadius:"inherit"},["+ "+f]:{marginTop:i.px(2)}})),_=p.default(s.motion.div)(({_:e})=>({backgroundPosition:[i.percent(50),[i.percent(50)]].join(" "),backgroundRepeat:"no-repeat",transform:i.rotate(0),backgroundSize:"cover",cursor:e.image?"pointer":"auto",height:i.px(e.height*e.scale),width:i.px(e.width*e.scale),backgroundImage:i.url(e.image),border:[i.px(e.image?1:0),i.color([230,230,230]),"solid"].join(" "),transition:["transform",i.millisecond(300)].join(" "),"&:hover":{transform:i.scale(e.scale>1?1.2:1)},"&:first-child":{borderTopLeftRadius:"inherit",borderBottomLeftRadius:"inherit"},"&:last-child":{borderTopRightRadius:"inherit",borderBottomRightRadius:"inherit"},["+ "+_]:{marginLeft:i.px(2)}}));class h extends a.Component{openImage(e,t){t.preventDefault(),window.open(e.url,"_blank")}renderLineImages(e){const{height:t,width:n,scale:o,images:a,length:i}=this.props,r=[];for(const[i,s]of l.toPairs(e))r.push(c.default.createElement(_,{key:i,onClick:this.openImage.bind(null,s),_:{scale:1===a.length?o:1,height:t,width:n,image:s.url}}));if(i>1&&a.length>1&&e.length<i)for(const o of l.range(0,i-e.length))r.push(c.default.createElement(_,{key:e.length+o,_:{scale:1,height:t,width:n,image:""}}));return r}renderImages(){const{images:e,length:t}=this.props,n=[];for(const o of l.range(0,Math.ceil(e.length/t)))n.push(c.default.createElement(f,{key:o},this.renderLineImages(e.slice(t*o,t*(o+1)))));return n}render(){const{transition:e,align:t,border:n,margin:o,borderRadius:a,borderColor:i}=this.props;return c.default.createElement(m,{transition:e,_:{align:t,margin:o,border:n,borderRadius:a,borderColor:i},ref:this.anchor},this.renderImages())}}o.__decorate([d.Bind(),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[Object,Object]),o.__metadata("design:returntype",void 0)],h.prototype,"openImage",null),t.ImageComponent=h,t.Connected=u.connect(({global:e,dialog:t,chat:n},{mid:o})=>{const{transition:a}=e,{chat:i}=t,{sender:s,message:l}=i,{conversation:d}=n,{messages:c}=d,u=c[o],{sender:p,message:m}=u,{type:f}=p,_=s[f],h=l[r.MessageAttachmentType.Image],{align:g}=_,{height:y,width:T,margin:E,scale:S,length:A,border:C,borderRadius:v,borderColor:b}=h,{attachment:O}=m,{payload:D}=O,{url:I}=D;return{images:[{url:I,name:"image.jpg"}],align:g,margin:E,length:A,border:C,borderRadius:v,borderColor:b,scale:S,height:y,width:T,transition:a}},null,null,{forwardRef:!0})(h),t.default=t.Connected},655:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Connected=t.RequestInfoComponent=void 0;const o=n(6),a=n(77),i=n(20),r=n(14),s=n(94),l=n(55),d=n(87),c=o.__importDefault(n(134)),u=n(25),p=n(31),m=n(53),f=o.__importDefault(n(0)),_=n(17),h=o.__importDefault(n(24)),g=h.default(u.motion.div)(({_:e})=>({position:"relative",boxShadow:[0,r.px(10),r.px(10),r.px(-8),r.color([0,0,0,.08])].join(" "),boxSizing:"border-box",overflow:"hidden",textOverflow:"ellipsis",maxWidth:r.percent(e.maxWidth),minHeight:r.px(e.minHeight),paddingTop:r.px(e.padding+e.border),paddingLeft:r.px(e.padding),paddingRight:r.px(e.padding),paddingBottom:r.px(e.padding),borderRadius:r.px(e.borderRadius),fontSize:r.px(e.fontSize),lineHeight:r.px(e.lineHeight),textAlign:e.align,margin:[0,"right"===e.align?r.px(e.margin):0,0,"left"===e.align?r.px(e.margin):0].join(" "),color:r.color(e.color),backgroundColor:r.color(e.backgroundColor),float:e.align,":before":{content:r.empty(),position:"absolute",width:"100%",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit",top:0,left:0,height:r.px(e.border),backgroundColor:r.color(e.borderColor)}})),y=h.default(u.motion.div)(({_:e})=>({textAlign:"center",marginTop:e?r.pxOrAuto(e.top):"auto",marginLeft:e?r.pxOrAuto(e.left):"auto",marginRight:e?r.pxOrAuto(e.right):"auto",marginBottom:e?r.pxOrAuto(e.bottom):"auto"})),T=h.default(u.motion.div)(()=>({marginBottom:r.px(14)})),E=h.default(c.default)(()=>({"&.MuiButtonBase-root":{fontSize:r.px(13)}})),S=h.default(d.TextField)(()=>({outline:"none","&.MuiTextField-root":{".MuiInputBase-root":{color:r.color([0,0,0,.5]),border:[r.px(1),r.color([238,238,238]),"solid"].join(" "),fontSize:r.px(16)},".MuiOutlinedInput-notchedOutline":{border:0},"+ .MuiTextField-root":{marginTop:r.important(r.px(10))}}})),A=h.default(c.default)(({_:e})=>({color:r.color(e.color),"&.MuiButtonBase-root":{fontSize:r.px(13)}}));class C extends i.Component{constructor(e){super(e),this.state={data:p.tap(p.clone(this.props.me),e=>{for(const t of p.keys(this.props.fields))p.get(e,t)||p.set(e,t,"")})}}onUpdateData(e){const{data:t}=this.state,{name:n,value:o}=e.target;p.set(t,n,o),this.setState({data:t})}onSubmit(e){const{onReply:t}=this.props,{data:n}=this.state;e.preventDefault(),t(n)}onUpdate(e){const{onRepeat:t}=this.props;e.preventDefault(),t()}renderInput(e,t){const{data:n}=this.state;return f.default.createElement(S,{key:e,placeholder:t,name:e,value:p.get(n,e,""),onChange:this.onUpdateData,size:"small",variant:"outlined",fullWidth:!0})}renderForm(){const{fields:e}=this.props,t=[];for(const[n,o]of p.toPairs(e))o&&t.push(this.renderInput(n,o));return t}render(){const{text:e,textUpdate:t,transition:n,align:o,color:i,backgroundColor:r,margin:s,maxWidth:l,minHeight:d,padding:c,borderRadius:u,fontSize:p,lineHeight:m,border:_,borderColor:h,isClosed:S,isUpdating:C}=this.props;return f.default.createElement(g,{transition:n,_:{align:o,color:i,backgroundColor:r,margin:s,maxWidth:l,minHeight:d,padding:c,borderRadius:u,fontSize:p,lineHeight:m,border:_,borderColor:h},ref:this.anchor},S?f.default.createElement(f.default.Fragment,null,f.default.createElement(T,null,"📘 Bạn đã hoàn thành thông tin."),f.default.createElement(y,null,f.default.createElement(E,{onClick:this.onUpdate,variant:"outlined",color:"primary",size:"small",startIcon:a.Icon.Edit},"Cập Nhật"))):f.default.createElement(f.default.Fragment,null,f.default.createElement(T,{transition:n},C?t:e),this.renderForm(),f.default.createElement(y,{_:{top:10}},f.default.createElement(A,{onClick:this.onSubmit,variant:"outlined",color:"primary",size:"small",startIcon:a.Icon.Send,_:{color:[255,151,0]}},C?"Cập nhật thông tin":"Gửi thông tin"))))}}o.__decorate([m.Bind(),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[Object]),o.__metadata("design:returntype",void 0)],C.prototype,"onUpdateData",null),o.__decorate([m.Bind(),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[Object]),o.__metadata("design:returntype",void 0)],C.prototype,"onSubmit",null),o.__decorate([m.Bind(),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[Object]),o.__metadata("design:returntype",void 0)],C.prototype,"onUpdate",null),t.RequestInfoComponent=C,t.Connected=_.connect(({global:e,dialog:t,chat:n,me:o},{mid:a})=>{const{transition:i}=e,{chat:r}=t,{sender:s,message:d}=r,{conversation:c}=n,{messages:u,lastResponseInfo:p}=c,m=u[a],{sender:f,createdTime:_}=m,{type:h}=f,g=s[h],y=d[l.MessageAttachmentType.RequestInfo],{align:T,color:E,backgroundColor:S}=g,A=!!o.name||!!o.phone||!!o.email,{text:C,textUpdate:v,margin:b,maxWidth:O,minHeight:D,padding:I,borderRadius:H,lineHeight:x,fontSize:M,fields:w,border:R,borderColor:N}=y;return{text:C,textUpdate:v,align:T,color:E,backgroundColor:S,margin:b,maxWidth:O,minHeight:D,padding:I,borderRadius:H,lineHeight:x,transition:i,fontSize:M,fields:w,border:R,borderColor:N,isClosed:!!p&&_.getTime()<p.createdTime.getTime(),isUpdating:A,me:o}},e=>({onReply:r.redirect(e,s.meSendResponseInfo),onRepeat:r.redirect(e,s.systemSendRequestInfo)}),null,{forwardRef:!0})(C),t.default=t.Connected},656:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(6),a=n(87),i=o.__importDefault(n(0));t.default=e=>i.default.createElement(a.SvgIcon,Object.assign({},e),i.default.createElement("path",{d:"M24.03,14.68c-0.09,0.04-0.1,0.14-0.13,0.21c-0.11,0.26-0.29,0.44-0.52,0.59c-0.24,0.15-0.49,0.23-0.77,0.23\n                        c-0.08,0-0.16,0-0.25,0c-0.05,0.1-0.1,0.21-0.15,0.33c-0.1,0.25-0.35,0.84-0.5,1.04c-0.08,0.1-0.13,0.23-0.19,0.34\n                        c-0.16,0.3-0.36,0.57-0.55,0.85c-0.14,0.21-0.29,0.43-0.49,0.6c-0.09,0.08-0.16,0.18-0.23,0.28c-0.07,0.09-0.15,0.17-0.22,0.26\n                        c-0.12,0.14-0.24,0.31-0.42,0.39c-0.04,0.02-0.07,0.06-0.1,0.1c-0.45,0.43-0.93,0.8-1.45,1.13c-0.44,0.29-0.89,0.55-1.37,0.78\n                        c-0.31,0.15-0.64,0.27-0.97,0.38c-0.25,0.08-0.51,0.16-0.77,0.24c-0.1,0.03-0.21,0.07-0.33,0.1c-0.11,0.28-0.3,0.5-0.63,0.64\n                        c-1.15,0-2.32,0-3.5,0c-0.1,0-0.2,0-0.3,0c-0.16,0.01-0.29-0.06-0.4-0.16c-0.15-0.14-0.3-0.29-0.34-0.52\n                        c-0.04-0.22-0.06-0.44,0.03-0.63c0.12-0.28,0.42-0.54,0.7-0.61c0.06-0.01,0.12,0,0.19,0c1.11,0,2.22,0,3.33,0\n                        c0.26,0,0.48,0.1,0.66,0.28c0.07,0,0.15,0.01,0.23,0c0.07-0.01,0.13-0.08,0.2-0.09c0.22-0.02,0.4-0.13,0.6-0.18\n                        c0.2-0.06,0.39-0.16,0.59-0.22c0.24-0.08,0.47-0.2,0.69-0.32c0.33-0.17,0.64-0.37,0.96-0.58c0.2-0.13,0.39-0.26,0.58-0.4\n                        c0.12-0.08,0.22-0.18,0.33-0.28c0.28-0.26,0.57-0.5,0.82-0.78c0.23-0.26,0.47-0.51,0.67-0.8c0.19-0.27,0.4-0.54,0.58-0.82\n                        c0.15-0.24,0.29-0.49,0.42-0.74c0.09-0.17,0.15-0.36,0.25-0.53c0.09-0.16,0.14-0.35,0.2-0.53c-0.03-0.05-0.05-0.11-0.08-0.16\n                        c-0.19-0.2-0.25-0.45-0.25-0.72c0-1.74,0-3.48,0-5.23c0-0.3,0.12-0.56,0.33-0.79c0.03-0.15-0.09-0.27-0.13-0.4\n                        c-0.13-0.4-0.34-0.77-0.54-1.14c-0.16-0.3-0.34-0.59-0.55-0.85c-0.19-0.23-0.35-0.48-0.53-0.72c-0.03-0.04-0.07-0.07-0.1-0.1\n                        c-0.22-0.22-0.44-0.44-0.66-0.66c-0.37-0.37-0.79-0.68-1.21-0.99c-0.48-0.35-1-0.63-1.54-0.88c-0.37-0.17-0.74-0.34-1.12-0.45\n                        c-0.29-0.08-0.57-0.17-0.87-0.22c-0.18-0.03-0.37-0.05-0.56-0.12c-0.11-0.04-0.23-0.02-0.35-0.05c-0.21-0.04-0.44-0.05-0.66-0.05\n                        c-0.29-0.01-0.58,0.01-0.87-0.01c-0.32-0.02-0.65,0.02-0.96,0.06c-0.3,0.04-0.61,0.11-0.91,0.17c-0.37,0.08-0.74,0.18-1.1,0.29\n                        C8.58,2.32,8.37,2.39,8.18,2.49C7.85,2.65,7.52,2.79,7.2,2.96C6.87,3.14,6.53,3.33,6.23,3.57C6,3.75,5.76,3.92,5.52,4.1\n                        c-0.04,0.03-0.07,0.07-0.1,0.1C5.13,4.49,4.84,4.78,4.56,5.06C4.35,5.27,4.18,5.51,4.01,5.75c-0.12,0.17-0.25,0.33-0.37,0.5\n                        C3.38,6.62,3.18,7.02,2.98,7.41C2.84,7.67,2.76,7.96,2.62,8.22C2.6,8.26,2.61,8.31,2.6,8.35C2.83,8.6,2.94,8.88,2.94,9.21\n                        c0,1.73,0,3.45,0,5.18c0,0.22-0.08,0.41-0.18,0.61c-0.14,0.27-0.37,0.42-0.61,0.57c-0.13,0.08-0.28,0.13-0.43,0.14\n                        c-0.33,0.03-0.66,0.01-0.95-0.18c-0.22-0.14-0.42-0.28-0.55-0.52c-0.06-0.12-0.13-0.23-0.15-0.36c0-0.01-0.02-0.01-0.04-0.02\n                        c0-1.92,0-3.84,0-5.77c0.02-0.01,0.04-0.02,0.05-0.04C0.2,8.54,0.34,8.26,0.63,8.1c0.16-0.09,0.33-0.19,0.52-0.22\n                        c0.19-0.03,0.37-0.04,0.56-0.06C1.72,7.8,1.75,7.79,1.76,7.77c0.08-0.28,0.21-0.54,0.33-0.8c0.09-0.2,0.21-0.4,0.31-0.6\n                        c0.11-0.2,0.23-0.39,0.35-0.58c0.11-0.18,0.24-0.34,0.35-0.51c0.26-0.37,0.53-0.71,0.85-1.03C4.01,4.2,4.08,4.16,4.1,4.1\n                        c0.02-0.09,0.08-0.14,0.14-0.17c0.14-0.08,0.23-0.2,0.34-0.3c0.16-0.15,0.33-0.3,0.49-0.45C5.1,3.16,5.14,3.16,5.16,3.14\n                        c0.17-0.16,0.37-0.28,0.55-0.41c0.25-0.19,0.51-0.37,0.79-0.52c0.62-0.33,1.24-0.65,1.91-0.87c0.29-0.09,0.58-0.2,0.88-0.26\n                        C9.45,1.04,9.61,1,9.76,0.97c0.13-0.02,0.25-0.07,0.39-0.08c0.14-0.01,0.28-0.08,0.43-0.05c0.09-0.07,0.21-0.05,0.31-0.04\n                        C11,0.81,11.09,0.76,11.2,0.76c0.31-0.01,0.62-0.01,0.94,0c0.31,0.01,0.61-0.04,0.92,0.04c0.15,0.04,0.32,0,0.47,0.05\n                        c0.09,0.03,0.19,0,0.29,0.04c0.08,0.04,0.19,0.03,0.28,0.05c0.28,0.05,0.56,0.12,0.84,0.19c0.21,0.05,0.4,0.13,0.6,0.19\n                        c0.21,0.06,0.42,0.13,0.61,0.22c0.34,0.14,0.66,0.32,1,0.47c0.28,0.13,0.54,0.28,0.8,0.44c0.11,0.07,0.21,0.16,0.33,0.23\n                        c0.41,0.27,0.8,0.56,1.15,0.9c0.45,0.44,0.91,0.88,1.3,1.38c0.16,0.21,0.32,0.41,0.45,0.63c0.2,0.32,0.43,0.61,0.57,0.96\n                        c0.23,0.26,0.27,0.61,0.46,0.89c0.01,0.01,0,0.03,0,0.05c0.05,0.12,0.1,0.24,0.14,0.34c0.23,0.02,0.45,0.01,0.64,0.07\n                        c0.39,0.14,0.76,0.33,0.91,0.76c0.09,0.06,0.05,0.19,0.14,0.26C24.03,10.83,24.03,12.76,24.03,14.68z"}),i.default.createElement("path",{d:"M3.64,11.63c0-0.12,0.01-0.23,0-0.35c-0.01-0.24,0.05-0.47,0.06-0.71c0.01-0.2,0.05-0.41,0.09-0.62\n                        c0.03-0.14,0.07-0.28,0.1-0.42c0.02-0.11,0.05-0.21,0.08-0.32C4,9.1,4.02,9,4.06,8.9c0.06-0.16,0.12-0.31,0.17-0.47\n                        c0.1-0.29,0.24-0.56,0.39-0.82c0.21-0.39,0.44-0.76,0.7-1.11c0.19-0.25,0.4-0.48,0.61-0.71c0.2-0.23,0.44-0.42,0.65-0.64\n                        c0.12-0.13,0.28-0.23,0.42-0.33c0.17-0.12,0.34-0.24,0.51-0.35c0.3-0.2,0.61-0.36,0.94-0.51c0.36-0.17,0.73-0.3,1.11-0.43\n                        c0.2-0.07,0.41-0.1,0.61-0.18c0.08-0.03,0.17-0.01,0.26-0.05c0.13-0.05,0.28-0.04,0.42-0.06c0.1-0.01,0.2-0.06,0.31-0.05\n                        c0.1,0.01,0.21,0.02,0.31-0.04c0.03-0.02,0.08,0,0.12,0c0.27,0,0.53,0,0.8,0c0.22,0,0.44,0.04,0.66,0.06\n                        c0.22,0.02,0.45,0.07,0.67,0.12c0.22,0.05,0.43,0.09,0.64,0.16c0.32,0.1,0.64,0.22,0.96,0.35c0.26,0.11,0.52,0.23,0.76,0.36\n                        c0.3,0.16,0.57,0.36,0.85,0.55c0.5,0.35,0.92,0.79,1.35,1.22c0.28,0.28,0.52,0.6,0.73,0.94c0.26,0.4,0.5,0.82,0.7,1.26\n                        C19.83,8.4,19.9,8.67,20,8.94c0.04,0.13,0.08,0.26,0.12,0.4c0.04,0.13,0.03,0.28,0.11,0.4c-0.01,0.23,0.08,0.44,0.1,0.66\n                        c0.02,0.19,0,0.39,0.05,0.56c0.05,0.2,0.03,0.4,0.04,0.59c0.01,0.2,0.03,0.41-0.01,0.61c-0.03,0.15-0.03,0.3-0.04,0.45\n                        c-0.01,0.1-0.05,0.2-0.05,0.31c0,0.09-0.04,0.19-0.04,0.28c-0.01,0.11-0.08,0.2-0.05,0.31c-0.16,0.47-0.23,0.97-0.47,1.42\n                        c-0.01,0.18-0.13,0.32-0.21,0.48c-0.08,0.16-0.16,0.31-0.25,0.46c-0.15,0.26-0.32,0.52-0.48,0.78c-0.05,0.08-0.11,0.16-0.17,0.23\n                        c-0.15,0.17-0.31,0.34-0.46,0.51c-0.06,0.07-0.12,0.16-0.18,0.23c-0.17,0.18-0.37,0.33-0.57,0.48c-0.12,0.09-0.22,0.19-0.33,0.28\n                        c-0.28,0.22-0.57,0.42-0.88,0.6c-0.19,0.11-0.38,0.21-0.58,0.3c-0.25,0.11-0.5,0.23-0.76,0.33c-0.2,0.08-0.42,0.12-0.62,0.21\n                        c-0.07,0.03-0.16,0.03-0.23,0.06c-0.11,0.04-0.25,0.01-0.35,0.06c-0.11,0.06-0.23,0.03-0.34,0.08c-0.11,0.05-0.25-0.01-0.37,0.06\n                        c-0.37-0.02-0.73,0.07-1.11,0.05c-0.27-0.01-0.53-0.08-0.8-0.05c-0.3-0.08-0.61-0.11-0.91-0.18c-0.26-0.05-0.51-0.12-0.76-0.2\n                        c-0.21-0.06-0.41-0.14-0.61-0.23c-0.23-0.11-0.48-0.2-0.7-0.33c-0.33-0.19-0.66-0.38-0.97-0.61c-0.27-0.21-0.54-0.41-0.79-0.65\n                        c-0.1-0.1-0.23-0.18-0.32-0.29c-0.2-0.23-0.41-0.45-0.59-0.69c-0.18-0.25-0.35-0.5-0.51-0.77c-0.2-0.32-0.37-0.64-0.53-0.98\n                        c-0.08-0.16-0.16-0.33-0.21-0.5c-0.05-0.17-0.14-0.32-0.15-0.5c-0.09-0.07-0.03-0.18-0.09-0.27c-0.04-0.07-0.04-0.17-0.06-0.26\n                        c-0.05-0.18-0.04-0.38-0.13-0.55c-0.01-0.03-0.01-0.06,0-0.09c0.02-0.21-0.08-0.41-0.05-0.61C3.62,12.25,3.64,12.12,3.64,12\n                        C3.64,11.88,3.64,11.75,3.64,11.63z M8.84,9.94C8.73,9.95,8.68,9.88,8.66,9.83C8.59,9.65,8.4,9.61,8.29,9.48\n                        C8.23,9.41,8.13,9.35,8.05,9.34c-0.12-0.02-0.2-0.14-0.34-0.1c-0.09-0.1-0.23-0.03-0.34-0.08C7.24,9.1,6.58,9.14,6.44,9.2\n                        c-0.1,0.05-0.21,0.05-0.31,0.1c-0.26,0.14-0.49,0.3-0.7,0.52c-0.22,0.23-0.36,0.51-0.47,0.81c-0.07,0.2-0.15,0.4-0.14,0.62\n                        c-0.08,0.13-0.01,0.29-0.05,0.42c-0.06,0.15-0.02,0.3-0.04,0.45c-0.01,0.1,0.03,0.19,0.04,0.29c0.02,0.16,0,0.33,0.05,0.5\n                        c0.04,0.15,0.05,0.31,0.1,0.45c0.17,0.47,0.4,0.91,0.83,1.2c0.21,0.14,0.43,0.24,0.67,0.31c0.11,0.03,0.22,0.04,0.33,0.05\n                        c0.12,0.01,0.23,0,0.35,0c0.3,0.02,0.58-0.04,0.85-0.15c0.27-0.1,0.5-0.27,0.69-0.48c0.06-0.07,0.12-0.14,0.21-0.25\n                        c0,0.12-0.03,0.23,0.01,0.28c0.06,0.09,0.02,0.18,0.04,0.27c0.02,0.08,0.04,0.15,0.06,0.23c0.23,0,0.45,0,0.69,0\n                        c0-0.53,0-1.06,0-1.59c0.13,0.15,0.18,0.33,0.26,0.49c0.13,0.26,0.33,0.45,0.52,0.65c0.2,0.2,0.44,0.32,0.7,0.41\n                        c0.28,0.09,0.56,0.16,0.85,0.14c0.12-0.01,0.25,0.01,0.37,0c0.12-0.01,0.24-0.02,0.36-0.05c0.13-0.03,0.27-0.06,0.4-0.11\n                        c0.53-0.23,0.94-0.59,1.18-1.13c0.03-0.08,0.08-0.15,0.13-0.22c0.03,0.02,0.05,0.03,0.06,0.05c0.03,0.04,0.06,0.08,0.08,0.13\n                        c0.18,0.46,0.37,0.57,0.63,0.81c0.39,0.35,0.87,0.51,1.4,0.52c0.24,0,0.49,0.01,0.73-0.03c0.21-0.04,0.42-0.1,0.61-0.18\n                        c0.33-0.13,0.61-0.37,0.83-0.64c0.12-0.14,0.23-0.31,0.29-0.49c0.06-0.17,0.12-0.34,0.17-0.52c0.06-0.22,0.1-0.45,0.11-0.68\n                        c0.01-0.3,0.03-0.61-0.03-0.92c-0.05-0.25-0.1-0.5-0.19-0.74c-0.08-0.21-0.17-0.42-0.3-0.6c-0.15-0.2-0.33-0.39-0.53-0.53\n                        c-0.39-0.28-0.83-0.43-1.32-0.44c-0.16,0-0.31,0-0.47,0c-0.14,0-0.28,0.07-0.42,0.05c-0.23,0.12-0.49,0.17-0.71,0.32\n                        c-0.35,0.24-0.62,0.54-0.81,0.91c-0.04,0.08-0.09,0.16-0.14,0.25c-0.14-0.24-0.26-0.45-0.4-0.66c-0.21-0.3-0.5-0.49-0.81-0.65\n                        c-0.25-0.13-0.52-0.2-0.8-0.21c-0.36-0.02-0.72-0.02-1.09,0.08c-0.4,0.11-0.76,0.31-1,0.53c-0.27,0.25-0.43,0.53-0.59,0.95\n                        c-0.01,0.03-0.05,0.05-0.09,0.11c0-1.31,0-2.59,0-3.87c-0.29,0-0.56,0-0.84,0c0,0.07,0,0.14,0,0.21c0,0.77,0,1.53,0,2.3\n                        c0,0.12-0.02,0.24,0.04,0.36C8.86,9.84,8.84,9.9,8.84,9.94z"}),i.default.createElement("path",{d:"M13.72,11.99c0,0.18,0.01,0.32,0,0.46c-0.02,0.43-0.15,0.82-0.38,1.18c-0.14,0.21-0.53,0.47-0.76,0.53\n                        c-0.14,0.03-0.66,0.08-0.78,0.05c-0.24-0.07-0.48-0.1-0.69-0.27c-0.16-0.13-0.29-0.27-0.39-0.45c-0.17-0.29-0.25-0.6-0.29-0.94\n                        c-0.03-0.24-0.03-0.47-0.03-0.71c0-0.16,0.03-0.32,0.04-0.47c0.01-0.16,0.1-0.29,0.09-0.45c0.15-0.3,0.29-0.62,0.58-0.81\n                        c0.16-0.11,0.36-0.19,0.57-0.22c0.15-0.02,0.3-0.03,0.45-0.04c0.2-0.01,0.54,0.07,0.77,0.19c0.18,0.09,0.32,0.25,0.44,0.4\n                        c0.18,0.21,0.28,0.6,0.35,0.89C13.73,11.56,13.69,11.79,13.72,11.99z"}),i.default.createElement("path",{d:"M18.45,11.98c0,0.14,0.01,0.25,0,0.35c-0.04,0.23-0.06,0.45-0.12,0.68c-0.06,0.24-0.17,0.45-0.31,0.65\n                        c-0.21,0.29-0.49,0.45-0.85,0.52c-0.18,0.03-0.36,0.05-0.54,0.04c-0.22-0.02-0.43-0.06-0.63-0.17c-0.23-0.12-0.41-0.3-0.55-0.52\n                        c-0.16-0.25-0.23-0.53-0.29-0.82c-0.08-0.38-0.06-0.77-0.03-1.15c0.03-0.38,0.11-0.75,0.36-1.07c0.22-0.28,0.44-0.5,0.77-0.57\n                        c0.27-0.06,0.55-0.13,0.82-0.02c0.14-0.02,0.26,0.06,0.38,0.09c0.24,0.07,0.41,0.23,0.56,0.42c0.15,0.19,0.21,0.42,0.31,0.62\n                        c0.04,0.09-0.02,0.2,0.06,0.28C18.41,11.55,18.49,11.78,18.45,11.98z"}),i.default.createElement("path",{d:"M8.79,12.1c0,0.08,0,0.16,0,0.23c-0.01,0.17-0.03,0.33-0.05,0.5c-0.01,0.16-0.1,0.29-0.09,0.45\n                        c-0.16,0.36-0.36,0.69-0.76,0.81c-0.18,0.06-0.36,0.13-0.56,0.12c-0.11-0.01-0.22,0.01-0.33,0c-0.1-0.01-0.21-0.02-0.31-0.05\n                        c-0.09-0.03-0.17-0.09-0.25-0.12c-0.24-0.09-0.38-0.28-0.5-0.49c-0.13-0.22-0.2-0.46-0.24-0.72c-0.02-0.14-0.01-0.29-0.05-0.43\n                        c-0.04-0.16-0.04-0.32-0.04-0.47c0-0.15,0.06-0.29,0.05-0.45c0-0.14,0.04-0.29,0.09-0.43c0.05-0.14,0.08-0.28,0.14-0.41\n                        c0.15-0.3,0.36-0.56,0.68-0.69c0.14-0.06,0.29-0.11,0.45-0.1C7.17,9.86,7.32,9.8,7.47,9.9c0.19-0.02,0.36,0.06,0.53,0.14\n                        c0.18,0.08,0.32,0.22,0.42,0.37c0.16,0.24,0.24,0.44,0.29,0.79c0.1,0.13,0.02,0.29,0.07,0.44C8.81,11.78,8.79,11.94,8.79,12.1\n                        C8.8,12.1,8.8,12.1,8.79,12.1z"}))},663:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapErrors=t.ErrorStatus503=t.ErrorStatus404=t.ErrorStatus403=t.ErrorStatus400=t.InboxIdRequired=t.InvalidOrigin=t.Disabled=void 0;const o=n(6).__importDefault(n(202)),a=n(86),i=n(132),r=n(67);t.Disabled=function*(){yield r.put(a.hidden())},t.InvalidOrigin=function*(){yield r.put(i.showErrorNotify("Bạn đang sử dụng Livechat trên website không chính xác !")),yield*t.Disabled()},t.InboxIdRequired=function*(){yield r.call([o.default,o.default.clearAllData]),yield r.put(i.showErrorNotify("Dữ liệu chat đã cũ. Hãy tải lại trang để cập nhật !")),yield*t.Disabled()},t.ErrorStatus400=function*(){yield r.put(i.showErrorNotify("Lỗi 400 !"))},t.ErrorStatus403=function*(){yield r.put(i.showErrorNotify("Lỗi 403 !"))},t.ErrorStatus404=function*(){yield r.put(i.showErrorNotify("Cấu hình Livechat không hợp lệ !")),yield*t.Disabled()},t.ErrorStatus503=function*(){yield r.put(i.showErrorNotify("Máy chủ đang bận !"))},t.mapErrors={Disabled:t.Disabled,InvalidOrigin:t.InvalidOrigin,InboxIdRequired:t.InboxIdRequired,ErrorStatus400:t.ErrorStatus400,ErrorStatus403:t.ErrorStatus403,ErrorStatus404:t.ErrorStatus404,ErrorStatus503:t.ErrorStatus503},t.default=t.mapErrors},664:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionType=void 0;const o=n(6),a=n(14),i=o.__importDefault(n(47));var r;!function(e){e[e.ATTACH_WORKER=0]="ATTACH_WORKER",e[e.ADD=1]="ADD",e[e.ADD_ALL=2]="ADD_ALL",e[e.PLAY=3]="PLAY",e[e.STOP=4]="STOP",e[e.REMOVE=5]="REMOVE"}(r=t.ActionType||(t.ActionType={})),a.InjectEnum(r,i.default.AUDIO)},665:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionType=void 0;const o=n(6),a=n(14),i=o.__importDefault(n(47));var r;!function(e){e[e.ATTACH_WORKER=0]="ATTACH_WORKER",e[e.REQUEST_PERMISSION=1]="REQUEST_PERMISSION",e[e.SEND_NOTIFY=2]="SEND_NOTIFY"}(r=t.ActionType||(t.ActionType={})),a.InjectEnum(r,i.default.NOTIFICATION)},666:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapPartners=t.ATP=void 0,t.ATP=function*(){},t.mapPartners={ATP:t.ATP},t.default=t.mapPartners},667:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(226),a=n(386),i=n(227),r=n(388),s=n(387);a.Cookie.exists("uid")?a.Cookie.set("uid",a.Cookie.get("uid"),1051200):a.Cookie.set("uid",i.Helper.guid(),1051200),a.Cookie.setUtms();for(let e=0,t=r.Pixel.queue.length;e<t;e++){const[t,n,o]=r.Pixel.queue[e];r.Pixel[t].call(r.Pixel,n,o)}window.addEventListener("unload",(function(){o.Config.pageCloseOnce||(o.Config.pageCloseOnce=!0,new r.Pixel("pageclose",i.Helper.now(),(function(){return i.Helper.isPresent(o.Config.externalHost)&&i.Helper.now()-o.Config.externalHost.time<5e3?o.Config.externalHost.link:null})))})),window.onload=function(){const e=document.getElementsByTagName("a");for(let t=0,n=e.length;t<n;t++)e[t].addEventListener("click",function(){s.Url.externalHost(this)&&(o.Config.externalHost={link:this.href,time:i.Helper.now()})}.bind(e[t]));const t=document.querySelectorAll("[data-pixel-event]");for(let e=0,n=t.length;e<n;e++)t[e].addEventListener("click",function(){const e=this.getAttribute("data-Pixel-event");e&&new r.Pixel(e,i.Helper.now(),this.getAttribute("data-Pixel-data"))}.bind(t[e]))}},668:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Browser=void 0;t.Browser=class{static nameAndVersion(){const e=navigator.userAgent;let t,n=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(n[1])?(t=/\brv[ :]+(\d+)/g.exec(e)||[],"IE "+(t[1]||"")):"Chrome"===n[1]&&(t=e.match(/\b(OPR|Edge)\/(\d+)/),null!=t)?t.slice(1).join(" ").replace("OPR","Opera"):(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(t=e.match(/version\/(\d+)/i))&&n.splice(1,1,t[1]),n.join(" "))}static isMobile(){return"ontouchstart"in document}static userAgent(){return window.navigator.userAgent}}},669:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionType=void 0;const o=n(6),a=n(14),i=o.__importDefault(n(47));var r;!function(e){e[e.CLICK_LICENSE=0]="CLICK_LICENSE",e[e.UPDATE_HEADER_COLOR=1]="UPDATE_HEADER_COLOR",e[e.UPDATE_LICENSE_TEXT=2]="UPDATE_LICENSE_TEXT",e[e.SHOW_COMPOSER_FILE=3]="SHOW_COMPOSER_FILE",e[e.HIDDEN_COMPOSER_FILE=4]="HIDDEN_COMPOSER_FILE"}(r=t.ActionType||(t.ActionType={})),a.InjectEnum(r,i.default.DIALOG)},670:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionType=void 0;const o=n(6),a=n(14),i=o.__importDefault(n(47));var r;!function(e){e[e.COMPUTE_POSITION=0]="COMPUTE_POSITION",e[e.UPDATE_PRIMARY_COLOR=1]="UPDATE_PRIMARY_COLOR",e[e.UPDATE_TEXT_COLOR=2]="UPDATE_TEXT_COLOR",e[e.UPDATE_COMPANY=3]="UPDATE_COMPANY",e[e.UPDATE_COMPANY_AND_API=4]="UPDATE_COMPANY_AND_API",e[e.SHOW=5]="SHOW",e[e.HIDDEN=6]="HIDDEN",e[e.PROCESS_ERROR=7]="PROCESS_ERROR",e[e.UPDATE_PARTNER=8]="UPDATE_PARTNER",e[e.FETCH_CONFIG_DONE=9]="FETCH_CONFIG_DONE",e[e.FETCH_CONFIG=10]="FETCH_CONFIG",e[e.UPDATE_IS_TAB_ACTIVE=11]="UPDATE_IS_TAB_ACTIVE",e[e.RUN_JOB_SCHEDULE=12]="RUN_JOB_SCHEDULE"}(r=t.ActionType||(t.ActionType={})),a.InjectEnum(r,i.default.GLOBAL)},671:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(6),a=n(25),i=o.__importDefault(n(0)),r=o.__importDefault(n(24)).default(a.motion.img)(()=>({width:"100%",height:"100%",borderRadius:"inherit"}));t.default=e=>i.default.createElement(r,Object.assign({alt:"Logo"},e))},672:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionType=void 0;const o=n(6),a=n(14),i=o.__importDefault(n(47));var r;!function(e){e[e.OPEN=0]="OPEN",e[e.CLOSE=1]="CLOSE",e[e.TOGGLE=2]="TOGGLE",e[e.UPDATE_BACKGROUND_COLOR=3]="UPDATE_BACKGROUND_COLOR",e[e.UPDATE_ICON_COLOR=4]="UPDATE_ICON_COLOR",e[e.USE_DEFAULT_LOGO=5]="USE_DEFAULT_LOGO",e[e.USE_CUSTOM_LOGO=6]="USE_CUSTOM_LOGO"}(r=t.ActionType||(t.ActionType={})),a.InjectEnum(r,i.default.LAUNCHER)},673:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Connected=t.ResponseInfoComponent=void 0;const o=n(6),a=n(20),i=n(14),r=n(55),s=n(25),l=o.__importDefault(n(0)),d=n(17),c=o.__importDefault(n(24)).default(s.motion.div)(({_:e})=>({position:"relative",boxShadow:[0,i.px(10),i.px(10),i.px(-8),i.color([0,0,0,.08])].join(" "),boxSizing:"border-box",overflow:"hidden",textOverflow:"ellipsis",maxWidth:i.percent(e.maxWidth),minHeight:i.px(e.minHeight),paddingTop:i.px(e.padding+e.border),paddingLeft:i.px(e.padding),paddingRight:i.px(e.padding),paddingBottom:i.px(e.padding),borderRadius:i.px(e.borderRadius),fontSize:i.px(e.fontSize),lineHeight:i.px(e.lineHeight),textAlign:e.align,margin:`0 ${"right"===e.align?i.px(e.margin):0} 0 ${"left"===e.align?i.px(e.margin):0}`,color:i.color(e.color),backgroundColor:i.color(e.backgroundColor),float:e.align,":before":{content:i.empty(),position:"absolute",width:"100%",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit",top:0,left:0,height:i.px(e.border),backgroundColor:i.color(e.borderColor)}}));class u extends a.Component{render(){const{transition:e,align:t,color:n,backgroundColor:o,margin:a,maxWidth:i,minHeight:r,padding:s,borderRadius:d,fontSize:u,lineHeight:p,border:m,borderColor:f}=this.props;return l.default.createElement(c,{transition:e,_:{align:t,color:n,backgroundColor:o,margin:a,maxWidth:i,minHeight:r,padding:s,borderRadius:d,fontSize:u,lineHeight:p,border:m,borderColor:f},ref:this.anchor},"👌 Bạn đã gửi thông tin liên hệ")}}t.ResponseInfoComponent=u,t.Connected=d.connect(({global:e,dialog:t,chat:n},{mid:o})=>{const{transition:a}=e,{chat:i}=t,{sender:s,message:l}=i,{conversation:d}=n,{messages:c}=d,u=c[o],{sender:p}=u,{type:m}=p,f=s[m],_=l[r.MessageAttachmentType.RequestInfo],{align:h,color:g,backgroundColor:y}=f,{text:T,margin:E,maxWidth:S,minHeight:A,padding:C,borderRadius:v,lineHeight:b,fontSize:O,fields:D,border:I,borderColor:H}=_;return{text:T,align:h,color:g,backgroundColor:y,margin:E,maxWidth:S,minHeight:A,padding:C,borderRadius:v,lineHeight:b,transition:a,fontSize:O,fields:D,border:I,borderColor:H}},null,null,{forwardRef:!0})(u),t.default=t.Connected},674:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Connected=t.TextComponent=void 0;const o=n(6),a=n(20),i=n(14),r=n(55),s=n(25),l=o.__importDefault(n(0)),d=n(17),c=o.__importDefault(n(24)).default(s.motion.div)(({_:e})=>({position:"relative",boxShadow:[0,i.px(10),i.px(10),i.px(-8),i.color([0,0,0,.08])].join(" "),boxSizing:"border-box",overflow:"hidden",textOverflow:"ellipsis",userSelect:"text",maxWidth:i.percent(e.maxWidth),minHeight:i.px(e.minHeight),padding:i.px(e.padding),borderRadius:i.px(e.borderRadius),fontSize:i.px(e.size),lineHeight:i.px(e.lineHeight),textAlign:e.align,margin:`0 ${"right"===e.align?i.px(e.margin):0} 0 ${"left"===e.align?i.px(e.margin):0}`,color:i.color(e.color),backgroundColor:i.color(e.backgroundColor),float:e.align}));class u extends a.Component{render(){const{transition:e,align:t,text:n,color:o,backgroundColor:a,margin:i,maxWidth:r,minHeight:s,padding:d,borderRadius:u,size:p,lineHeight:m}=this.props;return l.default.createElement(c,{transition:e,dangerouslySetInnerHTML:{__html:n},_:{align:t,color:o,backgroundColor:a,margin:i,maxWidth:r,minHeight:s,padding:d,borderRadius:u,size:p,lineHeight:m},ref:this.anchor})}}t.TextComponent=u,t.Connected=d.connect(({global:e,dialog:t,chat:n},{mid:o})=>{const{transition:a}=e,{chat:i}=t,{sender:s,message:l}=i,{conversation:d}=n,{messages:c}=d,u=c[o],{sender:p,message:m}=u,{type:f}=p,_=s[f],h=l[r.MessageAttachmentType.Text],{align:g,color:y,backgroundColor:T}=_,{margin:E,maxWidth:S,minHeight:A,padding:C,borderRadius:v,size:b,lineHeight:O}=h,{text:D}=m;return{text:D,align:g,color:y,backgroundColor:T,margin:E,maxWidth:S,minHeight:A,padding:C,borderRadius:v,size:b,lineHeight:O,transition:a}},null,null,{forwardRef:!0})(u),t.default=t.Connected},675:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Connected=t.AvatarComponent=void 0;const o=n(6),a=n(77),i=n(20),r=n(14),s=n(55),l=n(87),d=n(25),c=o.__importDefault(n(0)),u=n(17),p=o.__importDefault(n(24)).default(d.motion.img)(({_:e})=>({imageRendering:"-webkit-optimize-contrast",cursor:"pointer",userSelect:"none",width:r.px(e.size),height:r.px(e.size),borderRadius:r.px(e.size),float:e.align,marginLeft:"right"===e.align?r.px(5):0,marginRight:"left"===e.align?r.px(5):0}));class m extends i.Component{constructor(e){super(e),this.anchor=c.default.createRef()}render(){const{transition:e,align:t,name:n,avatar:o,size:a}=this.props;return c.default.createElement(l.Tooltip,{title:n,interactive:!0,arrow:!0},c.default.createElement(p,{src:o,alt:n,transition:e,_:{size:a,align:t},ref:this.anchor}))}}t.AvatarComponent=m,m.defaultProps={sid:-1,isSystem:!1,isMe:!1},t.Connected=u.connect(({global:e,seller:t,dialog:n,me:o,conversation:i},{sid:r,isMe:l,isSystem:d})=>{const{transition:c}=e,{chat:u}=n,{sender:p,avatar:m}=u,{size:f}=m,{system:_}=i,{sellers:h}=t,g=d?s.SenderType.System:l?s.SenderType.Me:s.SenderType.Seller,{align:y}=p[g];let T=_;l?T=o:r&&h[r]&&(T=h[r]);const{name:E,avatar:S}=T;return{name:null!=E?E:"",avatar:null!=S?S:a.Image.AvatarDefault,align:null!=y?y:"left",size:f,transition:c}},null,null,{forwardRef:!0})(m),t.default=t.Connected},676:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Connected=t.StatusComponent=void 0;const o=n(6),a=n(77),i=n(20),r=n(14),s=n(55),l=n(25),d=o.__importDefault(n(0)),c=n(17),u=o.__importDefault(n(24)).default(l.motion.div)(({_:e})=>({position:"absolute",bottom:0,[e.align]:r.px(6),width:r.px(e.size),height:r.px(e.size),borderRadius:r.px(e.size),float:e.align,color:r.color(e.color)}));class p extends i.Component{constructor(e){super(e),this.anchor=d.default.createRef()}render(){const{size:e,align:t,color:n,isLocal:o,isPushed:i,isSent:r,isLatest:s,isError:l}=this.props;return d.default.createElement(u,{_:{size:e,align:t,color:n},ref:this.anchor},o&&a.Icon.MessageLocal,i&&a.Icon.MessagePushed,r&&s&&a.Icon.MessageSent,l&&a.Icon.Error)}}t.StatusComponent=p,p.defaultProps={size:12},t.Connected=c.connect(({chat:e,dialog:t},{mid:n})=>{const{conversation:o}=e,{chat:a}=t,{sender:i}=a,{messages:r,bottom:l}=o,d=r[n],{sender:c}=d,{type:u}=c,p=u===s.SenderType.System,m=u===s.SenderType.Me,f=p?s.SenderType.System:m?s.SenderType.Me:s.SenderType.Seller,{align:_}=i[f];return{isLocal:d.local,isPushed:d.pushed,isLatest:parseInt(n)===(null==l?void 0:l.createdTime.getTime()),isSent:!!d.id,isError:!!d.error,align:_,color:[123,123,123]}},null,null,{forwardRef:!0})(p),t.default=t.Connected},677:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionType=void 0;const o=n(6),a=n(14),i=o.__importDefault(n(47));var r;!function(e){e[e.ATTACH_GLOBAL=0]="ATTACH_GLOBAL",e[e.ATTACH_ROOT=1]="ATTACH_ROOT",e[e.ATTACH_LAUNCHER=2]="ATTACH_LAUNCHER",e[e.ATTACH_PREVIEW=3]="ATTACH_PREVIEW",e[e.ATTACH_DIALOG=4]="ATTACH_DIALOG",e[e.ATTACH_CHAT=5]="ATTACH_CHAT",e[e.ATTACH_CONVERSATION=6]="ATTACH_CONVERSATION",e[e.ATTACH_MESSAGE=7]="ATTACH_MESSAGE"}(r=t.ActionType||(t.ActionType={})),a.InjectEnum(r,i.default.ANCHOR)},678:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Connected=t.ComposerComponent=void 0;const o=n(6),a=n(20),i=o.__importDefault(n(679)),r=o.__importDefault(n(687)),s=n(14),l=n(25),d=o.__importDefault(n(0)),c=n(17),u=o.__importDefault(n(24)).default(l.motion.div)(({_:e})=>({borderBottomLeftRadius:"inherit",borderBottomRightRadius:"inherit",display:"flex",position:"relative",borderTopWidth:s.px(1),borderTopColor:s.color([230,230,230]),borderTopStyle:"solid",backgroundColor:s.color(e.backgroundColor)}));class p extends a.Component{render(){const{transition:e,backgroundColor:t}=this.props;return d.default.createElement(u,{transition:e,_:{backgroundColor:t},ref:this.anchor},d.default.createElement(r.default,null),d.default.createElement(i.default,null))}}t.ComposerComponent=p,t.Connected=c.connect(({global:e,dialog:t})=>{const{transition:n}=e,{composer:o}=t,{backgroundColor:a}=o;return{backgroundColor:a,transition:n}},null,null,{forwardRef:!0})(p),t.default=t.Connected},679:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Connected=t.InputComponent=void 0;const o=n(6),a=n(20),i=o.__importDefault(n(680)),r=n(14),s=n(94),l=n(109),d=n(87),c=n(25),u=n(31),p=n(53),m=o.__importDefault(n(0)),f=n(17),_=o.__importDefault(n(24)),h=_.default(c.motion.div)(({_:e})=>({width:"100%",color:r.color(e.color)})),g=_.default(d.TextField)(()=>({outline:"none",padding:`${r.px(10)} ${r.px(20)}`,"&.MuiTextField-root":{".MuiInputBase-root":{color:r.color([0,0,0,.75]),fontSize:r.px(16)},".MuiOutlinedInput-notchedOutline":{border:0}}}));class y extends a.Component{constructor(e){super(e),this.state={text:"",attachments:[]}}handleChangeText(e){const t=e.target.value;this.setState({text:t})}async setInput(e=""){await this.setState({text:e})}async clearInput(){return await this.setInput()}async setAttachments(e=[]){const{showComposerFile:t,hiddenComposerFile:n}=this.props,o=this.state.attachments.length,a=e.length;0==o&&a>0?t():o>0&&0==a&&n(),await this.setState({attachments:e})}async clearAttachments(){return await this.setAttachments()}async reset(){await this.clearInput(),await this.clearAttachments()}onKeyPress(e){const{onSendText:t,onSendImage:n,onSendFile:o}=this.props,{text:a,attachments:i}=this.state;switch(e.key){case"Esc":e.preventDefault(),this.reset().then();break;case"Enter":if(e.preventDefault(),this.reset().then(),i.length){if(i.every(r.isFileImage)){for(const e of i)n(a,e);return}for(const e of i)o(a,e);return}if(a)return void t(a)}}async update(e){return this.setState({text:e})}async insertAttachment(...e){const t=u.clone(this.state.attachments);return t.push(...e),await this.setAttachments(t)}render(){const{transition:e,placeholder:t,color:n}=this.props,{text:o,attachments:a}=this.state;return m.default.createElement(h,{onKeyPress:this.onKeyPress,transition:e,_:{color:n},ref:this.anchor},m.default.createElement(g,{placeholder:t,value:o,size:"medium",variant:"outlined",onChange:this.handleChangeText,fullWidth:!0,InputProps:{endAdornment:m.default.createElement(i.default,{text:o,onUpdate:this.update,attachments:a,onClearAttachment:this.clearAttachments,onInsertAttachment:this.insertAttachment})}}))}}o.__decorate([p.Bind(),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[Object]),o.__metadata("design:returntype",void 0)],y.prototype,"handleChangeText",null),o.__decorate([p.Bind(),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[Object]),o.__metadata("design:returntype",Promise)],y.prototype,"setInput",null),o.__decorate([p.Bind(),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[]),o.__metadata("design:returntype",Promise)],y.prototype,"clearInput",null),o.__decorate([p.Bind(),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[Array]),o.__metadata("design:returntype",Promise)],y.prototype,"setAttachments",null),o.__decorate([p.Bind(),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[]),o.__metadata("design:returntype",Promise)],y.prototype,"clearAttachments",null),o.__decorate([p.Bind(),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[Object]),o.__metadata("design:returntype",void 0)],y.prototype,"onKeyPress",null),o.__decorate([p.Bind(),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[String]),o.__metadata("design:returntype",Promise)],y.prototype,"update",null),o.__decorate([p.Bind(),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[Object]),o.__metadata("design:returntype",Promise)],y.prototype,"insertAttachment",null),t.InputComponent=y,t.Connected=f.connect(({global:e,dialog:t})=>{const{transition:n}=e,{composer:o}=t,{placeholder:a,color:i}=o;return{transition:n,placeholder:a,color:i}},e=>({onSendText:r.redirect(e,s.meSendText),onSendImage:r.redirect(e,s.meSendImage),onSendFile:r.redirect(e,s.meSendFile),showComposerFile:r.redirect(e,l.showComposerFile),hiddenComposerFile:r.redirect(e,l.hiddenComposerFile)}),null,{forwardRef:!0})(y),t.default=t.Connected},680:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Connected=t.ToolComponent=void 0;const o=n(6),a=n(20),i=o.__importDefault(n(681)),r=o.__importDefault(n(685)),s=n(14),l=n(109),d=n(87),c=n(397),u=n(31),p=n(53),m=o.__importDefault(n(0)),f=n(17),_=o.__importDefault(n(24)),h=_.default(d.InputAdornment)(()=>({})),g=_.default(d.IconButton)(()=>({})),y=_.default(d.IconButton)(()=>({}));class T extends a.Component{constructor(e){super(e),this.filePicker=m.default.createRef(),this.state={emoji:!1,file:!0}}openEmojiPopup(){this.setState({emoji:!0})}closeEmojiPopup(){this.setState({emoji:!1})}toggleEmojiPopup(){const{emoji:e}=this.state;return e?this.closeEmojiPopup():this.openEmojiPopup()}openFilePopup(){const{file:e}=this.state;e||this.setState({file:!0}),setTimeout(()=>{var e;return null===(e=this.filePicker.current)||void 0===e?void 0:e.selectFiles()},500)}closeFilePopup(){const{onClearAttachment:e}=this.props;return this.setState({file:!1}),e()}toggleFilePopup(){const{file:e}=this.state;return e?this.closeFilePopup():this.openFilePopup()}async insert(e,t=!1){const{text:n,onUpdate:o,onClearAttachment:a,onInsertAttachment:i}=this.props;if(u.isString(e))return await o(n+e);if(u.isArray(e))return t?await a().then(()=>i(...e)):await i(...e);throw new Error("Insert unknown")}setFilePicker(e){this.filePicker.current=e}render(){const{attachments:e}=this.props,{emoji:t,file:n}=this.state;return m.default.createElement(h,{ref:this.anchor,position:"end"},m.default.createElement(d.Tooltip,{title:"Emoji",interactive:!0,arrow:!0,placement:"top"},m.default.createElement(g,{onClick:this.toggleEmojiPopup,disabled:t},m.default.createElement(c.SentimentVerySatisfied,null))),t&&m.default.createElement(i.default,{onInsert:this.insert,onClose:this.closeEmojiPopup}),m.default.createElement(d.Tooltip,{title:"File",interactive:!0,arrow:!0,placement:"top"},m.default.createElement(y,{onClick:this.openFilePopup},m.default.createElement(c.Attachment,null))),n&&m.default.createElement(r.default,{files:e,onReady:this.setFilePicker,onSelect:this.insert,onClose:this.closeFilePopup,showPreview:!0}))}}o.__decorate([p.Bind(),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[]),o.__metadata("design:returntype",void 0)],T.prototype,"openEmojiPopup",null),o.__decorate([p.Bind(),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[]),o.__metadata("design:returntype",void 0)],T.prototype,"closeEmojiPopup",null),o.__decorate([p.Bind(),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[]),o.__metadata("design:returntype",void 0)],T.prototype,"toggleEmojiPopup",null),o.__decorate([p.Bind(),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[]),o.__metadata("design:returntype",void 0)],T.prototype,"openFilePopup",null),o.__decorate([p.Bind(),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[]),o.__metadata("design:returntype",void 0)],T.prototype,"closeFilePopup",null),o.__decorate([p.Bind(),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[]),o.__metadata("design:returntype",void 0)],T.prototype,"toggleFilePopup",null),o.__decorate([p.Bind(),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[Object,Object]),o.__metadata("design:returntype",Promise)],T.prototype,"insert",null),o.__decorate([p.Bind(),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[Object]),o.__metadata("design:returntype",void 0)],T.prototype,"setFilePicker",null),t.ToolComponent=T,t.Connected=f.connect(null,e=>({showComposerFile:s.redirect(e,l.showComposerFile),hiddenComposerFile:s.redirect(e,l.hiddenComposerFile)}),null,{forwardRef:!0})(T),t.default=t.Connected},681:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Connected=t.EmojiComponent=void 0;const o=n(6),a=n(20),i=n(14),r=n(723);n(389);const s=n(25),l=n(31),d=n(53),c=o.__importDefault(n(0)),u=o.__importDefault(n(390)),p=n(17),m=o.__importDefault(n(24)),f=m.default(s.motion.div)(({_:e})=>({position:"absolute",bottom:0,left:i.px(-e.width)})),_=m.default(r.Picker)(({_:e})=>({width:i.px(e.width)+" !important"}));class h extends a.Component{handleClickOutside(){const{onClose:e}=this.props;return e()}render(){const{color:e,width:t,onInsert:n}=this.props;return c.default.createElement(f,{ref:this.anchor,_:{width:t}},c.default.createElement(_,{color:i.color(e),emojiSize:16,showSkinTones:!1,showPreview:!1,onSelect:e=>l.tap(e,e=>n(e.native)),_:{width:t}}))}}o.__decorate([d.Bind(),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[]),o.__metadata("design:returntype",void 0)],h.prototype,"handleClickOutside",null),t.EmojiComponent=h,t.Connected=p.connect(({dialog:e,global:t})=>{const{composer:n}=e,{color:o}=t,{emoji:a}=n,{width:i}=a;return{color:o,width:i}},null,null,{forwardRef:!0})(u.default(h)),t.default=t.Connected},685:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Connected=t.FileComponent=void 0;const o=n(6),a=n(20),i=n(14),r=n(87),s=o.__importDefault(n(130)),l=n(397);n(389);const d=n(25),c=n(31),u=n(53),p=o.__importDefault(n(0)),m=n(379),f=o.__importDefault(n(686)),_=o.__importDefault(n(390)),h=n(17),g=o.__importDefault(n(24)),y=g.default(d.motion.div)(({_:e})=>({marginTop:i.px(4),overflowY:"hidden",width:i.calc(i.percent(100),"-",i.px(20)),marginLeft:i.px(10),marginRight:i.px(10),paddingBottom:i.px(4),position:"absolute",left:0,height:i.px(e.height),top:i.px(-e.height-8),".menu-item-wrapper":{outline:"none","+ .menu-item-wrapper":{paddingLeft:i.px(5)}}})),T=g.default(d.motion.div)(({_:e})=>({fontSize:i.px(14),position:"relative",borderRadius:i.px(12),display:["inline","block"].join("-"),height:i.px(e.height),width:i.px(e.height),["&:hover "+A]:{opacity:1},[""+A]:{opacity:0}})),E=g.default(d.motion.div)(({_:e})=>({border:[i.px(1),i.color([230,230,230]),"solid"].join(" "),position:"absolute",borderRadius:"inherit",backgroundPosition:[i.percent(50),[i.percent(50)]].join(" "),backgroundRepeat:"no-repeat",height:"inherit",width:"inherit",transform:i.rotate(0),backgroundSize:"cover",backgroundImage:i.url(e.image)})),S=g.default(d.motion.div)(()=>({border:[i.px(1),i.color([230,230,230]),"solid"].join(" "),position:"absolute",borderRadius:"inherit",height:"inherit",width:"inherit",transform:i.rotate(0),display:"flex",alignItems:"center",justifyContent:"center",".MuiSvgIcon-root":{fontSize:"inherit"}})),A=g.default(r.IconButton)(()=>({position:i.important("absolute"),top:0,padding:i.important(0),transition:["opacity",i.millisecond(300)].join(" "),".MuiIconButton-label":{top:i.px(3),right:i.px(-47),position:"absolute",".MuiSvgIcon-root":{background:i.color([178,178,178]),color:i.color([234,234,234]),borderRadius:i.percent(100),fontSize:i.px(14),padding:i.px(2)}}}));class C extends a.Component{handleClickOutside(){const{files:e,onClose:t}=this.props;if(!e.length)return t()}componentDidMount(){const{onReady:e}=this.props;super.componentDidMount(),e(this)}selectFiles(){const{onClose:e}=this.props;c.tap(document.createElement("input"),t=>(t.type="file",t.multiple=!0,c.tap(t,t=>(t.click(),c.tap(t,t=>{t.addEventListener("change",e=>c.tap(e.target,e=>{if(e.files)return this.readFiles(e.files)})),t.addEventListener("blur",e)})))))}async getFile(e){return new Promise((t,n)=>c.tap(new FileReader,o=>(o.readAsArrayBuffer(e),c.tap(o,e=>{e.addEventListener("load",t),e.addEventListener("error",n)}))))}async readFile(e){if(e.target)return new Promise((t,n)=>c.tap(e.target,e=>e.readyState===FileReader.LOADING?n(new Error("File Loading")):e.readyState===FileReader.DONE&&e.result?t(e.result):n(new Error("File stream error: "+e.readyState))));throw Error("Can not read file unknown")}readFiles(e){const{onSelect:t}=this.props,n=[];for(const t of c.range(e.length)){const o=e.item(t);o&&n.push(this.getFile(o).then(e=>this.readFile(e)).then(e=>({name:o.name,size:o.size,url:URL.createObjectURL(new Blob([e],{type:o.type}))})))}Promise.all(n).then(t)}removeFile(e,t){if(t.isTrusted){const{files:t,onSelect:n}=this.props;return n(t.filter(t=>t!=e),!0)}}renderItem(e){const t=[],{showPreview:n}=this.props;if(n&&i.isFileImage(e))t.push(p.default.createElement(s.default,{key:"preview",title:e.name,placement:"top",interactive:!0,arrow:!0},p.default.createElement(E,{_:{image:e.url}})));else{const n=e.name.split(".").pop()||"",o=c.get(m.defaultStyles,n);t.push(p.default.createElement(s.default,{key:"preview",title:e.name,placement:"top",interactive:!0,arrow:!0},p.default.createElement(S,null,p.default.createElement(m.FileIcon,Object.assign({},o,{extension:n,size:48})))))}return t.push(p.default.createElement(A,{key:"close",onClick:this.removeFile.bind(null,e)},p.default.createElement(l.Close,null))),t}renderItems(){const{files:e,height:t}=this.props;return e.map((e,n)=>p.default.createElement(T,{key:n,_:{height:t}},this.renderItem(e)))}render(){const{height:e}=this.props;return p.default.createElement(y,{ref:this.anchor,_:{height:e}},p.default.createElement(f.default,{data:this.renderItems(),alignCenter:!1,alignOnResize:!1,hideArrows:!0,dragging:!0,wheel:!0,scrollToSelected:!0}))}}o.__decorate([u.Bind(),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[]),o.__metadata("design:returntype",void 0)],C.prototype,"handleClickOutside",null),o.__decorate([u.Bind(),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[]),o.__metadata("design:returntype",void 0)],C.prototype,"selectFiles",null),o.__decorate([u.Bind(),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[Blob]),o.__metadata("design:returntype",Promise)],C.prototype,"getFile",null),o.__decorate([u.Bind(),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[ProgressEvent]),o.__metadata("design:returntype",Promise)],C.prototype,"readFile",null),o.__decorate([u.Bind(),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[FileList]),o.__metadata("design:returntype",void 0)],C.prototype,"readFiles",null),o.__decorate([u.Bind(),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[Object,Object]),o.__metadata("design:returntype",void 0)],C.prototype,"removeFile",null),t.FileComponent=C,t.Connected=h.connect(({dialog:e})=>{const{composer:t}=e,{file:n}=t,{height:o}=n;return{height:o}},null,null,{forwardRef:!0})(_.default(C)),t.default=t.Connected},687:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Connected=t.LicenseComponent=void 0;const o=n(6),a=n(20),i=n(14),r=n(109),s=n(25),l=n(53),d=o.__importDefault(n(0)),c=n(17),u=o.__importDefault(n(24)).default(s.motion.div)(({_:e})=>({display:"flex",flexDirection:"column",position:"absolute",width:"100%",textAlign:"center",top:i.px(60),cursor:"pointer",color:i.color(e.color),fontSize:i.px(e.size),opacity:e.opacity}));class p extends a.Component{onClick(e){const{clickLicense:t}=this.props;e.preventDefault(),t()}render(){const{transition:e,color:t,text:n,size:o,opacity:a}=this.props;return d.default.createElement(u,{onClick:this.onClick,transition:e,_:{color:t,size:o,opacity:a},ref:this.anchor},d.default.createElement("span",{title:"Doopage v1.0.11.50939"},n))}}o.__decorate([l.Bind(),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[Object]),o.__metadata("design:returntype",void 0)],p.prototype,"onClick",null),t.LicenseComponent=p,t.Connected=c.connect(({global:e,dialog:t})=>{const{transition:n}=e,{license:o}=t,{color:a,text:i,size:r,opacity:s}=o;return{transition:n,color:a,text:i,size:r,opacity:s}},e=>({clickLicense:i.redirect(e,r.clickLicense)}),null,{forwardRef:!0})(p),t.default=t.Connected},688:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Connected=t.HeaderComponent=void 0;const o=n(6),a=n(20),i=o.__importDefault(n(689)),r=o.__importDefault(n(690)),s=o.__importDefault(n(691)),l=o.__importDefault(n(692)),d=n(14),c=n(25),u=o.__importDefault(n(0)),p=n(17),m=o.__importDefault(n(24)).default(c.motion.div)(({_:e})=>({position:"relative",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit",display:"flex",alignItems:"center",height:d.px(e.height),backgroundImage:d.linearGradient(e.backgroundColor),paddingLeft:d.px(e.padding),paddingRight:d.px(e.padding)}));class f extends a.Component{render(){const{transition:e,backgroundColor:t,height:n,padding:o,isListSeller:a,isFetching:d}=this.props;return u.default.createElement(m,{transition:e,_:{height:n,backgroundColor:t,padding:o},ref:this.anchor},a?u.default.createElement(r.default,null):u.default.createElement(l.default,null),d&&u.default.createElement(s.default,null),u.default.createElement(i.default,null))}}t.HeaderComponent=f,t.Connected=p.connect(({global:e,dialog:t,seller:n,conversation:o})=>{const{transition:a}=e,{header:i}=t,{height:r,backgroundColor:s,padding:l}=i,{receiver:d}=n,{isFetching:c}=o;return{height:r,backgroundColor:s,padding:l,transition:a,isListSeller:!d,isFetching:c}},null,null,{forwardRef:!0})(f),t.default=t.Connected},689:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Connected=t.CloseComponent=void 0;const o=n(6),a=o.__importDefault(n(202)),i=n(20),r=n(14),s=o.__importDefault(n(391)),l=n(110),d=n(87),c=n(25),u=n(53),p=o.__importDefault(n(0)),m=n(17),f=o.__importDefault(n(24)).default(c.motion.div)(({_:e})=>({position:"absolute",right:r.px(20),zIndex:e.index}));class _ extends i.Component{constructor(e){super(e),this.state={mouseX:null,mouseY:null}}openMenu(e){e.preventDefault(),this.setState({mouseX:e.clientX-2,mouseY:e.clientY-4})}closeMenu(){this.setState({mouseX:null,mouseY:null})}closeMenuAction(){const{close:e}=this.props;e(),this.closeMenu()}updateMenuAction(){a.default.clearConfigData().then(()=>location.reload()),this.closeMenu()}clearMessagesAction(){a.default.clearMessageData().then(()=>location.reload()),this.closeMenu()}resetMenuAction(){confirm("Xác nhận reset dữ liệu ?")&&a.default.clearAllData().then(()=>location.reload()),this.closeMenu()}render(){const{opened:e,transition:t,index:n}=this.props,{mouseX:o,mouseY:a}=this.state;return p.default.createElement(f,{transition:t,animate:e?"opened":"closed",variants:{opened:{opacity:1},closed:{opacity:0}},_:{transition:t,index:n},onContextMenu:this.openMenu,ref:this.anchor},p.default.createElement(s.default,null),p.default.createElement(d.Menu,{keepMounted:!0,open:null!==a,onClose:this.closeMenu,anchorReference:"anchorPosition",anchorPosition:null!==a&&null!==o?{top:a,left:o}:void 0},p.default.createElement(d.MenuItem,{onClick:this.closeMenuAction},"Đóng"),p.default.createElement(d.MenuItem,{onClick:this.updateMenuAction},"Cập Nhật Cấu Hình"),p.default.createElement(d.MenuItem,{onClick:this.clearMessagesAction},"Tải Lại Tin Nhắn"),!1))}}o.__decorate([u.Bind(),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[Object]),o.__metadata("design:returntype",void 0)],_.prototype,"openMenu",null),o.__decorate([u.Bind(),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[]),o.__metadata("design:returntype",void 0)],_.prototype,"closeMenu",null),o.__decorate([u.Bind(),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[]),o.__metadata("design:returntype",void 0)],_.prototype,"closeMenuAction",null),o.__decorate([u.Bind(),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[]),o.__metadata("design:returntype",void 0)],_.prototype,"updateMenuAction",null),o.__decorate([u.Bind(),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[]),o.__metadata("design:returntype",void 0)],_.prototype,"clearMessagesAction",null),o.__decorate([u.Bind(),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[]),o.__metadata("design:returntype",void 0)],_.prototype,"resetMenuAction",null),t.CloseComponent=_,t.Connected=m.connect(({global:e,launcher:t})=>{const{opened:n}=t,{transition:o,index:a,position:i,defaultPosition:r}=e,{openedIcon:s,closedIcon:l}=t,{size:d}=s,{size:c}=l,{height:u}=null!==i?i:r;return{opened:n,height:u,index:a+1,size:d-c,transition:o}},e=>({close:r.redirect(e,l.close)}),null,{forwardRef:!0})(_),t.default=t.Connected},690:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Connected=t.ListSellerComponent=void 0;const o=n(6),a=n(20),i=o.__importDefault(n(392)),r=n(14),s=n(25),l=n(31),d=o.__importDefault(n(0)),c=n(17),u=o.__importDefault(n(24)).default(s.motion.div)(()=>({display:"flex",flexDirection:"row",marginLeft:r.px(5)}));class p extends a.Component{render(){const{transition:e,sellers:t}=this.props;return d.default.createElement(u,{transition:e,ref:this.anchor},t.map((e,n)=>d.default.createElement(i.default,{sid:e,key:e,inList:!!n,dot:n===t.length-1})))}}t.ListSellerComponent=p,t.Connected=c.connect(({global:e,seller:t})=>{const{transition:n}=e,{sellers:o}=t,a=l.sortBy(l.keys(o).filter(e=>o[e].isOnline).map(Number),e=>o[e].avatar).slice(0,3);return a.length<1&&a.push(null),{transition:n,sellers:a}},null,null,{forwardRef:!0})(p),t.default=t.Connected},691:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Connected=t.LoadingComponent=void 0;const o=n(6),a=n(20),i=n(14),r=n(25),s=o.__importDefault(n(0)),l=n(17),d=o.__importStar(n(24)),c=d.keyframes({"0%":{transform:"translate(0, 0)"},"50%":{transform:`translate(0, ${i.px(15)})`},"100%":{transform:"translate(0, 0)"}}),u=d.default(r.motion.div)(({_:e})=>({position:"absolute",width:i.px(3*e.size+12),height:i.px(e.size),left:`calc(50% - ${(3*e.size+12)/2}px)`,top:`calc(50% + ${(3*e.size+20)/2}px)`})),p=d.default(r.motion.div)(({_:e})=>({position:"relative",borderRadius:"50%",display:"inline-block",marginLeft:i.px(2),marginRight:i.px(2),width:i.px(e.size),height:i.px(e.size),backgroundColor:i.color(e.color)})),m=d.default(p)(()=>({}),d.css`animation: ${c} .6s .1s linear infinite;`),f=d.default(p)(()=>({}),d.css`animation: ${c} .6s .2s linear infinite;`),_=d.default(p)(()=>({}),d.css`animation: ${c} .6s .3s linear infinite;`);class h extends a.Component{render(){const{transition:e}=this.props,t=[255,228,100];return s.default.createElement(u,{transition:e,_:{size:12},ref:this.anchor},s.default.createElement(m,{_:{size:12,color:t}}),s.default.createElement(f,{_:{size:12,color:t}}),s.default.createElement(_,{_:{size:12,color:t}}))}}t.LoadingComponent=h,t.Connected=l.connect(({global:e})=>{const{transition:t}=e;return{transition:t}},null,null,{forwardRef:!0})(h),t.default=t.Connected},692:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Connected=t.SellerComponent=void 0;const o=n(6),a=n(20),i=o.__importDefault(n(392)),r=o.__importDefault(n(693)),s=n(25),l=o.__importDefault(n(0)),d=n(17),c=o.__importDefault(n(24)).default(s.motion.div)(()=>({display:"flex",flexDirection:"row"}));class u extends a.Component{render(){const{transition:e,sid:t}=this.props;return l.default.createElement(c,{transition:e,ref:this.anchor},l.default.createElement(i.default,{sid:t}),l.default.createElement(r.default,null))}}t.SellerComponent=u,t.Connected=d.connect(({global:e,seller:t})=>{const{transition:n}=e,{receiver:o}=t;return{transition:n,sid:o||-1}},null,null,{forwardRef:!0})(u),t.default=t.Connected},693:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Connected=t.InfoComponent=void 0;const o=n(6),a=n(20),i=n(14),r=n(25),s=o.__importDefault(n(0)),l=n(17),d=o.__importDefault(n(24)),c=d.default(r.motion.div)(()=>({display:"flex",flexDirection:"column"})),u=d.default(r.motion.div)(({_:e})=>{var t;return{position:"relative",fontSize:i.px(e.size),fontWeight:null!==(t=e.weight)&&void 0!==t?t:"normal",color:i.color(e.color),marginTop:i.px(e.top),marginLeft:e.dot?i.px(15):0,"&:before":e.dot?{content:i.empty(),position:"absolute",height:i.px(10),width:i.px(10),left:i.px(-15),bottom:i.px(3),borderRadius:"100%",backgroundColor:i.color(e.dot)}:{}}});class p extends a.Component{constructor(e){super(e),this.state={date:new Date,updateLastActiveLooper:null}}componentDidMount(){super.componentDidMount();const e=setInterval(()=>{const e=new Date;this.setState({date:e})},1e3);this.setState({updateLastActiveLooper:e})}componentWillUnmount(){super.componentWillUnmount();const{updateLastActiveLooper:e}=this.state;e&&clearInterval(e)}getLastActive(){const{seller:e}=this.props,{isOnline:t,lastActive:n}=e,{date:o}=this.state;if(t)return[[76,175,80],"Online"];if(!n)return[[195,55,0],"Offline"];const a=~~((o.getTime()-n.getTime())/6e4);switch(!0){case a>60:return[[195,55,0],"Offline"];default:return[[195,195,195],a+" phút trước"]}}render(){const{transition:e,colorName:t,colorLastActive:n,sizeName:o,sizeLastActive:a,seller:i}=this.props;if(i){const{name:r}=i,[l,d]=this.getLastActive();return s.default.createElement(c,{transition:e,ref:this.anchor},s.default.createElement(u,{transition:e,_:{size:o,weight:"bold",color:t}},r),s.default.createElement(u,{transition:e,_:{size:a,top:5,dot:l,color:n}},d))}return null}}t.InfoComponent=p,t.Connected=l.connect(({global:e,dialog:t,seller:n})=>{const{transition:o}=e,{header:a}=t,{info:i}=a,{name:r,lastActive:s}=i,{color:l,size:d}=r,{color:c,size:u}=s,{sellers:p,receiver:m}=n;return{transition:o,colorName:l,sizeName:d,colorLastActive:c,sizeLastActive:u,seller:p[m||0]}},null,null,{forwardRef:!0})(p),t.default=t.Connected},694:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Connected=t.LauncherComponent=void 0;const o=n(6),a=n(20),i=n(14),r=o.__importDefault(n(391)),s=o.__importDefault(n(695)),l=n(72),d=n(110),c=n(25),u=n(53),p=o.__importDefault(n(0)),m=n(17),f=o.__importDefault(n(24)).default(c.motion.div)(({_:e})=>({position:"fixed",left:i.pxOrAuto(e.left),right:i.pxOrAuto(e.right),top:i.pxOrAuto(e.top),bottom:i.pxOrAuto(e.bottom),zIndex:e.index}));class _ extends a.Component{constructor(e){super(e),this.lastTime=0,this.state={}}componentDidMount(){const{api:e,open:t}=this.props;super.componentDidMount(),e&&e.isDialogOpened().then(e=>e&&t())}logEvent(e){this.lastTime=e.timeStamp}filterClick(e){return e.timeStamp-this.lastTime>1e3}render(){const{opened:e,left:t,right:n,top:o,bottom:a,transition:i,index:l}=this.props;return p.default.createElement(f,{transition:i,drag:!e,dragElastic:0,dragMomentum:!1,dragConstraints:{top:-(null!=o?o:540)-10,left:-(null!=t?t:740)-10,right:(null!=n?n:0)-10,bottom:(null!=a?a:0)-10},onDrag:this.logEvent,animate:e?"opened":"closed",variants:{opened:{opacity:0},closed:{opacity:1}},_:{left:t,right:n,top:o,bottom:a,transition:i,index:l},ref:this.anchor},p.default.createElement(s.default,null),p.default.createElement(r.default,{filterClick:this.filterClick}))}}o.__decorate([u.Bind(),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[Event]),o.__metadata("design:returntype",void 0)],_.prototype,"logEvent",null),o.__decorate([u.Bind(),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[Object]),o.__metadata("design:returntype",Boolean)],_.prototype,"filterClick",null),t.LauncherComponent=_,t.Connected=m.connect(({backend:e,global:t,launcher:n})=>{const{api:o}=e,{opened:a}=n,{transition:i,index:r,position:s,defaultPosition:l}=t,{openedIcon:d,closedIcon:c}=n,{size:u}=d,{size:p}=c,{top:m,left:f,right:_,bottom:h,height:g}=null!==s?s:l;return{api:o,left:f,right:_,top:m,bottom:h,opened:a,height:g,index:r+1,size:u-p,transition:i}},e=>({init:i.redirect(e,l.attachLauncher),open:i.redirect(e,d.open)}),null,{forwardRef:!0})(_),t.default=t.Connected},695:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Connected=t.PreviewComponent=void 0;const o=n(6),a=n(20),i=n(14),r=o.__importDefault(n(696)),s=o.__importDefault(n(697)),l=n(72),d=n(25),c=o.__importDefault(n(0)),u=n(17),p=o.__importDefault(n(24)).default(d.motion.div)(({_:e})=>({position:"fixed",userSelect:"none",boxShadow:[0,i.px(5),i.px(30),i.color([0,0,0,.15])].join(" "),flexDirection:"column",justifyContent:"space-between",width:i.px(e.width),height:i.px(e.height),left:i.pxOrAuto(e.left),right:i.pxOrAuto(e.right),top:i.pxOrAuto(e.top),bottom:i.pxOrAuto(e.bottom),borderRadius:i.px(e.radius),backgroundColor:i.color(e.backgroundColor),zIndex:e.index}));class m extends a.Component{render(){const{transition:e,backgroundColor:t,left:n,right:o,top:a,bottom:i,radius:l,opened:d,width:u,height:m,index:f,isShow:_}=this.props;return _?c.default.createElement(p,{transition:e,animate:d?"opened":"closed",variants:{opened:{x:u,y:0,opacity:0,display:"none",transition:{y:{stiffness:1e3}}},closed:{x:0,y:0,opacity:1,display:"flex",transition:{y:{stiffness:1e3,velocity:-100}}}},_:{left:n,right:o,top:a,bottom:i,radius:l,backgroundColor:t,width:u,height:m,index:f+3},ref:this.anchor},c.default.createElement(s.default,null),c.default.createElement(r.default,null)):null}}t.PreviewComponent=m,t.Connected=u.connect(({global:e,launcher:t,preview:n})=>{const{transition:o,index:a,position:i,defaultPosition:r}=e,{backgroundColor:s,radius:l,message:d}=n,{opened:c}=t,{top:u,left:p,right:m,bottom:f,height:_,width:h}=null!==i?i:r;return{backgroundColor:s,radius:l,left:p,right:m,top:u,bottom:f,opened:c,width:h,height:_,index:a,transition:o,isShow:!!d}},e=>({init:i.redirect(e,l.attachPreview)}),null,{forwardRef:!0})(m),t.default=t.Connected},696:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Connected=t.ButtonComponent=void 0;const o=n(6),a=n(20),i=n(14),r=n(25),s=o.__importDefault(n(0)),l=n(17),d=o.__importDefault(n(24)),c=d.default(r.motion.div)(({_:e})=>({width:"100%",cursor:"pointer",borderTopLeftRadius:0,borderTopRightRadius:0,borderBottomLeftRadius:"inherit",borderBottomRightRadius:"inherit",display:"flex",flex:"1 1 auto",justifyContent:"center",alignItems:"center",borderTop:[i.px(1),"solid",i.color([240,240,240])].join(" "),backgroundColor:i.color(e.backgroundColor)})),u=d.default(r.motion.span)(({_:e})=>({fontSize:i.px(e.size),color:i.color(e.color)}));class p extends a.Component{render(){const{transition:e,color:t,backgroundColor:n,text:o,size:a}=this.props;return s.default.createElement(c,{transition:e,_:{backgroundColor:n},ref:this.anchor},s.default.createElement(u,{transition:e,_:{size:a,color:t}},o))}}t.ButtonComponent=p,t.Connected=l.connect(({global:e,preview:t})=>{const{transition:n}=e,{button:o,backgroundColor:a}=t,{text:i,size:r}=o,{text:s,color:l}=i;return{transition:n,color:l,backgroundColor:a,text:s,size:r}},null,null,{forwardRef:!0})(p),t.default=t.Connected},697:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Connected=t.CardComponent=void 0;const o=n(6),a=n(77),i=n(20),r=n(14),s=o.__importDefault(n(698)),l=n(25),d=o.__importDefault(n(0)),c=n(17),u=o.__importDefault(n(24)),p=u.default(l.motion.div)(({_:e})=>({width:`calc(100% - ${2*e.padding}px)`,display:"flex",backgroundColor:r.color(e.backgroundColor),height:e.height,margin:r.px(e.padding)})),m=u.default(l.motion.img)(({_:e})=>({border:[r.px(1),"solid",r.color([31,54,90,.1])].join(" "),borderRadius:"100%",marginRight:r.px(e.padding),height:r.px(e.size),width:r.px(e.size)})),f=u.default(l.motion.div)(({_:e})=>({fontSize:"1.23em",borderRadius:"100%",justifyContent:"center",alignItems:"center",display:"flex",height:r.px(e.size),width:r.px(e.size),color:e.color,backgroundColor:e.backgroundColor}));class _ extends i.Component{render(){const{transition:e,height:t,backgroundColor:n,padding:o,closeIcon:i,message:l}=this.props;if(l){const{sender:c}=l,{avatar:u}=c;return d.default.createElement(p,{transition:e,_:{height:t,backgroundColor:n,padding:o},ref:this.anchor},d.default.createElement(m,{src:null!=u?u:a.Image.AvatarDefault,alt:"Avatar",_:{size:45,padding:15}}),d.default.createElement(s.default,null),d.default.createElement(f,{_:{size:22,color:r.color([0,0,0]),backgroundColor:r.color([229,229,229])}},i))}return null}}t.CardComponent=_,t.Connected=c.connect(({global:e,preview:t})=>{const{transition:n}=e,{backgroundColor:o,closeIcon:a,height:i,padding:r,message:s}=t;return{height:i,padding:r,transition:n,backgroundColor:o,closeIcon:a,message:s}},null,null,{forwardRef:!0})(_),t.default=t.Connected},698:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Connected=t.ContentComponent=void 0;const o=n(6),a=n(20),i=n(14),r=n(55),s=n(25),l=o.__importDefault(n(0)),d=n(17),c=o.__importDefault(n(24)),u=c.default(s.motion.div)(()=>({display:"flex",flex:"1 1 0",flexDirection:"column"})),p=c.default(s.motion.span)(({_:e})=>({fontSize:i.px(e.size),color:i.color(e.color),fontWeight:e.bold?"bold":"inherit"}));class m extends a.Component{getMessage(){var e;const{message:t,content:n}=this.props,{maxLength:o}=n;if(t){const{sender:n,message:a}=t;let i;if(a.text)i=a.text;else switch(null===(e=a.attachment)||void 0===e?void 0:e.type){case r.MessageAttachmentType.Image:i=n.name+" đã gửi cho bạn một hình ảnh";break;case r.MessageAttachmentType.RequestInfo:i=n.name+" đang mong nhận được thông tin về bạn"}if(i)return i.length>o&&(i=i.substr(0,i.lastIndexOf(" ",o-4))+" ..."),i}return""}render(){const{transition:e,title:t,content:n}=this.props,{size:o,color:a}=t,{size:i,color:r}=n,s=this.getMessage();return s?l.default.createElement(u,{transition:e,ref:this.anchor},l.default.createElement(p,{transition:e,_:{size:o,color:a,bold:!1}},name),l.default.createElement(p,{transition:e,_:{size:i,color:r,bold:!0}},s)):null}}t.ContentComponent=m,t.Connected=d.connect(({global:e,preview:t})=>{const{transition:n}=e,{message:o,title:a,content:i}=t;return{transition:n,message:o,title:a,content:i}},null,null,{forwardRef:!0})(m),t.default=t.Connected},699:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Connected=t.WorkerComponent=void 0;const o=n(6),a=n(20),i=n(14),r=n(162),s=o.__importDefault(n(318)),l=n(31),d=o.__importDefault(n(0)),c=n(17);class u extends a.Component{constructor(e){super(e),this.http=s.default.create({})}componentDidMount(){const{addAll:e}=this.props;super.componentDidMount(),e()}render(){const{library:e}=this.props;return d.default.createElement("div",null,l.toPairs(e).map(([e,t])=>d.default.createElement("div",{key:e},t.stream)))}async preload(e){if(e&&this.http){const t=await this.http({method:"GET",url:e,responseType:"blob"});return URL.createObjectURL(new Blob([t.data]))}}}t.WorkerComponent=u,t.Connected=c.connect(({audio:e})=>{const{library:t}=e;return{library:t}},e=>({init:i.redirect(e,r.attachWorker),addAll:i.redirect(e,r.addAll)}),null,{forwardRef:!0})(u),t.default=t.Connected},700:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Connected=t.WorkerComponent=void 0;const o=n(6),a=n(20),i=n(14),r=n(132),s=o.__importDefault(n(0)),l=n(17);class d extends a.Component{get isReady(){return"granted"===Notification.permission}componentDidMount(){const{forceRequestNotification:e}=this.props;super.componentDidMount(),e&&this.requestPermission()}requestPermission(){Notification.requestPermission().then(e=>{e})}notify(e,t){return this.isReady?new Notification(e,t):null}render(){return s.default.createElement(s.default.Fragment,null)}}t.WorkerComponent=d,t.Connected=l.connect(({notification:e})=>{const{forceRequestNotification:t}=e;return{forceRequestNotification:t}},e=>({init:i.redirect(e,r.attachWorker),requestPermission:i.redirect(e,r.requestPermission)}),null,{forwardRef:!0})(d),t.default=t.Connected},701:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Connected=t.Worker=void 0;const o=n(14),a=n(230),i=n(393),r=n(17);t.Worker=i.withSnackbar(e=>{const{init:t,enqueueSnackbar:n,closeSnackbar:o}=e;return t({enqueueSnackbar:n,closeSnackbar:o}),null}),t.Connected=r.connect(({audio:e})=>{const{library:t}=e;return{library:t}},e=>({init:o.redirect(e,a.attachPipe)}),null,{forwardRef:!0})(t.Worker),t.default=t.Connected},702:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionType=void 0;const o=n(6),a=n(14),i=o.__importDefault(n(47));var r;!function(e){e[e.ATTACH_PIPE=0]="ATTACH_PIPE",e[e.SHOW_NOTIFY=1]="SHOW_NOTIFY"}(r=t.ActionType||(t.ActionType={})),a.InjectEnum(r,i.default.SNACKBAR)},703:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(6),a=o.__importDefault(n(395)),i=o.__importDefault(n(47)),r=n(705),s=n(719),l=n(228),d=new s.Session("LiveChat",r.reducer,a.default,l.rootInit,[i.default.ME,i.default.CHAT]);t.default=d},704:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionType=void 0;const o=n(6),a=n(14),i=o.__importDefault(n(47));var r;!function(e){e[e.OPEN=0]="OPEN",e[e.CLOSE=1]="CLOSE"}(r=t.ActionType||(t.ActionType={})),a.InjectEnum(r,i.default.PREVIEW)},705:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reducer=void 0;const o=n(6),a=o.__importDefault(n(706)),i=o.__importDefault(n(707)),r=o.__importDefault(n(708)),s=o.__importDefault(n(709)),l=o.__importDefault(n(710)),d=o.__importDefault(n(711)),c=o.__importDefault(n(712)),u=o.__importDefault(n(713)),p=o.__importDefault(n(714)),m=o.__importDefault(n(715)),f=o.__importDefault(n(716)),_=o.__importDefault(n(717)),h=o.__importDefault(n(718));t.reducer={backend:r.default,audio:i.default,notification:m.default,snackbar:h.default,anchor:a.default,global:c.default,launcher:u.default,conversation:l.default,preview:f.default,dialog:d.default,seller:_.default,chat:s.default,me:p.default}},706:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reducer=void 0;const o=n(6),a=n(56),i=o.__importDefault(n(72));t.reducer=(e,t,n)=>{const{type:o}=t,r=i.default[o];return r.constructor===a.NormalFunction?r(e,t,n):e.anchor},t.default=t.reducer},707:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reducer=void 0;const o=n(6),a=n(56),i=o.__importDefault(n(162));t.reducer=(e,t,n)=>{const{type:o}=t,r=i.default[o];return r.constructor===a.NormalFunction?r(e,t,n):e.audio},t.default=t.reducer},708:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reducer=void 0;const o=n(6),a=n(56),i=o.__importDefault(n(229));t.reducer=(e,t,n)=>{const{type:o}=t,r=i.default[o];return r.constructor===a.NormalFunction?r(e,t,n):e.backend},t.default=t.reducer},709:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reducer=void 0;const o=n(6),a=n(56),i=o.__importDefault(n(94));t.reducer=(e,t,n)=>{const{type:o}=t,r=i.default[o];return r.constructor===a.NormalFunction?r(e,t,n):e.chat},t.default=t.reducer},710:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reducer=void 0;const o=n(6),a=n(56),i=o.__importDefault(n(107));t.reducer=(e,t,n)=>{const{type:o}=t,r=i.default[o];return r.constructor===a.NormalFunction?r(e,t,n):e.conversation},t.default=t.reducer},711:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reducer=void 0;const o=n(6),a=n(56),i=o.__importDefault(n(109));t.reducer=(e,t,n)=>{const{type:o}=t,r=i.default[o];return r.constructor===a.NormalFunction?r(e,t,n):e.dialog},t.default=t.reducer},712:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reducer=void 0;const o=n(6),a=n(56),i=o.__importDefault(n(86));t.reducer=(e,t,n)=>{const{type:o}=t,r=i.default[o];return r.constructor===a.NormalFunction?r(e,t,n):e.global},t.default=t.reducer},713:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reducer=void 0;const o=n(6),a=n(56),i=o.__importDefault(n(110));t.reducer=(e,t,n)=>{const{type:o}=t,r=i.default[o];return r.constructor===a.NormalFunction?r(e,t,n):e.launcher},t.default=t.reducer},714:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reducer=void 0;const o=n(6),a=n(56),i=o.__importDefault(n(133));t.reducer=(e,t,n)=>{const{type:o}=t,r=i.default[o];return r.constructor===a.NormalFunction?r(e,t,n):e.me},t.default=t.reducer},715:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reducer=void 0;const o=n(6),a=n(56),i=o.__importDefault(n(132));t.reducer=(e,t,n)=>{const{type:o}=t,r=i.default[o];return r.constructor===a.NormalFunction?r(e,t,n):e.notification},t.default=t.reducer},716:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reducer=void 0;const o=n(6),a=n(56),i=o.__importDefault(n(396));t.reducer=(e,t,n)=>{const{type:o}=t,r=i.default[o];return r.constructor===a.NormalFunction?r(e,t,n):e.preview},t.default=t.reducer},717:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reducer=void 0;const o=n(6),a=n(56),i=o.__importDefault(n(108));t.reducer=(e,t,n)=>{const{type:o}=t,r=i.default[o];return r.constructor===a.NormalFunction?r(e,t,n):e.seller},t.default=t.reducer},718:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reducer=void 0;const o=n(6),a=n(56),i=o.__importDefault(n(230));t.reducer=(e,t,n)=>{const{type:o}=t,r=i.default[o];return r.constructor===a.NormalFunction?r(e,t,n):e.snackbar},t.default=t.reducer},719:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Session=void 0;const o=n(6),a=n(56),i=o.__importDefault(n(395)),r=o.__importStar(n(231)),s=n(31),l=n(53),d=n(136),c=n(720),u=o.__importDefault(n(721)),p=n(67),m=o.__importDefault(n(722));class f{constructor(e,t,n,o,a){this.key=e,this.reducer=t,this.rootAction=n,this.init=o,this.config={},this.syncKeys=a,this.saga=u.default()}get data(){const e=(t,n)=>s.isObject(t)&&s.isObject(n)?s.assignWith({},t,n,e):((s.isObject(t)||s.isObject(n))&&s.assign({},t,n),(s.isUndefined(t)||s.isUndefined(n))&&s.isUndefined(n)?t:n);return e(this.init,this.config)}static getRoot(e){const t=s.get(e,f.storeSymbol);return t||null}static getDispatch(e){const t=this.getRoot(e);return t?t.dispatch:null}createReducers(){return(e,t)=>{for(const[n,o]of s.toPairs(i.default))if(s.has(o,t.type)){const o=this.reducer[n];if("function"==typeof o){const a=s.clone(e);return s.set(a,n,o(e,t,f.getRoot(e))),a}}return e}}runSaga(){const e=[];for(const t of s.values(this.rootAction))for(const n of[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)]){const o=t[n];"function"==typeof o&&o.constructor===a.GeneratorFunction&&e.push([n,o])}const t=this.store;this.saga.run((function*(){for(const[n,o]of e)yield p.takeEvery(({type:e})=>e===n,(function*(e){if(!t)throw new Error;try{yield*o(t.getState(),e,t)}catch(e){console.error(e),r.captureException(e)}}))}))}createStore(e={},t=!1){var n;if(this.config=e,!this.store){const e=window,o=t&&null!==(n=e.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__)&&void 0!==n?n:d.compose,a=[m.default];this.saga&&a.push(this.saga),t&&a.push(c.createLogger({duration:!0,level:"log",collapsed:!0})),this.store=this.attachSymbol(d.createStore(this.createReducers(),this.data,o(d.applyMiddleware(...a)))),this.runSaga()}return this.store}getStore(){return this.store||null}attachSymbol(e){return s.set(e.getState(),f.storeSymbol,e),e}}f.storeSymbol=Symbol("Store"),o.__decorate([l.Once(),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[]),o.__metadata("design:returntype",Function)],f.prototype,"createReducers",null),o.__decorate([l.Once(),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[]),o.__metadata("design:returntype",void 0)],f.prototype,"runSaga",null),o.__decorate([l.Once(),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[Object,Object]),o.__metadata("design:returntype",Object)],f.prototype,"createStore",null),t.Session=f},72:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapHandler=t.attachMessageHandler=t.attachMessage=t.attachConversationHandler=t.attachConversation=t.attachChatHandler=t.attachChat=t.attachDialogHandler=t.attachDialog=t.attachPreviewHandler=t.attachPreview=t.attachLauncherHandler=t.attachLauncher=t.attachRootHandler=t.attachRoot=t.attachGlobalHandler=t.attachGlobal=void 0;const o=n(677);t.attachGlobal=e=>({type:o.ActionType.ATTACH_GLOBAL,global:e}),t.attachGlobalHandler=({anchor:e},{global:t})=>(e.global=t,e),t.attachRoot=e=>({type:o.ActionType.ATTACH_ROOT,root:e}),t.attachRootHandler=({anchor:e},{root:t})=>(e.root=t,e),t.attachLauncher=e=>({type:o.ActionType.ATTACH_LAUNCHER,launcher:e}),t.attachLauncherHandler=({anchor:e},{launcher:t})=>(e.launcher=t,e),t.attachPreview=e=>({type:o.ActionType.ATTACH_PREVIEW,preview:e}),t.attachPreviewHandler=({anchor:e},{preview:t})=>(e.preview=t,e),t.attachDialog=e=>({type:o.ActionType.ATTACH_DIALOG,dialog:e}),t.attachDialogHandler=({anchor:e},{dialog:t})=>(e.dialog=t,e),t.attachChat=e=>({type:o.ActionType.ATTACH_CHAT,chat:e}),t.attachChatHandler=({anchor:e},{chat:t})=>(e.chat=t,e),t.attachConversation=e=>({type:o.ActionType.ATTACH_CONVERSATION,conversation:e}),t.attachConversationHandler=({anchor:e},{conversation:t})=>(e.conversation=t,e),t.attachMessage=e=>({type:o.ActionType.ATTACH_MESSAGE,message:e}),t.attachMessageHandler=({anchor:e},{message:t})=>{const{conversation:n}=e;return n&&n.attachMessage(t),e},t.mapHandler={[o.ActionType.ATTACH_GLOBAL]:t.attachGlobalHandler,[o.ActionType.ATTACH_ROOT]:t.attachRootHandler,[o.ActionType.ATTACH_LAUNCHER]:t.attachLauncherHandler,[o.ActionType.ATTACH_PREVIEW]:t.attachPreviewHandler,[o.ActionType.ATTACH_DIALOG]:t.attachDialogHandler,[o.ActionType.ATTACH_CHAT]:t.attachChatHandler,[o.ActionType.ATTACH_CONVERSATION]:t.attachConversationHandler,[o.ActionType.ATTACH_MESSAGE]:t.attachMessageHandler},t.default=t.mapHandler},77:function(e,t,n){"use strict";var o;Object.defineProperty(t,"__esModule",{value:!0}),t.Audio=t.Image=t.Icon=t.CDN=void 0;const a=n(6),i=a.__importDefault(n(656)),r=a.__importDefault(n(657)),s=a.__importDefault(n(658)),l=a.__importDefault(n(659)),d=a.__importDefault(n(660)),c=a.__importDefault(n(661)),u=a.__importDefault(n(662)),p=a.__importDefault(n(0));t.CDN=new URL(null===(o=window.document.currentScript)||void 0===o?void 0:o.src).href.replace(/^(.*)\/(.*?)\.js$/,"$1/"),t.Icon={Close:p.default.createElement(l.default,{fontSize:"inherit"}),Edit:p.default.createElement(u.default,{fontSize:"inherit"}),Send:p.default.createElement(u.default,{fontSize:"inherit"}),Doopage:p.default.createElement(i.default,{fontSize:"inherit"}),MessageLocal:p.default.createElement(c.default,{fontSize:"inherit"}),MessagePushed:p.default.createElement(s.default,{fontSize:"inherit"}),MessageSent:p.default.createElement(r.default,{fontSize:"inherit"}),Error:p.default.createElement(d.default,{fontSize:"inherit"})},t.Image={Doopage:t.CDN+"/images/doopage.png",AvatarDefault:t.CDN+"/images/avatar.png"},t.Audio={MessageSystem:t.CDN+"/audios/message_system.mp3",MessageSeller:t.CDN+"/audios/message_seller.mp3",MessageSent:t.CDN+"/audios/message_sent.mp3"}},86:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapHandler=t.runJobScheduleHandler=t.startJobSchedule=t.runJobSchedule=t.updateIsTabActiveHandler=t.updateIsTabActive=t.fetchConfigHandler=t.fetchConfig=t.fetchConfigDoneHandler=t.fetchConfigDone=t.updatePartnerHandler=t.updatePartner=t.processErrorHandler=t.processError=t.hiddenHandler=t.hidden=t.showHandler=t.show=t.updateCompanyAndApiHandler=t.updateCompanyAndApi=t.updateCompanyHandler=t.updateCompany=t.updateTextColorHandler=t.updateTextColor=t.updatePrimaryColorHandler=t.updatePrimaryColor=t.computePositionHandler=t.computePosition=void 0;const o=n(6),a=o.__importDefault(n(663)),i=n(14),r=o.__importDefault(n(666)),s=n(163),l=n(161),d=n(94),c=n(55),u=n(107),p=n(109),m=n(670),f=n(110),_=n(31),h=n(67);t.computePosition=()=>({type:m.ActionType.COMPUTE_POSITION}),t.computePositionHandler=({global:e,launcher:t})=>{const{defaultPosition:n}=e,{openedIcon:o}=t,{size:a}=o,{top:i,left:r,right:s,bottom:l}=n;let{height:d,width:c}=n;const u=c+a+(null!=r?r:0)+(null!=s?s:0)+20,p=d+a+(null!=i?i:0)+(null!=l?l:0)+20,m=window.innerWidth-u,f=window.innerHeight-p;return m<20&&(c=c+m-20),f<20&&(d=d+f-20),e.position={top:i,bottom:l,left:r,right:s,height:d,width:c},e},t.updatePrimaryColor=e=>({type:m.ActionType.UPDATE_PRIMARY_COLOR,color:e}),t.updatePrimaryColorHandler=function*({global:e},{color:t}){e.color=t,yield h.put(f.updateBackgroundColor(t)),yield h.put(p.updateHeaderColor(t))},t.updateTextColor=e=>({type:m.ActionType.UPDATE_TEXT_COLOR,color:e}),t.updateTextColorHandler=function*(e,{color:t}){yield h.put(f.updateIconColor(t))},t.updateCompany=e=>({type:m.ActionType.UPDATE_COMPANY,company:e}),t.updateCompanyHandler=({global:e},{company:t})=>(e.company=t,e),t.updateCompanyAndApi=e=>({type:m.ActionType.UPDATE_COMPANY_AND_API,company:e}),t.updateCompanyAndApiHandler=function*({backend:e},{company:n}){const{api:o}=e;yield h.put(t.updateCompany(n)),o||(yield h.take(l.ActionType.ATTACH_API))},t.show=()=>({type:m.ActionType.SHOW}),t.showHandler=({global:e})=>(e.show=!0,e),t.hidden=()=>({type:m.ActionType.HIDDEN}),t.hiddenHandler=({global:e})=>(e.show=!1,e),t.processError=e=>({type:m.ActionType.PROCESS_ERROR,error:e}),t.processErrorHandler=function*(e,{error:t}){const n=_.get(a.default,i.firstCamelCase(t.code));s.Pixel.event("user_encountered_error",t),n&&(yield*n(t))},t.updatePartner=e=>({type:m.ActionType.UPDATE_PARTNER,partner:e}),t.updatePartnerHandler=function*(e,{partner:t}){const n=_.get(r.default,i.firstCamelCase(t));n&&(yield*n())},t.fetchConfigDone=e=>({type:m.ActionType.FETCH_CONFIG_DONE,data:e}),t.fetchConfigDoneHandler=function*(e,{data:n}){const{id:o,name:a,avatar:r,primary_color:s,text_color:l,partner:d,license_text:c}=n;yield h.put(t.updatePrimaryColor(i.parseColor(s))),yield h.put(t.updateTextColor(i.parseColor(l))),yield h.put(t.updateCompanyAndApi({id:o,name:a})),yield h.put(u.updateSystemName(a)),d&&(yield h.put(t.updatePartner(d))),r&&(yield h.put(f.useCustomLogo(r)),yield h.put(u.useCustomLogo(r))),c&&(yield h.put(p.updateLicenseText(c))),yield h.put(t.show())},t.fetchConfig=()=>({type:m.ActionType.FETCH_CONFIG}),t.fetchConfigHandler=function*({backend:e}){const{api:n}=e;if(n){const e=yield h.call([n,n.getConfig]);return e.error?void(yield h.put(t.processError(e))):void(yield h.put(t.fetchConfigDone(e)))}throw new Error},t.updateIsTabActive=()=>({type:m.ActionType.UPDATE_IS_TAB_ACTIVE,isTabActive:!document.hidden}),t.updateIsTabActiveHandler=({global:e},{isTabActive:t})=>(e.isTabActive=t,e),t.runJobSchedule=e=>({type:m.ActionType.RUN_JOB_SCHEDULE,data:e}),t.startJobSchedule=()=>t.runJobSchedule({}),t.runJobScheduleHandler=(e,n,o)=>{const{global:a,launcher:i,chat:r}=e,{data:s}=n,{backgroundJobId:l,autoSendRequestInfoAfter:u}=a,{opened:p}=i,{conversation:m}=r,{messages:f}=m;return clearTimeout(l),p&&u>0&&!s.scheduleSentRequestInfo&&_.keys(f).length>0&&(_.values(f).some(e=>{var t;return(null===(t=e.message.attachment)||void 0===t?void 0:t.type)===c.MessageAttachmentType.RequestInfo})||_.values(f).some(e=>e.sender.type===c.SenderType.Me)&&(s.scheduleSentRequestInfo=setTimeout(()=>{o.dispatch(d.systemSendRequestInfo())},u))),a.backgroundJobId=setTimeout(()=>t.runJobScheduleHandler(e,n,o),1e3),a},t.mapHandler={[m.ActionType.UPDATE_PRIMARY_COLOR]:t.updatePrimaryColorHandler,[m.ActionType.UPDATE_TEXT_COLOR]:t.updateTextColorHandler,[m.ActionType.UPDATE_COMPANY]:t.updateCompanyHandler,[m.ActionType.UPDATE_COMPANY_AND_API]:t.updateCompanyAndApiHandler,[m.ActionType.COMPUTE_POSITION]:t.computePositionHandler,[m.ActionType.SHOW]:t.showHandler,[m.ActionType.HIDDEN]:t.hiddenHandler,[m.ActionType.PROCESS_ERROR]:t.processErrorHandler,[m.ActionType.UPDATE_PARTNER]:t.updatePartnerHandler,[m.ActionType.FETCH_CONFIG_DONE]:t.fetchConfigDoneHandler,[m.ActionType.FETCH_CONFIG]:t.fetchConfigHandler,[m.ActionType.UPDATE_IS_TAB_ACTIVE]:t.updateIsTabActiveHandler,[m.ActionType.RUN_JOB_SCHEDULE]:t.runJobScheduleHandler},t.default=t.mapHandler},94:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapHandler=t.checkLastMessageTimeHandler=t.checkLastMessageTime=t.markMessageSentHandler=t.markMessageSent=t.markMessagePushedHandler=t.markMessagePushed=t.meSendResponseInfoHandler=t.meSendResponseInfo=t.meSendFileHandler=t.meSendFile=t.meSendImageHandler=t.meSendImage=t.meSendTextHandler=t.meSendText=t.sellerSendFileHandler=t.sellerSendFile=t.sellerSendImageHandler=t.sellerSendImage=t.sellerSendTextHandler=t.sellerSendText=t.systemSendRequestInfoHandler=t.systemSendRequestInfo=t.systemSendFileHandler=t.systemSendFile=t.systemSendImageHandler=t.systemSendImage=t.systemSendTextHandler=t.systemSendText=t.meSendHandler=t.meSend=t.sellerSendHandler=t.sellerSend=t.systemSendHandler=t.systemSend=t.newMessageHandler=t.newMessage=t.pushMessageAndNotifyHandler=t.pushMessageAndNotify=t.pushMessageHandler=t.pushMessage=t.resetHandler=t.reset=void 0;const o=n(381),a=n(55),i=n(107),r=n(382),s=n(133),l=n(224),d=n(132),c=n(225),u=n(228),p=n(31),m=n(67),f=n(86);t.reset=()=>({type:o.ActionType.RESET}),t.resetHandler=()=>{const{chat:e}=u.rootInit;return e},t.pushMessage=e=>({type:o.ActionType.PUSH_MESSAGE,message:e}),t.pushMessageHandler=({chat:e},{message:t})=>{var n;const{conversation:o}=e,{messages:i,top:r,bottom:s,lastResponseInfo:l}=o;return(p.isString(t.createdTime)||p.isNumber(t.createdTime))&&(t.createdTime=new Date(t.createdTime)),o.messages=p.clone(i),o.messages[t.createdTime.getTime().toString()]=t,(!r||t.createdTime.getTime()<r.createdTime.getTime())&&(o.top=t),(!s||t.createdTime.getTime()>s.createdTime.getTime())&&(o.bottom=t),(null===(n=t.message.attachment)||void 0===n?void 0:n.type)===a.MessageAttachmentType.ResponseInfo&&(!l||t.createdTime.getTime()>l.createdTime.getTime())&&(o.lastResponseInfo=t),e},t.pushMessageAndNotify=e=>({type:o.ActionType.PUSH_MESSAGE_AND_NOTIFY,message:e}),t.pushMessageAndNotifyHandler=function*(e,{message:n}){var o;const{sender:i,message:r}=n;let s;if(yield m.put(t.pushMessage(n)),r.text)s=r.text;else switch(null===(o=r.attachment)||void 0===o?void 0:o.type){case a.MessageAttachmentType.Image:s="Bạn vừa nhận được 1 hình ảnh.";break;case a.MessageAttachmentType.File:s="Bạn vừa nhận được 1 tập tin.";break;default:s="Bạn vừa nhận được một tin nhắn."}i.type===a.SenderType.Seller?yield m.put(d.sendNotify(c.NotifyLevel.INFO,s,{audio:"MessageSeller",hiddenIfOpened:!0})):i.type===a.SenderType.System?yield m.put(d.sendNotify(c.NotifyLevel.INFO,s,{audio:"MessageSystem",hiddenIfOpened:!0})):i.type===a.SenderType.Me&&(yield m.put(d.sendNotify(c.NotifyLevel.INFO,null,{audio:"MessageSent",hiddenIfOpened:!0,hiddenIfTabActive:!0})))},t.newMessage=e=>({type:o.ActionType.NEW_MESSAGE,message:e}),t.newMessageHandler=function*({me:e,conversation:n},{message:o}){const{id:a}=e,{socket:d}=n,c={...o,createdTime:new Date,local:!0};yield m.put(t.pushMessageAndNotify(c)),yield m.put(i.scrollToBottom()),a<0&&(yield m.put(s.fetchInbox()),yield m.take(l.ActionType.FETCH_INBOX_DONE)),d||(yield m.put(i.connectSocket()),yield m.take(r.ActionType.SOCKET_CONNECTED)),yield m.put(i.sendMessage(c))},t.systemSend=e=>({type:o.ActionType.SYSTEM_SEND,data:e}),t.systemSendHandler=function*(e,{data:n}){const o={type:a.SenderType.System,name:"System",avatar:null};yield m.put(t.newMessage({sender:o,message:n}))},t.sellerSend=e=>({type:o.ActionType.SELLER_SEND,data:e}),t.sellerSendHandler=function*(e,{data:n}){const o={id:0,type:a.SenderType.Seller,name:"Seller",avatar:null};yield m.put(t.newMessage({sender:o,message:n}))},t.meSend=e=>({type:o.ActionType.ME_SEND,data:e}),t.meSendHandler=function*({me:e},{data:n}){const o={type:a.SenderType.Me,...e};yield m.put(t.newMessage({sender:o,message:n}))},t.systemSendText=e=>({type:o.ActionType.SYSTEM_SEND_TEXT,text:e}),t.systemSendTextHandler=function*(e,{text:n}){yield m.put(t.systemSend({text:n}))},t.systemSendImage=(e,t)=>({type:o.ActionType.SYSTEM_SEND_IMAGE,text:e,image:t}),t.systemSendImageHandler=function*(e,{text:n,image:o}){yield m.put(t.systemSend({text:n,attachment:{type:a.MessageAttachmentType.Image,payload:{url:o.url,name:"image.jpg",is_reusable:!0}}}))},t.systemSendFile=(e,t)=>({type:o.ActionType.SYSTEM_SEND_FILE,text:e,file:t}),t.systemSendFileHandler=function*(e,{text:n,file:o}){yield m.put(t.systemSend({text:n,attachment:{type:a.MessageAttachmentType.File,payload:{url:o.url,name:o.name,is_reusable:!0}}}))},t.systemSendRequestInfo=()=>({type:o.ActionType.SYSTEM_SEND_REQUEST_INFO}),t.systemSendRequestInfoHandler=function*(){yield m.put(t.systemSend({attachment:{type:a.MessageAttachmentType.RequestInfo,payload:{}}}))},t.sellerSendText=e=>({type:o.ActionType.SELLER_SEND_TEXT,text:e}),t.sellerSendTextHandler=function*(e,{text:n}){yield m.put(t.sellerSend({text:n}))},t.sellerSendImage=(e,t)=>({type:o.ActionType.SELLER_SEND_IMAGE,text:e,image:t}),t.sellerSendImageHandler=function*(e,{text:n,image:o}){yield m.put(t.sellerSend({text:n,attachment:{type:a.MessageAttachmentType.Image,payload:{url:o.url,name:"image.jpg",is_reusable:!0}}}))},t.sellerSendFile=(e,t)=>({type:o.ActionType.SELLER_SEND_FILE,text:e,file:t}),t.sellerSendFileHandler=function*(e,{text:n,file:o}){yield m.put(t.sellerSend({text:n,attachment:{type:a.MessageAttachmentType.File,payload:{url:o.url,name:o.name,is_reusable:!0}}}))},t.meSendText=e=>({type:o.ActionType.ME_SEND_TEXT,text:e}),t.meSendTextHandler=function*(e,{text:n}){yield m.put(t.meSend({text:n}))},t.meSendImage=(e,t)=>({type:o.ActionType.ME_SEND_IMAGE,text:e,image:t}),t.meSendImageHandler=function*(e,{text:n,image:o}){yield m.put(t.meSend({text:n,attachment:{type:a.MessageAttachmentType.Image,payload:{url:o.url,name:"image.jpg",is_reusable:!0}}}))},t.meSendFile=(e,t)=>({type:o.ActionType.ME_SEND_FILE,text:e,file:t}),t.meSendFileHandler=function*(e,{text:n,file:o}){yield m.put(t.meSend({text:n,attachment:{type:a.MessageAttachmentType.File,payload:{url:o.url,name:o.name,is_reusable:!0}}}))},t.meSendResponseInfo=e=>({type:o.ActionType.ME_SEND_RESPONSE_INFO,data:e}),t.meSendResponseInfoHandler=function*({backend:e,chat:n},{data:o}){var i;const{conversation:r}=n,{api:l}=e;if(yield m.put(t.meSend({attachment:{type:a.MessageAttachmentType.ResponseInfo,payload:o}})),l){const e=yield m.call([l,l.updateUserInfo],o);if(e.error)return void(yield m.put(f.processError(e)));yield m.put(s.fetchInboxDone(e))}const{messages:d}=r,c=p.keys(d);c.sort().reverse();for(const e of c){if((null===(i=d[e].message.attachment)||void 0===i?void 0:i.type)===a.MessageAttachmentType.ResponseInfo)break}},t.markMessagePushed=e=>({type:o.ActionType.MARK_MESSAGE_PUSHED,message:e}),t.markMessagePushedHandler=({chat:e},{message:t})=>{const{conversation:n}=e;for(const[e,o]of p.toPairs(n.messages))if(t.createdTime.getTime()===o.createdTime.getTime()){const t=p.clone(o);delete t.local,t.pushed=!0,n.messages[parseInt(e)]=t}return e},t.markMessageSent=(e,t,n)=>({type:o.ActionType.MARK_MESSAGE_SENT,message:e,id:t,time:new Date(n)}),t.markMessageSentHandler=({backend:e,chat:t},{message:n,id:o,time:a})=>{const{api:i}=e,{conversation:r}=t;for(const[e,t]of p.toPairs(r.messages))if(n.createdTime.getTime()===t.createdTime.getTime()){const n=p.clone(t);delete n.pushed,n.id=o,n.createdTime=a,r.messages[parseInt(e)]=n,i&&i.pushMessageToDB(n)}return t},t.checkLastMessageTime=e=>({type:o.ActionType.CHECK_LAST_MESSAGE_TIME,time:e}),t.checkLastMessageTimeHandler=function*({chat:e},{time:t}){const{conversation:n}=e,{bottom:o}=n;(!o||Math.abs(t-o.createdTime.getTime())>1e3)&&(yield m.put(s.fetchMessage("after",(null==o?void 0:o.createdTime)||new Date(0))))},t.mapHandler={[o.ActionType.RESET]:t.resetHandler,[o.ActionType.PUSH_MESSAGE]:t.pushMessageHandler,[o.ActionType.PUSH_MESSAGE_AND_NOTIFY]:t.pushMessageAndNotifyHandler,[o.ActionType.NEW_MESSAGE]:t.newMessageHandler,[o.ActionType.SYSTEM_SEND]:t.systemSendHandler,[o.ActionType.SELLER_SEND]:t.sellerSendHandler,[o.ActionType.ME_SEND]:t.meSendHandler,[o.ActionType.SYSTEM_SEND_TEXT]:t.systemSendTextHandler,[o.ActionType.SYSTEM_SEND_IMAGE]:t.systemSendImageHandler,[o.ActionType.SYSTEM_SEND_FILE]:t.systemSendFileHandler,[o.ActionType.SYSTEM_SEND_REQUEST_INFO]:t.systemSendRequestInfoHandler,[o.ActionType.SELLER_SEND_TEXT]:t.sellerSendTextHandler,[o.ActionType.SELLER_SEND_IMAGE]:t.sellerSendImageHandler,[o.ActionType.SELLER_SEND_FILE]:t.sellerSendFileHandler,[o.ActionType.ME_SEND_TEXT]:t.meSendTextHandler,[o.ActionType.ME_SEND_IMAGE]:t.meSendImageHandler,[o.ActionType.ME_SEND_FILE]:t.meSendFileHandler,[o.ActionType.ME_SEND_RESPONSE_INFO]:t.meSendResponseInfoHandler,[o.ActionType.MARK_MESSAGE_PUSHED]:t.markMessagePushedHandler,[o.ActionType.MARK_MESSAGE_SENT]:t.markMessageSentHandler,[o.ActionType.CHECK_LAST_MESSAGE_TIME]:t.checkLastMessageTimeHandler},t.default=t.mapHandler}});